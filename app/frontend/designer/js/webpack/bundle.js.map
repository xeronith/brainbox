{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./app/frontend/designer/images/cursors/cursor_circle.png","webpack:///./app/frontend/designer/images/cursors/cursor_line.png","webpack:///./app/frontend/designer/images/cursors/cursor_port.png","webpack:///./app/frontend/designer/images/cursors/cursor_rectangle.png","webpack:///./app/frontend/designer/images/cursors/cursor_text.png","webpack:///./app/frontend/designer/images/layer_circle.svg","webpack:///./app/frontend/designer/images/layer_line.svg","webpack:///./app/frontend/designer/images/layer_port.svg","webpack:///./app/frontend/designer/images/layer_rect.svg","webpack:///./app/frontend/designer/images/layer_text.svg","webpack:///./app/frontend/designer/js/Application.js","webpack:///./app/frontend/designer/js/Configuration.js","webpack:///./app/frontend/designer/js/FilterPane.js","webpack:///./app/frontend/designer/js/Hardware.js","webpack:///./app/frontend/designer/js/LabelInplaceEditor.js","webpack:///./app/frontend/designer/js/Layer.js","webpack:///./app/frontend/designer/js/Toolbar.js","webpack:///./app/frontend/designer/js/View.js","webpack:///./app/frontend/designer/js/dialog/FigureCodeEdit.js","webpack:///./app/frontend/designer/js/dialog/FigureMarkdownEdit.js","webpack:///./app/frontend/designer/js/dialog/FigureTest.js","webpack:///./app/frontend/designer/js/dialog/FileOpen.js","webpack:///./app/frontend/designer/js/dialog/FileSave.js","webpack:///./app/frontend/designer/js/dialog/FileSaveAs.js","webpack:///./app/frontend/designer/js/figure/CircuitFigure.js","webpack:///./app/frontend/designer/js/figure/DecoratedInputPort.js","webpack:///./app/frontend/designer/js/figure/ExtLabel.js","webpack:///./app/frontend/designer/js/figure/ExtLine.js","webpack:///./app/frontend/designer/js/figure/ExtPolygon.js","webpack:///./app/frontend/designer/js/figure/ExtPort.js","webpack:///./app/frontend/designer/js/figure/MarkerFigure.js","webpack:///./app/frontend/designer/js/figure/MarkerStateAFigure.js","webpack:///./app/frontend/designer/js/figure/MarkerStateBFigure.js","webpack:///./app/frontend/designer/js/figure/PolyCircle.js","webpack:///./app/frontend/designer/js/figure/PolyRect.js","webpack:///./app/frontend/designer/js/figure/TestSwitch.js","webpack:///./app/frontend/designer/js/figure/index.js","webpack:///./app/frontend/designer/js/filter/BlurFilter.js","webpack:///./app/frontend/designer/js/filter/FanoutFilter.js","webpack:///./app/frontend/designer/js/filter/FillColorFilter.js","webpack:///./app/frontend/designer/js/filter/Filter.js","webpack:///./app/frontend/designer/js/filter/FontColorFilter.js","webpack:///./app/frontend/designer/js/filter/FontSizeFilter.js","webpack:///./app/frontend/designer/js/filter/LinearGradientFilter.js","webpack:///./app/frontend/designer/js/filter/OpacityFilter.js","webpack:///./app/frontend/designer/js/filter/OutlineStrokeFilter.js","webpack:///./app/frontend/designer/js/filter/PortDirectionFilter.js","webpack:///./app/frontend/designer/js/filter/PortTypeFilter.js","webpack:///./app/frontend/designer/js/filter/PositionFilter.js","webpack:///./app/frontend/designer/js/filter/RadiusFilter.js","webpack:///./app/frontend/designer/js/filter/SizeFilter.js","webpack:///./app/frontend/designer/js/filter/StrokeFilter.js","webpack:///./app/frontend/designer/js/filter/TextLinearGradientFilter.js","webpack:///./app/frontend/designer/js/filter/index.js","webpack:///./app/frontend/designer/js/global.js","webpack:///./app/frontend/designer/js/index.js","webpack:///./app/frontend/designer/js/io/BackendStorage.js","webpack:///./app/frontend/designer/js/io/FigureWriter.js","webpack:///./app/frontend/designer/js/policy/AbstractGeoToolPolicy.js","webpack:///./app/frontend/designer/js/policy/AbstractToolPolicy.js","webpack:///./app/frontend/designer/js/policy/CircleToolPolicy.js","webpack:///./app/frontend/designer/js/policy/GeoDifferenceToolPolicy.js","webpack:///./app/frontend/designer/js/policy/GeoIntersectionToolPolicy.js","webpack:///./app/frontend/designer/js/policy/GeoUnionToolPolicy.js","webpack:///./app/frontend/designer/js/policy/LineToolPolicy.js","webpack:///./app/frontend/designer/js/policy/PortToolPolicy.js","webpack:///./app/frontend/designer/js/policy/RectangleToolPolicy.js","webpack:///./app/frontend/designer/js/policy/SelectionToolPolicy.js","webpack:///./app/frontend/designer/js/policy/TextToolPolicy.js","webpack:///./app/frontend/designer/js/util/mousetrap-global.js","webpack:///./app/frontend/designer/js/util/mousetrap-pause.js","webpack:///./app/frontend/designer/js/widget/jscolor/arrow.gif","webpack:///./app/frontend/designer/js/widget/jscolor/cross.gif","webpack:///./app/frontend/designer/js/widget/jscolor/hs.png","webpack:///./app/frontend/designer/js/widget/jscolor/hv.png","webpack:///./app/frontend/designer/js/widget/jscolor/jscolor.js","webpack:///./app/frontend/designer/js/widget/ui.anglepicker.js","webpack:///./app/frontend/designer/less/index.less?9c26","webpack:///./app/frontend/designer/lib/inlineSVG.js","webpack:///./app/frontend/designer/less/index.less","webpack:///./node_modules/font-awesome/css/font-awesome.css"],"names":["Application","documentConfigurationTempl","baseClass","code","$","text","trim","localStorage","window","e","delegate","Mousetrap","pause","unpause","documentConfiguration","extend","storage","Storage","view","View","toolbar","Toolbar","layer","Layer","filter","FilterPane","installEditPolicy","SelectionToolPolicy","file","getParam","_load","fileNew","addEventListener","event","state","id","loadFile","then","content","clear","centerDocument","reader","draw2d","io","json","Reader","unmarshal","getConfiguration","fileName","getCommandStack","markSaveLocation","name","replace","regexS","regex","RegExp","results","exec","location","href","hash","shapeTemplate","console","log","currentFile","FileOpen","show","setConfiguration","FileSaveAs","FileSave","key","figures","getExtFigures","getSize","first","getUserData","conf","setUserData","fileSuffix","serverless","backend","list","get","save","app","elementId","DEFAULT_LABEL","html","currentFigure","on","onSelectionChanged","bind","canvas","figure","addClass","isExtFigure","filters","each","i","removePane","insertPane","removeClass","getPotentialFilters","append","impl","label","_this","$this","filterName","data","eval","addFilter","raspi","set","pin","value","callback","connected","arduino","ui","LabelInplaceEditor","NAME","init","attr","setter","getter","_super","onStart","onCancel","onCommit","emitter","_updateSelection","figureToCSS","isVisible","inlineSVG","tooltip","placement","container","delay","hide","sortable","axis","update","toArray","reverse","forEach","getExtFigure","toFront","proxy","currentTarget","bootbox","prompt","title","className","result","stackChanged","setTimeout","focus","select","setVisible","setCurrentSelection","parent","ripple","selection","getSelection","rect","getBoundingBox","p","getCenter","circle","paper","x","y","Math","max","w","h","fill","stroke","anim","Raphael","animation","transform","opacity","remove","animate","split","slice","buttonGroup","openButton","fileOpen","bindGlobal","click","saveButton","fileSave","undoButton","undo","redoButton","redo","deleteButton","startTransaction","Configuration","i18n","command","deleteShape","index","cmd","createCommand","CommandType","DELETE","execute","commitTransaction","selectButton","shapeButton","RectangleToolPolicy","executed","CircleToolPolicy","LineToolPolicy","TextToolPolicy","PortToolPolicy","unionButton","getAll","GeoUnionToolPolicy","differenceButton","GeoDifferenceToolPolicy","intersectionButton","GeoIntersectionToolPolicy","testButton","FigureTest","exc","FigureCodeEdit","codeButton","markdownButton","FigureMarkdownEdit","getStack","canUndo","canRedo","Canvas","clippboardFigure","grid","policy","ShowGridEditPolicy","setScrollArea","FadeoutDecorationPolicy","SnapToGeometryEditPolicy","SnapToCenterEditPolicy","SnapToInBetweenEditPolicy","diff","getZoom","f","translate","primarySelection","getPrimary","clone","cloneToAdd","CommandAdd","getPosition","setZoom","newZoom","bb","c","scrollTo","height","width","prop","uninstallEditPolicy","stopPropagation","reset","setCursor","cursor","css","parseInt","getFigures","grep","lines","getLines","line","addAll","xCoords","yCoords","shape_designer","ExtPort","b","push","minX","min","minY","geo","Rectangle","hideDecoration","unselect","showDecoration","getWidth","find","getHeight","centerView","scrollTop","scrollLeft","dx","dy","fromDocumentToCanvasCoordinate","Point","getAbsoluteX","zoomFactor","getAbsoluteY","fromCanvasToDocumentCoordinate","splash","fadeIn","before","obj","method","wrapper","orig","args","Array","prototype","call","arguments","apply","intersects","range","editor","getSelectionRange","preventReadonly","next","last","length","findIndex","element","array","startsWith","ace","edit","session","getSession","Range","require","range2","addMarker","setMode","setUseWrapMode","moveCursorTo","keyBinding","addKeyboardHandler","handleKeyboard","keyString","keyCode","passEvent","start","doc","createAnchor","end","$insertRight","getValue","fadeOut","mdHtml","scrollMap","lineHeight","defaults","xhtmlOut","breaks","langPrefix","linkify","linkTarget","typographer","Remarkable","markdown","removeDialog","renderer","rules","paragraph_open","tokens","idx","level","heading_open","hLevel","$preview","$source","_debounce","syncScroll","updateResult","source","render","offset","nonEmptyList","pos","a","lineHeightMap","linesCount","acc","sourceLikeDiv","_scrollMap","position","visibility","clientWidth","appendTo","top","str","lh","parseFloat","round","n","el","$el","t","scrollHeight","scroll","lineNo","posTo","floor","buildScrollMap","stop","func","wait","immediate","timeout","context","later","callNow","clearTimeout","animationFrameFunc","_calculate","writer","FigureWriter","testShape","marshal","js","alert","ShowDotEditPolicy","router","layout","connection","InteractiveManhattanConnectionRouter","ComposedConnectionCreatePolicy","DragConnectionCreatePolicy","createConnection","Connection","radius","color","outlineStroke","outlineColor","OrthogonalConnectionCreatePolicy","test","add","shape","node","Start","toggle1","TestSwitch","toggle2","End","simulate","requestAnimationFrame","calculate","outPort","getSource","inPort","getTarget","setValue","setColor","modal","currentDir","fetchPathContent","newPath","getFiles","files","endsWith","type","compiled","Hogan","compile","parentPath","dirname","output","rootDir","icon","path","preventDefault","png","Writer","imageDataUrl","val","off","newName","saveFile","scale","pop","SetFigure","tooltipTimer","bgColor","persistPorts","zoomCallback","positionTooltip","hideTooltip","showTooltip","setCanvas","fast","outerWidth","applyAlpha","layerGet","attributes","svgNodes","some","layerAttr","layerShow","flag","duration","onStop","getParameterSettings","getRequiredHardware","onDrop","dropTarget","shiftKey","ctrlKey","getPersistentAttributes","memento","labels","children","labelJSON","locator","setPersistentAttributes","resetChildren","DecoratedInputPort","InputPort","hasChanged","decoration","MarkerFigure","LeftLocator","margin","useDefaultValue","setStick","hasChangedValue","hasRisingEdge","hasFallingEdge","ExtLabel","basic","Label","blur","util","ArrayList","PositionFilter","FontSizeFilter","FontColorFilter","installEditor","setBlur","repaint","getBlur","removeFilter","alreadyIn","onInstall","lattr","bold","fontSize","fontFamily","fontColor","padding","left","filterMemento","ExtLine","PolyLine","StrokeFilter","setRouter","VertexRouter","VertexSelectionFeedbackPolicy","ExtPolygon","Polygon","SizeFilter","FillColorFilter","RectangleSelectionFeedbackPolicy","onDoubleClick","svgPathString","calculatePath","sizeFilterAdded","insertElementAt","Circle","diameter","direction","fanout","FanoutFilter","PortDirectionFilter","PortTypeFilter","AntSelectionFeedbackPolicy","setInputType","getInputType","setMaxFanOut","count","getMaxFanOut","setConnectionDirection","updateDecoration","getConnectionDirection","ArrowUp","TopLocator","ArrowRight","RightLocator","ArrowDown","BottomLocator","ArrowLeft","fanoutFilterAdded","VerticalLayout","isMouseOver","stick","defaultValue","stateA","MarkerStateAFigure","stateB","MarkerStateBFigure","onMouseOver","getStickTickFigure","hitTest","getStick","getLabelFigure","contextMenu","selector","trigger","events","options","setDefaultValue","items","visible","setTick","setText","bottom","right","HorizontalLayout","gap","stickTick","resizeable","addCssClass","repaintBlocked","createShapeElement","arrowLength","vertices","getAbsolutePosition","getRadius","equals","begin","Util","insetPoint","modStart","modEnd","join","PolyCircle","Oval","center","setCenter","getVertices","w2","h2","sides","radian","PI","cos","sin","PolyRect","topLeft","bottomRight","addVertex","createPort","toggleValue","getOutputPort","getConnections","BlurFilter","$parent","containerId","cssScope","svgSelector","TouchSpin","step","Filter","maxboostedstep","postfix","colorPicker","picker","jscolor","document","getElementById","fromString","getBackgroundColor","onImmediateChange","setBackgroundColor","toString","hidePicker","relatedFigure","getFontColor","setFontColor","getFontSize","boostat","setFontSize","LinearGradientFilter","colorPicker1","colorPicker2","startColor","endColor","angle","anglepicker","change","picker1","picker2","setStroke","OpacityFilter","getAlpha","setAlpha","OutlineStrokeFilter","getOutlineStroke","setOutlineStroke","getOutlineColor","setOutlineColor","dir","block","setPosition","RadiusFilter","setRadius","setWidth","setHeight","getStroke","getColor","TextLinearGradientFilter","hardware","CircuitFigure","widget","bridge","button","jQuery","uaMatch","ua","toLowerCase","match","indexOf","browser","version","matched","navigator","userAgent","chrome","webkit","safari","load","k","global","socket","BackendStorage","Object","preventExtensions","ajax","url","xhrFields","withCredentials","response","JSON","parse","sort","filePath","stringify","image","undefined","fail","error","segments","history","pushState","resultCallback","customCode","ports","shapes","constructor","extra","getText","template","tags","Base64","encode","jsts","AbstractToolPolicy","firstFigure","operation","setToolHeader","setToolMessage","contains","setPrimary","fireEvent","executeGeometryOperation","figure1","figure2","operationFunc","p1","getGeometry","p2","union","GeoJSONWriter","write","CommandCollection","CommandDelete","coordinates","poly","vertex","getX","getY","WKTReader","v","asArray","read","map","SelectionPolicy","setToolText","message","TITLE","boundingBoxFigure1","boundingBoxFigure2","onUninstall","onMouseDown","onMouseDrag","dx2","dy2","r","sqrt","abs","Color","onMouseUp","AbstractGeoToolPolicy","getBestFigure","getParent","Port","isSelectable","MESSAGE_STEP1","MESSAGE_STEP2","lineFigure","onMouseMove","setEndPoint","onClick","beforeLast","removeVertexAt","setStartPoint","mouseDownElement","topLeftPoint","alpha","dash","setDimension","distance","BoundingboxSelectionPolicy","heading","cloneOnDrag","mouseDraggingElement","ResizeHandle","onDragEnd","onDragStart","newFigure","setPadding","_globalCallbacks","_originalStopCallback","stopCallback","combo","sequence","self","paused","keys","action","bindClass","binding","preloading","install","addEvent","preload","matchClass","getElementsByTagName","m","Function","eInvalidProp","fn","imgRequire","hasOwnProperty","loadImage","images","pad","sld","cross","arrow","imgLoaded","requireImage","filename","Image","src","fetchElement","mixed","evnt","attachEvent","createEvent","ev","initEvent","dispatchEvent","createEventObject","getElementPos","e1","e2","offsetParent","offsetLeft","offsetTop","parentNode","nodeName","toUpperCase","getElementSize","offsetWidth","offsetHeight","getRelMousePos","offsetX","offsetY","layerX","layerY","getViewPos","pageYOffset","pageXOffset","body","documentElement","getViewSize","innerWidth","innerHeight","clientHeight","URI","uri","scheme","authority","query","fragment","toAbsolute","base","removeDotSegments","substr","out","rm","target","required","adjust","caps","slider","valueElement","styleElement","hsv","rgb","minH","maxH","minS","maxS","minV","maxV","pickerOnfocus","pickerMode","pickerPosition","pickerSmartPosition","pickerButtonHeight","pickerClosable","pickerCloseText","pickerButtonColor","pickerFace","pickerFaceColor","pickerBorder","pickerBorderColor","pickerInset","pickerInsetColor","pickerZIndex","isPickerOwner","removePicker","showPicker","tp","ts","vp","vs","ps","getPickerDims","l","pp","drawPicker","importColor","exportColor","leaveValue","style","backgroundImage","jscStyle","backgroundColor","leaveStyle","flags","leavePad","redrawPad","leaveSld","redrawSld","fromHSV","s","HSV_RGB","fromRGB","g","RGB_HSV","hex","charAt","owner","removeChild","boxB","box","createElement","padB","padM","sldB","sldM","btn","btnS","btnT","createTextNode","THIS","segSize","seg","appendChild","onmouseup","onmouseout","onmousedown","abortBlur","onmousemove","holdPad","holdSld","setPad","setSld","empty","removeAllRanges","dispatchImmediateChange","handle_touchmove","touches","pageX","touchOffset","X","pageY","Y","removeEventListener","modeID","dims","zIndex","border","borderColor","background","overflow","display","eOldIE","setBtnBorder","insetColors","pickerOutsetColor","font","textAlign","padImg","hsImg","hvImg","crossImg","backgroundRepeat","arrowImg","backgroundPosition","o","yComponent","childNodes","blurTarget","blurValue","mpos","updateField","setAttribute","mouse","widgetEventPrefix","_init","_mouseInit","pointer","setDegrees","_propagate","_trigger","_create","destroy","_mouseDestroy","_mouseStart","myOffset","startOffset","setDegreesFromEvent","_mouseStop","_mouseDrag","_setOption","newValue","oldValue","drawRotation","clockwise","rotation","degrees","clamp","opposite","adjacent","radians","atan","roundToMultiple","shiftSnap","snap","number","multiple","integer","rest","root","factory","define","supports","querySelector","settings","initClass","after","times","extended","deep","merge","svgs","querySelectorAll","inliner","cb","svg","getAttribute","request","XMLHttpRequest","open","onload","status","parser","DOMParser","parseFromString","responseText","inlinedSVG","titles","descs","removeAttribute","attribute","classList","longdesc","description","createElementNS","descriptionText","insertBefore","firstChild","alt","titleText","replaceChild","onerror","send"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./app/frontend/designer/js/index.js\");\n","module.exports = \"js/webpack/492f40d01cb4aa7e66fbae9f01abda49.png\";","module.exports = \"js/webpack/2545e9daa1296aeaf03c8ea0aaab4afe.png\";","module.exports = \"js/webpack/657c4c890bc69affe796a29f4d9d0dcf.png\";","module.exports = \"js/webpack/485860c000764fd82149fc94aa6673cd.png\";","module.exports = \"js/webpack/2e59ba615169ea5c7506a8094f9e1301.png\";","module.exports = \"js/webpack/99fd154564faa73e994b9fe684497597.svg\";","module.exports = \"js/webpack/1c021e8bb20ac2f29e3da9ff5815550c.svg\";","module.exports = \"js/webpack/b18448d804a3c629d1b8b9f03d894e04.svg\";","module.exports = \"js/webpack/7f7ebe1e9d6b4b01543498d12568eb3b.svg\";","module.exports = \"js/webpack/cbca3e305b7b982c0745344c6951285c.svg\";","\nimport View from \"./View\"\nimport Toolbar from \"./Toolbar\"\nimport Layer from \"./Layer\"\nimport FilterPane from \"./FilterPane\"\nimport Storage from \"./io/BackendStorage\"\nimport SelectionToolPolicy from './policy/SelectionToolPolicy'\nimport FileOpen from \"./dialog/FileOpen\"\nimport FileSave from \"./dialog/FileSave\"\nimport FileSaveAs from \"./dialog/FileSaveAs\"\n\n/**\n *\n * The **GraphicalEditor** is responsible for layout and dialog handling.\n *\n * @author Andreas Herz\n */\n\nexport default class Application {\n  /**\n   * @constructor\n   *\n   * @param {String} canvasId the id of the DOM element to use as paint container\n   */\n  constructor() {\n\n    this.documentConfigurationTempl = {\n      baseClass: \"draw2d.SetFigure\",\n      code: $(\"#shape-edit-template\").text().trim()\n    }\n\n    this.localStorage = []\n    try {\n      if ('localStorage' in window && window.localStorage !== null) {\n        this.localStorage = localStorage\n      }\n    } catch (e) {\n\n    }\n\n    $( \"body\" )\n      .delegate( \".mousetrap-pause\", \"focus\", function() {\n        Mousetrap.pause()\n      })\n      .delegate(\".mousetrap-pause\", \"blur\", function (){\n        Mousetrap.unpause()\n      });\n\n    // automatic add the configuration to the very first shape\n    // in the document as userData\n    //\n    this.documentConfiguration = $.extend({}, this.documentConfigurationTempl)\n\n    this.storage = new Storage()\n    this.view = new View(this, \"canvas\")\n    this.toolbar = new Toolbar(this, \".toolbar\", this.view)\n    this.layer = new Layer(this, \"layer_elements\", this.view)\n    this.filter = new FilterPane(this, \"#filter .filter_actions\", this.view)\n\n    this.view.installEditPolicy(new SelectionToolPolicy())\n\n    // check if the user has added a \"file\" parameter. In this case we load the shape from\n    // the draw2d.shape github repository\n    //\n    let file = this.getParam(\"file\")\n    if (file) {\n      this._load(file)\n    }\n    else {\n      this.fileNew()\n    }\n\n    // listen on the history object to load files\n    //\n    window.addEventListener('popstate', (event) => {\n      if (event.state && event.state.id === 'editor') {\n        // Render new content for the hompage\n        this._load(event.state.file)\n      }\n    })\n  }\n\n  _load(file){\n     this.storage.loadFile(file)\n      .then((content) => {\n        this.view.clear()\n        this.view.centerDocument()\n        let reader = new draw2d.io.json.Reader()\n        reader.unmarshal(this.view, content)\n        this.getConfiguration()\n        this.storage.fileName = file\n        this.view.getCommandStack().markSaveLocation()\n        this.view.centerDocument()\n        return content\n      })\n  }\n\n  getParam(name) {\n    name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\")\n    let regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\"\n    let regex = new RegExp(regexS)\n    let results = regex.exec(window.location.href)\n    // the param isn't part of the normal URL pattern...\n    //\n    if (results === null) {\n      // maybe it is part in the hash.\n      //\n      regexS = \"[\\\\#]\" + name + \"=([^&#]*)\"\n      regex = new RegExp(regexS)\n      results = regex.exec(window.location.hash)\n      if (results === null) {\n        return null\n      }\n    }\n    return results[1]\n  }\n\n  fileNew(shapeTemplate) {\n    console.log(this)\n    console.log(this.view)\n    console.log(this.storage)\n    this.view.clear()\n    this.storage.currentFile = null\n    this.documentConfiguration = $.extend({}, this.documentConfigurationTempl)\n\n    if (shapeTemplate) {\n      new draw2d.io.json.Reader().unmarshal(this.view, shapeTemplate)\n      this.view.getCommandStack().markSaveLocation()\n      this.view.centerDocument()\n    }\n  }\n\n  fileOpen() {\n    new FileOpen().show(this.storage, this.view)\n  }\n\n  fileSave() {\n    this.setConfiguration()\n    if (this.storage.currentFile === null) {\n      new FileSaveAs().show(this.storage,this.view)\n    }\n    else {\n      new FileSave().show(this.storage,this.view)\n    }\n  }\n\n\n  getConfiguration(key) {\n    let figures = this.view.getExtFigures()\n    if (figures.getSize() > 0) {\n      this.documentConfiguration = $.extend({}, this.documentConfiguration, figures.first().getUserData())\n    }\n\n    if (key) {\n      return this.documentConfiguration[key]\n    }\n    return this.documentConfiguration\n  }\n\n  setConfiguration(conf) {\n    this.documentConfiguration = $.extend({}, this.documentConfiguration, conf)\n    let figures = this.view.getExtFigures()\n    if (figures.getSize() > 0) {\n      figures.first().setUserData(this.documentConfiguration)\n    }\n  }\n}\n","export default {\n  fileSuffix: \".shape\",\n  serverless: false,\n  backend: {\n    file: {\n      list: \"/backend/shape/list\",\n      get:  file=>`../backend/shape/get?filePath=${file}`,\n      save:\"/backend/shape/save\"\n    }\n  }\n}\n","export default class FilterPane {\n\n\n  constructor(app, elementId, view) {\n    this.DEFAULT_LABEL = \"Properties\"\n    this.html = $(elementId)\n    this.view = view\n    this.currentFigure = null\n\n    // Register a Selection listener for the state handling\n    // of the Delete Button\n    //\n    view.on(\"select\", this.onSelectionChanged.bind(this))\n  }\n\n  /**\n   * @method\n   * Called if the selection in the canvas has been changed. You must register this\n   * class on the canvas to receive this event.\n   *\n   * @param {draw2d.Canvas} canvas the emitter of the event. In this case it is the canvas.\n   * @param {draw2d.Figure} figure\n   */\n  onSelectionChanged(canvas, event = {figure: null}) {\n    var figure = event.figure\n\n    this.html.html('')\n    $('#add_filter_button').addClass('disabled')\n\n    if (this.currentFigure !== null && typeof this.currentFigure.isExtFigure !== \"undefined\") {\n      this.currentFigure.filters.each((i, filter) => {\n        filter.removePane()\n      })\n    }\n    $(\"#add_filter_action_menu\").html(\"\")\n\n    if (figure !== null && typeof figure.isExtFigure !== \"undefined\") {\n      figure.filters.each((i, filter) => {\n        filter.insertPane(figure, this.html)\n      })\n      $('#add_filter_button').removeClass('disabled')\n\n      $.each(figure.getPotentialFilters(), function (i, e) {\n        $(\"#add_filter_action_menu\").append(\"<li><a href='#' data-filter='\" + e.impl + \"' >\" + e.label + \"</a></li>\")\n      })\n\n      var _this = this\n      $(\"#add_filter_action_menu a\").on(\"click\", function () {\n        var $this = $(this)\n        var filterName = $this.data(\"filter\")\n        var filter = eval(\"new \" + filterName + \"()\")\n        _this.currentFigure.addFilter(filter)\n        _this.onSelectionChanged(_this.view, {figure: _this.currentFigure})\n      })\n    }\n\n    this.currentFigure = figure\n  }\n}\n","// just a simple mock object for the brainbox\n// Hardware binding\n//\nexport default {\n\n  raspi: {\n    set: function (pin, value) {\n    },\n    get: function (pin) {\n      return false\n    },\n    on: function(event, callback){\n    },\n    connected: false\n  },\n\n  arduino: {\n    set: function (pin, value) {\n    },\n    get: function (pin) {\n      return false\n    },\n    on: function(event, callback){\n    },\n    connected: false\n  }\n}\n","export default draw2d.ui.LabelInplaceEditor.extend({\n\n    NAME : \"LabelInplaceEditor\",\n\n    /**\n     * @constructor\n     *\n     */\n    init: function(attr, setter, getter)\n    {\n        this._super({\n          onStart: function(){\n            Mousetrap.pause()\n          },\n          onCancel: function(){\n            Mousetrap.unpause()\n          },\n          onCommit: function(){\n            Mousetrap.unpause()\n          }\n        }, setter, getter);\n    }\n});\n","export default class Layer {\n\n\n  constructor(app, elementId, view) {\n    this.html = $(\"#\" + elementId)\n    this.view = view\n\n    // register this class as event listener for the canvas\n    // CommandStack. This is required to update the state of\n    // the Undo/Redo Buttons.\n    //\n    view.getCommandStack().addEventListener(this)\n\n    // Register a Selection listener for the state hnadling\n    // of the Delete Button\n    //\n    view.on(\"select\", this.onSelectionChanged.bind(this))\n  }\n\n  /**\n   * @method\n   * Called if the selection in the cnavas has been changed. You must register this\n   * class on the canvas to receive this event.\n   *\n   * @param {draw2d.Figure} emitter\n   */\n  onSelectionChanged(emitter, event) {\n    this._updateSelection()\n  }\n\n  /**\n   * @method\n   * Sent when an event occurs on the command stack. draw2d.command.CommandStackEvent.getDetail()\n   * can be used to identify the type of event which has occurred.\n   *\n   * @template\n   *\n   * @param {draw2d.command.CommandStackEvent} event\n   **/\n  stackChanged(event) {\n    this.html.html('')\n    let figures = this.view.getExtFigures()\n    figures.each((i, figure) => {\n      this.html.append(\n        '<div class=\"layerElement '+this.figureToCSS(figure)+'\" data-figure=\"' + figure.id + '\"  data-visibility=\"' + figure.isVisible() + '\" id=\"layerElement_' + figure.id + '\" >' +\n        figure.getUserData().name +\n        '<span data-figure=\"' + figure.id + '\"  data-toggle=\"tooltip\" title=\"Toggle Visibility of the Layer\"  class=\"layer_visibility pull-right\"><img class=\"icon svg\" src=\"' + (figure.isVisible() ? './images/layer_visible.svg' : './images/layer_hidden.svg') + '\"/></span>' +\n        '<span data-figure=\"' + figure.id + '\"  data-toggle=\"tooltip\" title=\"Edit Name of Layer\" class=\"layer_edit pull-right\" ><img class=\"icon svg\" src=\"./images/layer_edit.svg\"/></span>' +\n        '</div>')\n    }, true)\n\n    inlineSVG.init()\n\n    $('*[data-toggle=\"tooltip\"]').tooltip({\n      placement: \"bottom\",\n      container: \"body\",\n      delay: {show: 1000, hide: 100},\n      html: true\n    })\n\n    this.html.sortable({\n      axis: \"y\",\n      update: () => {\n        $(\".layerElement\").toArray().reverse().forEach((e) => {\n          this.view.getExtFigure($(e).data(\"figure\")).toFront()\n        })\n      }\n    })\n\n    $(\".layerElement .layer_edit\").on(\"click\", $.proxy(function (event) {\n      let figure = this.view.getExtFigure($(event.currentTarget).data(\"figure\"))\n      Mousetrap.pause()\n      bootbox.prompt({\n        title: \"Layer Name\",\n        className: \"layer-name-prompt\",\n        value: figure.getUserData().name,\n        callback: $.proxy(function (result) {\n          Mousetrap.unpause()\n          if (result !== null) {\n            figure.getUserData().name = result\n            this.stackChanged(null)\n          }\n        }, this)\n      })\n\n      // autoselect text for fast edit\n      setTimeout(function () {\n        $(\".bootbox-input\").focus().select()\n      }, 200)\n    }, this))\n\n\n    $(\".layerElement .layer_visibility\").on(\"click\", $.proxy(function (event) {\n      let figure = this.view.getExtFigure($(event.currentTarget).data(\"figure\"))\n      figure.setVisible(!figure.isVisible())\n      this.view.setCurrentSelection(null)\n      $(event.currentTarget).html('<img class=\"icon svg\" src=\"' + (figure.isVisible() ? './images/layer_visible.svg' : './images/layer_hidden.svg') + '\"/>')\n      inlineSVG.init()\n\n      // set the \"data\" with attr and not with \"data()\". Otherwise the css selector won't work\n      //\n      $(event.currentTarget).parent().attr({\"data-visibility\": figure.isVisible()})\n\n      this.ripple(figure)\n      return false\n    }, this))\n\n    $(\".layerElement\").on(\"click\", $.proxy(function (event) {\n      let figure = this.view.getExtFigure($(event.currentTarget).data(\"figure\"))\n      if (figure.isVisible()) {\n        this.view.setCurrentSelection(figure)\n        this.ripple(figure)\n      }\n    }, this))\n\n    this._updateSelection()\n  }\n\n  _updateSelection() {\n    $(\".layerElement\").removeClass(\"layerSelectedElement\")\n    let selection = this.view.getSelection()\n    selection.each(function (i, e) {\n      $(\"#layerElement_\" + e.id).addClass(\"layerSelectedElement\")\n    })\n  }\n\n  ripple(figure) {\n    let rect = figure.getBoundingBox()\n    let p = rect.getCenter()\n    let circle = this.view.paper.circle(p.x, p.y, Math.max(3, rect.w / 4), Math.max(3, rect.h / 4)).attr({\n      fill: null,\n      stroke: \"#d0d0ff\"\n    })\n    let anim = Raphael.animation(\n      {\n        transform: \"s6\",\n        opacity: 0.0,\n        \"stroke-width\": 5\n      },\n      500,\n      \"linear\",\n      function () {\n        circle.remove()\n      }\n    )\n    circle.animate(anim)\n  }\n\n  figureToCSS(figure){\n    return figure.NAME.split(\".\").slice(-1)[0]\n  }\n}\n","import RectangleToolPolicy from \"./policy/RectangleToolPolicy\"\nimport CircleToolPolicy from \"./policy/CircleToolPolicy\"\nimport LineToolPolicy from \"./policy/LineToolPolicy\"\nimport TextToolPolicy from \"./policy/TextToolPolicy\"\nimport PortToolPolicy from \"./policy/PortToolPolicy\"\nimport SelectionToolPolicy from \"./policy/SelectionToolPolicy\"\nimport GeoUnionToolPolicy from \"./policy/GeoUnionToolPolicy\"\nimport GeoIntersectionToolPolicy from \"./policy/GeoIntersectionToolPolicy\"\nimport GeoDifferenceToolPolicy from \"./policy/GeoDifferenceToolPolicy\"\n\nimport FigureCodeEdit from \"./dialog/FigureCodeEdit\"\nimport FigureMarkdownEdit from \"./dialog/FigureMarkdownEdit\"\nimport FigureTest from \"./dialog/FigureTest\"\nimport conf from \"./Configuration\"\n\n\nexport default class Toolbar {\n\n  constructor(app, elementId, view) {\n    this.html = $(elementId)\n    this.view = view\n    this.app = app\n\n    // register this class as event listener for the canvas\n    // CommandStack. This is required to update the state of\n    // the Undo/Redo Buttons.\n    //\n    view.getCommandStack().addEventListener(this)\n\n    // Register a Selection listener for the state handling\n    // of the Delete Button\n    //\n    view.on(\"select\", this.onSelectionChanged.bind(this))\n    view.on(\"unselect\", this.onSelectionChanged.bind(this))\n\n    this.fileName = null\n    let buttonGroup = null\n\n    if (conf.serverless === false) {\n      buttonGroup = $(\"<div id='fileOperationGroup' class='group'></div>\")\n      this.html.append(buttonGroup)\n\n      this.openButton = $('<div class=\"image-button\" id=\"fileOpen\" data-toggle=\"tooltip\" title=\"Load File <span class=\\'highlight\\'> [ Ctrl+O ]</span>\" ><img src=\"./images/toolbar_download.svg\"/><div>Open</div></div>')\n      buttonGroup.append(this.openButton)\n      this.openButton.on(\"click\", () => {\n        this.openButton.tooltip(\"hide\")\n        app.fileOpen()\n      })\n      Mousetrap.bindGlobal(\"ctrl+o\", () => {\n        this.openButton.click()\n        return false\n      })\n\n      this.saveButton = $('<div class=\"image-button\"  id=\"fileSave\" data-toggle=\"tooltip\" title=\"Save File <span class=\\'highlight\\'> [ Ctrl+S ]</span>\"  ><img src=\"./images/toolbar_upload.svg\"/><div>Save</div></div>')\n      buttonGroup.append(this.saveButton)\n      this.saveButton.on(\"click\", () => {\n        this.saveButton.tooltip(\"hide\")\n        app.fileSave()\n      })\n      Mousetrap.bindGlobal(\"ctrl+s\", (event) => {\n        this.saveButton.click()\n        return false\n      })\n    }\n\n\n    // Inject the UNDO Button and the callbacks\n    //\n    buttonGroup = $('<div class=\"group\"></div>')\n    this.html.append(buttonGroup)\n    this.undoButton = $('<div class=\"image-button\" id=\"editUndo\" data-toggle=\"tooltip\" title=\"Undo <span class=\\'highlight\\'> [ Ctrl+Z ]</span>\"  ><img class=\"icon disabled\"  src=\"./images/toolbar_undo.svg\"/><div>Undo</div></div>')\n    buttonGroup.append(this.undoButton)\n    this.html .delegate(\"#editUndo:not(.disabled)\", \"click\", () => {\n      this.view.getCommandStack().undo()\n    })\n    Mousetrap.bindGlobal(\"ctrl+z\", () => {\n      this.undoButton.click()\n      return false\n    })\n\n\n    // Inject the REDO Button and the callback\n    //\n    this.redoButton = $('<div class=\"image-button\" id=\"editRedo\" data-toggle=\"tooltip\" title=\"Redo <span class=\\'highlight\\'> [ Ctrl+Y ]</span>\"  ><img  class=\"icon disabled\" src=\"./images/toolbar_redo.svg\"/><div>Redo</div></div>')\n    buttonGroup.append(this.redoButton)\n    this.html .delegate(\"#editRedo:not(.disabled)\", \"click\", () => {\n      this.view.getCommandStack().redo()\n    })\n    Mousetrap.bindGlobal(\"ctrl+y\", () => {\n      this.redoButton.click()\n      return false\n    })\n\n    // Inject the DELETE Button\n    //\n    this.deleteButton = $('<div class=\"image-button\" id=\"editDelete\" data-toggle=\"tooltip\" title=\"Delete <span class=\\'highlight\\'> [ Del ]</span>\"  ><img class=\"icon disabled\" src=\"./images/toolbar_delete.svg\"/><div>Delete</div></div>')\n    buttonGroup.append(this.deleteButton)\n    this.html .delegate(\"#editDelete:not(.disabled)\", \"click\", function () {\n      view.getCommandStack().startTransaction(draw2d.Configuration.i18n.command.deleteShape)\n      view.getSelection().each(function (index, figure) {\n        let cmd = figure.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.DELETE))\n        if (cmd !== null) {\n          view.getCommandStack().execute(cmd)\n        }\n      })\n      // execute all single commands at once.\n      view.getCommandStack().commitTransaction()\n    })\n    Mousetrap.bindGlobal([\"del\", \"backspace\"], () => {\n      this.deleteButton.click()\n      return false\n    })\n\n\n    buttonGroup = $('<div class=\"group\"></div>')\n    this.html.append(buttonGroup)\n\n    this.selectButton = $('<div class=\"image-button\" id=\"editSelect\" data-toggle=\"tooltip\" title=\"Select mode <span class=\\'highlight\\'> [ spacebar ]</span>\" ><img src=\"./images/toolbar_select.svg\"/><div>Select</div></div>')\n    buttonGroup.append(this.selectButton)\n    this.selectButton.on(\"click\", () => {\n      this.view.installEditPolicy(new SelectionToolPolicy())\n    })\n    Mousetrap.bindGlobal(\"space\", () => {\n      this.selectButton.click()\n      return false\n    })\n\n    this.shapeButton = $(\n      '<label id=\"tool_shape\" class=\"dropdown\" >' +\n      '    <div class=\"image-button\" data-toggle=\"dropdown\"  id=\"tool_shape_image\" ><img  src=\"./images/toolbar_insert.svg\"><div>Add</div></div>' +\n      '    <ul class=\"dropdown-menu\" role=\"menu\" >' +\n      '       <li class=\"tool_shape_entry policyRectangleToolPolicy\" ><a href=\"#\"><img  src=\"./images/toolbar_rectangle.svg\"><span class=\"tool_label\">Rectangle</span><span class=\"tool_shortcut\">R</span></a></li>' +\n      '       <li class=\"tool_shape_entry policyCircleToolPolicy\"    ><a href=\"#\"><img  src=\"./images/toolbar_circle.svg\"><span class=\"tool_label\">Circle</span><span class=\"tool_shortcut\">C</span></a></li>' +\n      '       <li class=\"tool_shape_entry policyLineToolPolicy\"      ><a href=\"#\"><img  src=\"./images/toolbar_line.svg\"><span class=\"tool_label\">Line</span><span class=\"tool_shortcut\">L</span></a></li>' +\n      '       <li class=\"tool_shape_entry policyTextToolPolicy\"      ><a href=\"#\"><img  src=\"./images/toolbar_text.svg\"><span class=\"tool_label\">Text</span><span class=\"tool_shortcut\">T</span></a></li>' +\n      '       <li class=\"tool_shape_entry policyPortToolPolicy\"      ><a href=\"#\"><img  src=\"./images/toolbar_rectangle.svg\"><span class=\"tool_label\">Port</span><span class=\"tool_shortcut\">P</span></a></li>' +\n      '    </ul>' +\n      '</label>'\n    )\n    buttonGroup.append(this.shapeButton)\n\n    $(\".policyRectangleToolPolicy\").on(\"click\", () => {\n      let p = new RectangleToolPolicy()\n      p.executed = () => {\n        this.selectButton.click()\n      }\n      this.view.installEditPolicy(p)\n    })\n    $(\".policyCircleToolPolicy\").on(\"click\", () => {\n      let p = new CircleToolPolicy()\n      p.executed = () => {\n        this.selectButton.click()\n      }\n      this.view.installEditPolicy(p)\n    })\n    $(\".policyLineToolPolicy\").on(\"click\", () => {\n      let p = new LineToolPolicy()\n      p.executed = () => {\n        this.selectButton.click()\n      }\n      this.view.installEditPolicy(p)\n    })\n    $(\".policyTextToolPolicy\").on(\"click\", () => {\n      let p = new TextToolPolicy()\n      p.executed = () => {\n        this.selectButton.click()\n      }\n      this.view.installEditPolicy(p)\n    })\n    $(\".policyPortToolPolicy\").on(\"click\", () => {\n      let p = new PortToolPolicy()\n      p.executed = () => {\n        this.selectButton.click()\n      }\n      this.view.installEditPolicy(p)\n    })\n\n    Mousetrap.bindGlobal([\"R\", \"r\"], () => {\n      $('.policyRectangleToolPolicy').click()\n      return false\n    })\n    Mousetrap.bindGlobal([\"C\", \"c\"], () => {\n      $('.policyCircleToolPolicy').click()\n      return false\n    })\n    Mousetrap.bindGlobal([\"T\", \"t\"], () => {\n      $('.policyTextToolPolicy').click()\n      return false\n    })\n    Mousetrap.bindGlobal([\"P\", \"p\"], () => {\n      $('.policyPortToolPolicy').click()\n      return false\n    })\n    Mousetrap.bindGlobal([\"L\", \"l\"], () => {\n      $('.policyLineToolPolicy').click()\n      return false\n    })\n\n    this.unionButton = $('<div class=\"image-button disabled\" id=\"toolUnion\" data-toggle=\"tooltip\" title=\"Polygon Union <span class=\\'highlight\\'> [ U ]</span>\" ><img src=\"./images/toolbar_geo_union.svg\"/><div>Union</div></div>')\n    buttonGroup.append(this.unionButton)\n    this.html.delegate(\"#toolUnion:not(.disabled)\", \"click\", () => {\n      let selection = this.view.getSelection().getAll()\n      let p = new GeoUnionToolPolicy()\n      p.executed = () => {\n        this.selectButton.click()\n      }\n      this.view.installEditPolicy(p)\n      p.execute(this.view, selection)\n    })\n    Mousetrap.bindGlobal([\"U\", \"u\"], () => {\n      this.unionButton.click()\n      return false\n    })\n\n    this.differenceButton = $('<div class=\"image-button disabled\" id=\"toolDifference\" data-toggle=\"tooltip\"  title=\"Polygon Difference <span class=\\'highlight\\'> [ D ]</span>\" ><img src=\"./images/toolbar_geo_subtract.svg\"/><div>Subtract</div></div>')\n    buttonGroup.append(this.differenceButton)\n    this.html.delegate(\"#toolDifference:not(.disabled)\", \"click\", () => {\n      this.view.installEditPolicy(new GeoDifferenceToolPolicy())\n    })\n    Mousetrap.bindGlobal([\"D\", \"d\"], () => {\n      this.differenceButton.click()\n      return false\n    })\n\n    this.intersectionButton = $('<div class=\"image-button disabled\" id=\"toolIntersection\" data-toggle=\"tooltip\" title=\"Polygon Intersection <span class=\\'highlight\\'> [ I ]</span>\" ><img src=\"./images/toolbar_geo_intersect.svg\"/><div>Intersect</div></div>')\n    buttonGroup.append(this.intersectionButton)\n    this.html.delegate(\"#toolIntersection:not(.disabled)\", \"click\", () => {\n      this.view.installEditPolicy(new GeoIntersectionToolPolicy())\n    })\n    Mousetrap.bindGlobal([\"I\", \"i\"], () => {\n      this.intersectionButton.click()\n      return false\n    })\n\n\n    buttonGroup = $('<div class=\"group\" style=\"float:right\"></div>')\n    this.html.append(buttonGroup)\n    this.testButton = $('<div class=\"image-button\" data-toggle=\"tooltip\" title=\"Test your shape\"><img src=\"./images/toolbar_element_test.svg\"/><div>Test</div></div>')\n    buttonGroup.append(this.testButton)\n    this.testButton.on(\"click\", () => {\n      // if any error happens during the shape code create/execute -> goto the the JS editor\n      try {\n        new FigureTest().show()\n      }\n      catch (exc) {\n        console.log(exc)\n        new FigureCodeEdit().show()\n      }\n    })\n\n    this.codeButton = $('<div class=\"image-button\" data-toggle=\"tooltip\" title=\"Edit JavaScript code</span>\"><img src=\"./images/toolbar_element_js.svg\"/><div>Code</div></div>')\n    buttonGroup.append(this.codeButton)\n    this.codeButton.on(\"click\", () => {\n      new FigureCodeEdit().show()\n    })\n\n    this.markdownButton = $('<div class=\"image-button\" data-toggle=\"tooltip\" title=\"Write documentation for your shape</span>\"><img src=\"./images/toolbar_element_doc.svg\"/><div>Doku</div></div>')\n    buttonGroup.append(this.markdownButton)\n    this.markdownButton.on(\"click\", () => {\n      new FigureMarkdownEdit().show()\n    })\n\n    // enable the tooltip for all buttons\n    //\n    $('*[data-toggle=\"tooltip\"]').tooltip({\n      placement: \"bottom\",\n      container: \"body\",\n      delay: {show: 1000, hide: 10},\n      html: true\n    })\n  }\n\n\n  /**\n   * @method\n   * Called if the selection in the cnavas has been changed. You must register this\n   * class on the canvas to receive this event.\n   *\n   * @param {draw2d.Figure} figure\n   */\n  onSelectionChanged(emitter, event) {\n    if (event.figure === null) {\n      $(\"#editDelete\").addClass(\"disabled\")\n    }\n    else {\n      $(\"#editDelete\").removeClass(\"disabled\")\n    }\n\n    // available in BoundBox selection event\n    if (event.selection) {\n      if (event.selection.getSize() >= 2) {\n        $(\"#toolUnion\").removeClass(\"disabled\")\n        $(\"#toolDifference\").removeClass(\"disabled\")\n        $(\"#toolIntersection\").removeClass(\"disabled\")\n      }\n      else {\n        $(\"#toolUnion\").addClass(\"disabled\")\n        $(\"#toolDifference\").addClass(\"disabled\")\n        $(\"#toolIntersection\").addClass(\"disabled\")\n      }\n    }\n  }\n\n  /**\n   * @method\n   * Sent when an event occurs on the command stack. draw2d.command.CommandStackEvent.getDetail()\n   * can be used to identify the type of event which has occurred.\n   *\n   * @template\n   *\n   * @param {draw2d.command.CommandStackEvent} event\n   **/\n  stackChanged(event) {\n    $(\"#editUndo\").addClass(\"disabled\")\n    $(\"#editRedo\").addClass(\"disabled\")\n\n    if (event.getStack().canUndo()) {\n      $(\"#editUndo\").removeClass(\"disabled\")\n    }\n\n    if (event.getStack().canRedo()) {\n      $(\"#editRedo\").removeClass(\"disabled\")\n    }\n  }\n}\n","\nexport default draw2d.Canvas.extend({\n\n  init: function (app, id) {\n    this._super(id, 16000, 16000)\n    this.clippboardFigure = null\n    this.app = app\n    this.grid = new draw2d.policy.canvas.ShowGridEditPolicy(20)\n\n    this.setScrollArea(\"#draw2dCanvasWrapper\")\n\n    this.installEditPolicy(this.grid)\n    this.installEditPolicy(new draw2d.policy.canvas.FadeoutDecorationPolicy())\n    this.installEditPolicy(new draw2d.policy.canvas.SnapToGeometryEditPolicy())\n    this.installEditPolicy(new draw2d.policy.canvas.SnapToCenterEditPolicy())\n    this.installEditPolicy(new draw2d.policy.canvas.SnapToInBetweenEditPolicy())\n\n    Mousetrap.bindGlobal(['left'], () => {\n      let diff = this.getZoom() < 0.5 ? 0.5 : 1\n      this.getSelection().each((i, f) => {\n        f.translate(-diff, 0)\n      })\n      return false\n    })\n    Mousetrap.bindGlobal(['up'], () => {\n      let diff = this.getZoom() < 0.5 ? 0.5 : 1\n      this.getSelection().each((i, f) => {\n        f.translate(0, -diff)\n      })\n      return false\n    })\n    Mousetrap.bindGlobal(['right'], () => {\n      let diff = this.getZoom() < 0.5 ? 0.5 : 1\n      this.getSelection().each((i, f) => {\n        f.translate(diff, 0)\n      })\n      return false\n    })\n    Mousetrap.bindGlobal(['down'], () => {\n      let diff = this.getZoom() < 0.5 ? 0.5 : 1\n      this.getSelection().each((i, f) => {\n        f.translate(0, diff)\n      })\n      return false\n    })\n\n    Mousetrap.bindGlobal(['ctrl+c', 'command+c'], () => {\n      let primarySelection = this.getSelection().getPrimary()\n      if (primarySelection !== null) {\n        this.clippboardFigure = primarySelection.clone()\n        this.clippboardFigure.translate(5, 5)\n      }\n      return false\n    })\n\n    Mousetrap.bindGlobal(['ctrl+v', 'command+v'], () => {\n      if (this.clippboardFigure !== null) {\n        let cloneToAdd = this.clippboardFigure.clone()\n        let command = new draw2d.command.CommandAdd(this, cloneToAdd, cloneToAdd.getPosition())\n        this.getCommandStack().execute(command)\n        this.setCurrentSelection(cloneToAdd)\n      }\n      return false\n    })\n\n    // this.installEditPolicy(new draw2d.policy.canvas.WheelZoomPolicy())\n\n    let setZoom = (newZoom) => {\n      console.log(\"zooom...\")\n      let bb = this.getBoundingBox().getCenter()\n      let c = $(\"#draw2dCanvasWrapper\")\n      this.setZoom(newZoom)\n      this.scrollTo((bb.y / newZoom - c.height() / 2), (bb.x / newZoom - c.width() / 2))\n\n      // c.scrollTop((bb.y / newZoom - c.height() / 2))\n      // c.scrollLeft((bb.x / newZoom - c.width() / 2))\n    }\n\n    // Inject the ZoomIn Button and the callbacks\n    //\n    $(\"#canvas_zoom_in\").on(\"click\", () => {\n      setZoom(this.getZoom() * 1.2)\n    })\n\n    // Inject the OneToOne Button\n    //\n    $(\"#canvas_zoom_normal\").on(\"click\", () => {\n      setZoom(1.0)\n    })\n\n    // Inject the ZoomOut Button and the callback\n    //\n    $(\"#canvas_zoom_out\").on(\"click\", () => {\n      setZoom(this.getZoom() * 0.8)\n    })\n\n    $('#canvas_config_grid').on('change', () => {\n      if ($('#canvas_config_grid').prop('checked')) {\n        this.installEditPolicy(this.grid)\n      }\n      else {\n        this.uninstallEditPolicy(this.grid)\n      }\n    })\n\n    $(\"#canvas_config_items\").on(\"click\", (e) => {\n      e.stopPropagation()\n    })\n\n    this.reset()\n  },\n\n  setCursor: function (cursor) {\n    if (cursor !== null) {\n      this.html.css(\"cursor\", \"url(\" + cursor + \") 0 0, default\")\n    }\n    else {\n      this.html.css(\"cursor\", \"default\")\n    }\n  },\n\n\n  /**\n   * @method\n   * Reset the view/canvas and starts with a clean and new document with default decorations\n   *\n   *\n   */\n  reset: function () {\n    this.clear()\n  },\n\n  setZoom: function (newZoom) {\n    $(\"#canvas_zoom_normal\").text((parseInt((1.0 / newZoom) * 100)) + \"%\")\n    this._super(newZoom)\n  },\n\n\n  getExtFigure: function (id) {\n    let figure = null\n    this.getExtFigures().each((i, e) => {\n      if (e.id === id) {\n        figure = e\n        return false\n      }\n    })\n    return figure\n  },\n\n  getExtFigures: function () {\n    let figures = this.getFigures().clone()\n\n    // the export rectangles are not part of the document itself. In this case we\n    // filter them out\n    //\n    figures.grep((figure) => {\n      return (typeof figure.isExtFigure !== \"undefined\")\n    })\n\n    let lines = this.getLines().clone()\n    lines.grep((line) => {\n      return (typeof line.isExtFigure !== \"undefined\")\n    })\n\n    figures.addAll(lines)\n\n    return figures\n  },\n\n\n  getBoundingBox: function () {\n    let xCoords = []\n    let yCoords = []\n    this.getExtFigures().each((i, f) => {\n      if (f instanceof shape_designer.figure.ExtPort) {\n        return\n      }\n      let b = f.getBoundingBox()\n      xCoords.push(b.x, b.x + b.w)\n      yCoords.push(b.y, b.y + b.h)\n    })\n    let minX = Math.min(...xCoords)\n    let minY = Math.min(...yCoords)\n    let width = Math.max(10, Math.max(...xCoords) - minX)\n    let height = Math.max(10, Math.max(...yCoords) - minY)\n\n    return new draw2d.geo.Rectangle(minX, minY, width, height)\n  },\n\n  hideDecoration: function () {\n    this.uninstallEditPolicy(this.grid)\n    this.getFigures().each((index, figure) => {\n      figure.unselect()\n    })\n  },\n\n  showDecoration: function () {\n    this.installEditPolicy(this.grid)\n  },\n\n  /**\n   * @method\n   * Return the width of the canvas\n   *\n   * @return {Number}\n   **/\n  getWidth: function () {\n    return this.html.find(\"svg\").width()\n  },\n\n\n  /**\n   * @method\n   * Return the height of the canvas.\n   *\n   * @return {Number}\n   **/\n  getHeight: function () {\n    return this.html.find(\"svg\").height()\n  },\n\n  centerView: function(){\n    let bb = this.getBoundingBox().getCenter()\n    let c = $(\"#draw2dCanvasWrapper\")\n    c.scrollTop((bb.y / this.getZoom() - c.height() / 2))\n    c.scrollLeft((bb.x /this.getZoom() - c.width() / 2))\n  },\n\n  centerDocument: function () {\n    this.setZoom(1.0)\n    // get the bounding box of the document and translate the complete document\n    // into the center of the canvas. Scroll to the top left corner after them\n    //\n    let bb = this.getBoundingBox()\n\n    let dx = (this.getWidth() / 2) - (bb.x + bb.w / 2)\n    let dy = (this.getHeight() / 2) - (bb.y + bb.h / 2)\n\n    this.getFigures().each((i, f) => {\n      f.translate(dx, dy)\n    })\n    this.getLines().each((i, f) => {\n      f.translate(dx, dy)\n    })\n    this.centerView()\n  },\n\n\n  /**\n   * @method\n   * Transforms a document coordinate to canvas coordinate.\n   *\n   * @param {Number} x the x coordinate relative to the window\n   * @param {Number} y the y coordinate relative to the window\n   *\n   * @returns {draw2d.geo.Point} The coordinate in relation to the canvas [0,0] position\n   */\n  fromDocumentToCanvasCoordinate: function (x, y) {\n    return new draw2d.geo.Point(\n      (x - this.getAbsoluteX()) * this.zoomFactor,\n      (y - this.getAbsoluteY()) * this.zoomFactor)\n  },\n\n  /**\n   * @method\n   * Transforms a canvas coordinate to document coordinate.\n   *\n   * @param {Number} x the x coordinate in the canvas\n   * @param {Number} y the y coordinate in the canvas\n   *\n   * @returns {draw2d.geo.Point} the coordinate in relation to the document [0,0] position\n   */\n  fromCanvasToDocumentCoordinate: function (x, y) {\n    return new draw2d.geo.Point(\n      ((x * (1 / this.zoomFactor)) + this.getAbsoluteX()),\n      ((y * (1 / this.zoomFactor)) + this.getAbsoluteY()))\n  }\n})\n\n","import FigureTest from \"./FigureTest\"\n\nexport default class FigureCodeEdit {\n  constructor() {\n  }\n\n  show() {\n    Mousetrap.pause()\n    let code = shape_designer.app.getConfiguration(\"code\")\n    let splash = $(\n      '<pre id=\"code_overlay\">' +\n      code +\n      '</pre>' +\n      '<img title=\"Run\"   id=\"test_run\"   class=\"icon\" src=\"./images/dialog_run.svg\"/>' +\n      '<img title=\"Close\" id=\"code_close\" class=\"icon\" src=\"./images/dialog_close.svg\"/>'\n    )\n    splash.hide()\n    $(\"body\").append(splash)\n    splash.fadeIn()\n\n    let before = function (obj, method, wrapper) {\n      let orig = obj[method]\n      obj[method] = function () {\n        let args = Array.prototype.slice.call(arguments)\n        return wrapper.call(this, function () {\n          return orig.apply(obj, args)\n        }, args)\n      }\n\n      return obj[method]\n    }\n\n    let intersects = function (range) {\n      return editor.getSelectionRange().intersects(range)\n    }\n\n    let preventReadonly = function (next, args) {\n      if (intersects(range)) return\n      next()\n    }\n\n    let lines = code.split(\"\\n\")\n    let last = lines.length - 1\n    let first = lines.findIndex(function (element, index, array) {\n      return element.startsWith(\"testShape\")\n    })\n\n    let editor = ace.edit(\"code_overlay\"),\n      session = editor.getSession(),\n      Range = ace.require(\"ace/range\").Range,\n      range = new Range(0, 0, first, lines[first].length),\n      range2 = new Range(last, 0, last, lines[last].length)\n\n    session.addMarker(range, \"readonly-highlight\")\n    session.addMarker(range2, \"readonly-highlight\")\n    session.setMode(\"ace/mode/javascript\")\n    session.setUseWrapMode(true)\n    editor.moveCursorTo(first + 1, 0)\n    editor.focus()\n\n    editor.keyBinding.addKeyboardHandler({\n      handleKeyboard: function (data, hash, keyString, keyCode, event) {\n        if (hash === -1 || (keyCode <= 40 && keyCode >= 37)) return false\n\n        if (intersects(range) || intersects(range2)) {\n          return {command: \"null\", passEvent: false}\n        }\n      }\n    })\n\n    before(editor, 'onPaste', preventReadonly)\n    before(editor, 'onCut', preventReadonly)\n\n    range.start = session.doc.createAnchor(range.start)\n    range.end = session.doc.createAnchor(range.end)\n    range.end.$insertRight = true\n\n    range2.start = session.doc.createAnchor(range2.start)\n    range2.end = session.doc.createAnchor(range2.end)\n    range2.end.$insertRight = true\n\n    $(\"#code_close\").on(\"click\", function () {\n      let code = editor.getValue()\n      shape_designer.app.setConfiguration({code: code})\n      Mousetrap.unpause()\n      splash.fadeOut(function () {\n        splash.remove()\n      })\n    })\n\n    $(\"#test_run\").on(\"click\", function () {\n      let code = editor.getValue()\n      shape_designer.app.setConfiguration({code: code})\n      new FigureTest().show()\n    })\n  }\n}\n","import Remarkable from \"remarkable\"\n\nexport default class FigureMarkdownEdit {\n\n  constructor() {\n    this.mdHtml = null\n    this.scrollMap = null\n\n    this.lineHeight = 1.45\n    this.defaults = {\n      html: true,               // Enable HTML tags in source\n      xhtmlOut: false,          // Use '/' to close single tags (<br />)\n      breaks: false,            // Convert '\\n' in paragraphs into <br>\n      langPrefix: 'language-',  // CSS language prefix for fenced blocks\n      linkify: true,            // autoconvert URL-like texts to links\n      linkTarget: '_blank',     // set target to open link in\n      typographer: true         // Enable smartypants and other sweet transforms\n    }\n  }\n\n  /**\n   */\n  show() {\n    Mousetrap.pause()\n    var _this = this\n    this.mdHtml = new Remarkable('full', this.defaults)\n\n    var markdown = shape_designer.app.getConfiguration(\"markdown\")\n    markdown = markdown ? markdown : \"# Header \\n## Subheader \\nbe nice and write a help file for your new \\ncreated ***DigitalTrainingStudion*** shape. \\n\\n  - point 1\\n  - point 2\\n  - point 3\"\n    var splash = $(\n      '<div id=\"FigureMarkdownEdit\" class=\"overlay-scale\">' +\n      '<pre class=\"source full-height\">' +\n      markdown +\n      '</pre>' +\n      '<div class=\"preview full-height\" >' +\n      '' +\n      '</div>' +\n      ' <div class=\"header\">' +\n      '<span class=\"left\">Documentation Editor (<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Markdown\">markdown syntax </a>)</span>' +\n      '<span class=\"right\">HTML Preview</span></div>' +\n      ' <img title=\"Close\" id=\"test_close\" class=\"icon\" src=\"./images/dialog_close.svg\"/>' +\n      '<div>')\n\n    // fadeTo MUSS leider sein. Man kann mit raphael keine paper.text elemente einfgen\n    // wenn das canvas nicht sichtbar ist. In diesen Fall mach ich das Canvas \"leicht\" sichtbar und raphael ist\n    // zufrieden.\n    $(\"body\").append(splash)\n\n    var removeDialog = function () {\n      Mousetrap.unpause()\n      shape_designer.app.setConfiguration({markdown: _this.editor.getValue()})\n      splash.removeClass(\"open\")\n      setTimeout(function () {\n        splash.remove()\n      }, 400)\n    }\n\n    $(\"#test_close\").on(\"click\", removeDialog)\n    setTimeout(function () {\n      splash.addClass(\"open\")\n    }, 100)\n\n\n    // Inject line numbers for sync scroll.\n    //\n    this.mdHtml.renderer.rules.paragraph_open = function (tokens, idx) {\n      var line\n      if (tokens[idx].lines && tokens[idx].level === 0) {\n        line = tokens[idx].lines[0]\n        return '<p class=\"line\" data-line=\"' + line + '\">'\n      }\n      return '<p>'\n    }\n\n    this.mdHtml.renderer.rules.heading_open = function (tokens, idx) {\n      var line\n      if (tokens[idx].lines && tokens[idx].level === 0) {\n        line = tokens[idx].lines[0]\n        return '<h' + tokens[idx].hLevel + ' class=\"line\" data-line=\"' + line + '\">'\n      }\n      return '<h' + tokens[idx].hLevel + '>'\n    }\n\n    this.$preview = $(\"#FigureMarkdownEdit .preview\")\n    this.$source = $('#FigureMarkdownEdit .source')\n\n    var editor = ace.edit(this.$source[0]),\n      session = editor.getSession()\n    this.editor = editor\n    editor.moveCursorTo(5, 0)\n    editor.focus()\n\n    session.setMode(\"ace/mode/markdown\")\n\n    session.on('changeScrollTop', _this._debounce($.proxy(_this.syncScroll, _this), 50, false))\n\n    editor.keyBinding.addKeyboardHandler({handleKeyboard: _this._debounce($.proxy(_this.updateResult, _this), 300, false)})\n\n    this.updateResult()\n  }\n\n  updateResult() {\n    var source = this.editor.getValue()\n    this.$preview.html(this.mdHtml.render(source))\n    // reset lines mapping cache on content update\n    this.scrollMap = null\n  }\n\n\n  // Build offsets for each line (lines can be wrapped)\n  // That's a bit dirty to process each line everytime, but ok for demo.\n  // Optimizations are required only for big texts.\n  buildScrollMap() {\n    var _this = this\n\n    var i, offset, nonEmptyList, pos, a, b, lineHeightMap, linesCount,\n      acc, sourceLikeDiv,\n      _scrollMap\n\n    sourceLikeDiv = $('<div />').css({\n      position: 'absolute',\n      visibility: 'hidden',\n      height: 'auto',\n      width: $(\"#FigureMarkdownEdit .left\")[0].clientWidth,\n      'font-size': '10pt',\n      'font-family': 'tahoma',\n      'line-height': this.lineHeight,\n      'white-space': 'nowrap'\n    }).appendTo('body')\n\n    offset = this.$preview.scrollTop() - this.$preview.offset().top - 40\n    _scrollMap = []\n    nonEmptyList = []\n    lineHeightMap = []\n\n    acc = 0\n    this.editor.getValue().split('\\n').forEach(function (str) {\n      var h, lh\n\n      lineHeightMap.push(acc)\n\n      if (str.length === 0) {\n        acc++\n        return\n      }\n\n      sourceLikeDiv.text(str)\n      h = parseFloat(sourceLikeDiv.css('height'))\n      lh = parseFloat(_this.lineHeight)\n      acc += Math.round(h / lh)\n    })\n    sourceLikeDiv.remove()\n    lineHeightMap.push(acc)\n    linesCount = acc\n\n    for (i = 0; i < linesCount; i++) {\n      _scrollMap.push(-1)\n    }\n\n    nonEmptyList.push(0)\n    _scrollMap[0] = 0\n\n    $('.line').each(function (n, el) {\n      var $el = $(el), t = $el.data('line')\n      if (t === '') {\n        return\n      }\n      t = lineHeightMap[t]\n      if (t !== 0) {\n        nonEmptyList.push(t)\n      }\n      _scrollMap[t] = Math.round($el.offset().top + offset)\n    })\n\n    nonEmptyList.push(linesCount)\n    _scrollMap[linesCount] = this.$preview[0].scrollHeight\n\n    pos = 0\n    for (i = 1; i < linesCount; i++) {\n      if (_scrollMap[i] !== -1) {\n        pos++\n        continue\n      }\n\n      a = nonEmptyList[pos]\n      b = nonEmptyList[pos + 1]\n      _scrollMap[i] = Math.round((_scrollMap[b] * (i - a) + _scrollMap[a] * (b - i)) / (b - a))\n    }\n\n    return _scrollMap\n  }\n\n\n  syncScroll(scroll) {\n    var lineNo, posTo\n    lineNo = Math.floor(scroll / this.lineHeight)\n    if (!this.scrollMap) {\n      this.scrollMap = this.buildScrollMap()\n    }\n    posTo = this.scrollMap[lineNo]\n    this.$preview.stop(true).animate({\n      scrollTop: posTo\n    }, 400, 'linear')\n  }\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _debounce(func, wait, immediate) {\n    var timeout\n    return function () {\n      var context = this, args = arguments\n      var later = function () {\n        timeout = null\n        if (!immediate) func.apply(context, args)\n      }\n      var callNow = immediate && !timeout\n      clearTimeout(timeout)\n      timeout = setTimeout(later, wait)\n      if (callNow) func.apply(context, args)\n    }\n  }\n}\n","import FigureWriter from \"./../io/FigureWriter\"\n\nexport default class FigureTest {\n\n  constructor() {\n  }\n\n  show() {\n    var _this = this\n    this.animationFrameFunc = this._calculate.bind(this)\n\n    var writer = new FigureWriter()\n    var testShape = null\n    writer.marshal(shape_designer.app.view, \"testShape\", function (js) {\n      try {\n        js = $(\"#decoratedport-template\").text().trim() + js\n        testShape = eval(js)\n      }\n      catch (exc) {\n        alert(\"Error in shape code. \\nRemove error and try it again:\\n\\n>>    \" + exc)\n        throw exc\n      }\n      var splash = $(\n        '<div class=\"overlay-scale\">' +\n        '<div id=\"test_canvas\">' +\n        '</div>' +\n        ' <div               id=\"test_info\" >Test page for your designed and coded draw2d shape.</div>' +\n        ' <img title=\"Close\" id=\"test_close\" class=\"icon\" src=\"./images/dialog_close.svg\"/>' +\n        '<div>')\n\n      // fadeTo MUSS leider sein. Man kann mit raphael keine paper.text elemente einfgen\n      // wenn das canvas nicht sichtbar ist. In diesen Fall mach ich das Canvas \"leicht\" sichtbar und raphael ist\n      // zufrieden.\n      $(\"body\").append(splash)\n\n      var canvas = new draw2d.Canvas(\"test_canvas\")\n      _this.canvas = canvas\n      canvas.installEditPolicy(new draw2d.policy.canvas.ShowDotEditPolicy(20, 1, \"#FF4981\"))\n      var router = new draw2d.layout.connection.InteractiveManhattanConnectionRouter()\n      canvas.installEditPolicy(new draw2d.policy.connection.ComposedConnectionCreatePolicy(\n        [\n          // create a connection via Drag&Drop of ports\n          //\n          new draw2d.policy.connection.DragConnectionCreatePolicy({\n            createConnection: function () {\n              return new draw2d.Connection({\n                radius: 3,\n                stroke: 2,\n                color: \"#129CE4\",\n                outlineStroke: 1,\n                outlineColor: \"#ffffff\",\n                router: router\n              })\n            }\n          }),\n          // or via click and point\n          //\n          new draw2d.policy.connection.OrthogonalConnectionCreatePolicy({\n            createConnection: function () {\n              return new draw2d.Connection({\n                radius: 3,\n                stroke: 2,\n                color: \"#129CE4\",\n                outlineStroke: 1,\n                outlineColor: \"#ffffff\",\n                router: router\n              })\n            }\n          })\n        ])\n      )\n      var test = new testShape()\n      canvas.add(test, 400, 160)\n\n      // create and add two nodes which contains Ports (In and OUT)\n      //\n      var start = new draw2d.shape.node.Start()\n      var toggle1 = new shape_designer.figure.TestSwitch()\n      var toggle2 = new shape_designer.figure.TestSwitch()\n      var end = new draw2d.shape.node.End()\n\n      // ...add it to the canvas\n      canvas.add(toggle1, 50, 150)\n      canvas.add(toggle2, 50, 200)\n      canvas.add(start, 50, 250)\n      canvas.add(end, 630, 250)\n\n      canvas.setCurrentSelection(test)\n      var removeDialog = function () {\n        _this.simulate = false\n        splash.removeClass(\"open\")\n        setTimeout(function () {\n          splash.remove()\n        }, 400)\n      }\n\n      $(\"#test_close\").on(\"click\", removeDialog)\n      splash.addClass(\"open\")\n\n      _this.simulate = true\n      requestAnimationFrame(_this.animationFrameFunc)\n    })\n\n  }\n\n  _calculate() {\n    // call the \"calculate\" method if given to calculate the output-port values\n    //\n    var figures = this.canvas.getFigures().clone().grep(function (f) {\n      return f.calculate\n    })\n    figures.each(function (i, figure) {\n      figure.calculate()\n    })\n\n    // transport the value from oututPort to inputPort\n    //\n    this.canvas.getLines().each(function (i, line) {\n      var outPort = line.getSource()\n      var inPort = line.getTarget()\n      inPort.setValue(outPort.getValue())\n      line.setColor(outPort.getValue() ? \"#ff5252\" : \"#0000ff\")\n    })\n\n    if (this.simulate === true) {\n      requestAnimationFrame(this.animationFrameFunc)\n    }\n  }\n}\n","import conf from \"../Configuration\"\nimport Hogan from \"hogan.js\"\n\nexport default class FileOpen {\n\n  /**\n   * @constructor\n   *\n   */\n  constructor() {\n  }\n\n  /**\n   * @method\n   *\n   * Open the file picker and load the selected file.<br>\n   *\n   * @param {Function} successCallback callback method if the user select a file and the content is loaded\n   * @param {Function} errorCallback method to call if any error happens\n   *\n   * @since 4.0.0\n   */\n  show(storage, view) {\n    $('#fileOpenDialog').modal('show')\n    this.currentDir = storage.currentDir\n    this.fetchPathContent(storage, this.currentDir, view)\n  }\n\n  fetchPathContent(storage, newPath, view) {\n\n    storage.getFiles(newPath).then((files) => {\n      files = files.filter( file => file.name.endsWith(conf.fileSuffix) || file.type === 'dir')\n      let compiled = Hogan.compile(\n        `\n           {{^rootDir}}     \n           <a href=\"#\" class=\"list-group-item githubPath\" data-type=\"dir\" data-path=\"{{parentPath}}\" >\n               <span class=\"glyphicon glyphicon-menu-left\"></span>\n               ..\n           </a>\n           {{/rootDir}}\n           {{#files}}\n             <a href=\"#\" data-draw2d=\"{{draw2d}}\" class=\"list-group-item githubPath text-nowrap\" data-type=\"{{type}}\" data-path=\"{{currentDir}}{{name}}\" data-id=\"{{id}}\">\n                <span class=\"glyphicon {{icon}}\"></span>\n                {{{name}}}\n             </a>\n           {{/files}}\n          `\n      )\n\n      let parentPath = storage.dirname(newPath)\n      let output = compiled.render({\n        parentPath: parentPath,\n        currentDir: this.currentDir,\n        files: files,\n        rootDir: newPath === null || newPath.length===0,\n        draw2d: function () {\n          return this.name.endsWith(conf.fileSuffix)\n        },\n        icon: function () {\n          if (this.name.endsWith(conf.fileSuffix)) {\n            return \"fa fa-object-group\"\n          }\n          return this.type === \"dir\" ? \"fa fa-folder-o\" : \"fa fa-file-o\"\n        }\n      })\n\n      $(\"#fileOpenDialog .list-group\").html($(output))\n      $(\"#fileOpenDialog .list-group\").scrollTop(0)\n\n      // Load the content of an directory\n      //\n      $(\".githubPath[data-type='dir']\").on(\"click\", (event) => {\n        let path = $(event.currentTarget).data(\"path\")\n        this.currentDir = path\n        this.fetchPathContent(storage, path, view)\n      })\n\n      // Load the user selected File\n      //\n      $('.githubPath*[data-draw2d=\"true\"][data-type=\"file\"]').on(\"click\", (event) => {\n        let path = $(event.currentTarget).data(\"path\")\n        storage.loadFile(path)\n          .then((content) => {\n            $('#fileOpenDialog').modal('hide')\n            storage.currentFile = path\n            view.clear()\n            new draw2d.io.json.Reader().unmarshal(view, content)\n            view.app.getConfiguration()\n            view.getCommandStack().markSaveLocation()\n            view.centerDocument()\n            return content\n          })\n        event.preventDefault()\n      })\n    })\n  }\n}\n","import conf from \"./../Configuration\"\n\nexport default class FileSave {\n\n  /**\n   * @constructor\n   *\n   */\n  constructor() {\n  }\n\n  /**\n   * @method\n   *\n   * Open the file picker and load the selected file.<br>\n   *\n   * @param {Function} successCallback callback method if the user select a file and the content is loaded\n   * @param {Function} errorCallback method to call if any error happens\n   *\n   * @since 4.0.0\n   */\n  show(storage, canvas) {\n\n    new draw2d.io.png.Writer().marshal(canvas, imageDataUrl => {\n      $(\"#fileSaveDialog .filePreview\").attr(\"src\", imageDataUrl)\n      $(\"#fileSaveDialog .githubFileName\").val(storage.currentFile?storage.currentFile:\"NewDocument\"+conf.fileSuffix)\n\n      $('#fileSaveDialog').on('shown.bs.modal', (event) => {\n        $(event.currentTarget).find('input:first').focus()\n      })\n      $(\"#fileSaveDialog\").modal(\"show\")\n      Mousetrap.pause()\n\n      // Button: Commit to GitHub\n      //\n      $(\"#fileSaveDialog .okButton\").off('click').on(\"click\", () => {\n        Mousetrap.unpause()\n        let writer = new draw2d.io.json.Writer()\n        writer.marshal(canvas, json => {\n          let newName = $(\"#fileSaveDialog .githubFileName\").val()\n          storage.saveFile(json, imageDataUrl, newName)\n            .then(() => {\n              storage.currentFile = newName\n              $('#fileSaveDialog').modal('hide')\n            });\n        })\n      })\n    }, canvas.getBoundingBox().scale(20, 20))\n  }\n}\n","import conf from \"./../Configuration\"\nimport Hogan from \"hogan.js\"\n\nexport default class FileSaveAs {\n\n  /**\n   * @constructor\n   *\n   */\n  constructor() {\n  }\n\n  /**\n   * @method\n   *\n   * Open the file picker and load the selected file.\n   *\n   * @since 4.0.0\n   */\n  show(storage, canvas) {\n    if (storage.currentFile === null) {\n      storage.currentFile = \"DocumentName\" + conf.fileSuffix\n    }\n\n    new draw2d.io.png.Writer().marshal(canvas, (imageDataUrl) => {\n      // else reopen the already selected directory\n      $(\"#githubFileSaveAsDialog .okButton\").prop(\"disabled\", false)\n      this.fetchPathContent(storage, storage.currentDir)\n\n      $(\"#githubFileSaveAsDialog .filePreview\").attr(\"src\", imageDataUrl)\n      $(\"#githubFileSaveAsDialog .githubFileName\").val(storage.currentFile)\n\n      $('#githubFileSaveAsDialog').off('shown.bs.modal').on('shown.bs.modal', (event) =>{\n        $(event.currentTarget).find('input:first').focus()\n      })\n      $(\"#githubFileSaveAsDialog\").modal(\"show\")\n      Mousetrap.pause()\n\n      // Button: Commit to GitHub\n      //\n      $(\"#githubFileSaveAsDialog .okButton\").off('click').on(\"click\",  () => {\n        Mousetrap.unpause()\n        let writer = new draw2d.io.json.Writer()\n        writer.marshal(canvas, (json) => {\n          var title = $(\"#githubFileSaveAsDialog .githubFileName\").val()\n          storage.saveFile(json, imageDataUrl, title)\n          .then( () => {\n            storage.currentFile = name\n            $('#githubFileSaveAsDialog').modal('hide')\n          })\n        })\n      })\n    }, canvas.getBoundingBox().scale(20, 20))\n  }\n\n  fetchPathContent(storage, newPath) {\n    storage.getFiles(newPath).then( (files) => {\n        storage.currentFile = newPath\n        let compiled = Hogan.compile(\n          '         <a href=\"#\" class=\"list-group-item githubPath\" data-type=\"{{parentType}}\" data-path=\"{{parentPath}}\" >' +\n          '             <span class=\"glyphicon glyphicon-menu-left\"></span>' +\n          '             ..' +\n          '         </a>' +\n          '         {{#files}}' +\n          '           <a href=\"#\" data-draw2d=\"{{draw2d}}\" class=\"list-group-item githubPath text-nowrap\" data-type=\"{{type}}\" data-path=\"{{currentDir}}{{name}}\" data-title=\"{{name}}\" data-id=\"{{id}}\" data-sha=\"{{sha}}\">' +\n          '              <span class=\"glyphicon {{icon}}\"></span>' +\n          '              {{{name}}}' +\n          '           </a>' +\n          '         {{/files}}'\n        )\n\n\n        let parentPath = storage.dirname(newPath)\n        let output = compiled.render({\n          parentPath: parentPath,\n          currentDir: storage.currentDir,\n          files: files,\n          draw2d: function () {\n            return this.name.endsWith(conf.fileSuffix)\n          },\n          icon: function () {\n            if (this.name.endsWith(conf.fileSuffix)) {\n              return \"fa fa-object-group\"\n            }\n            return this.type === \"dir\" ? \"fa fa-folder-o\" : \"fa fa-file-o\"\n          }\n        })\n        $(\"#githubFileSaveAsDialog .list-group\").html($(output))\n        $(\"#githubFileSaveAsDialog .list-group\").scrollTop(0)\n\n        //we are in a folder. Create of a file is possible now\n        //\n        $(\"#githubFileSaveAsDialog .okButton\").prop(\"disabled\", false)\n\n\n        $(\".githubPath[data-type='dir']\").on(\"click\",  (event) =>{\n          this.fetchPathContent(storage, $(event.currentTarget).data(\"path\"))\n        })\n\n        $('.githubPath*[data-draw2d=\"true\"][data-type=\"file\"]').on(\"click\",  (event) => {\n          let path = $(event.currentTarget).data(\"path\")\n          let title = path.split(/[\\\\/]/).pop() // basename\n          $(\"#githubFileSaveAsDialog .githubFileName\").val(title)\n        })\n      })\n  }\n}\n","export default draw2d.SetFigure.extend({\n\n  NAME: \"CircuitFigure\",\n\n  init: function (attr, setter, getter) {\n    this.tooltip = null\n    this.tooltipTimer = -1\n\n    this._super($.extend({stroke: 0, bgColor: null, width: 30, height: 32}, attr), setter, getter)\n\n    this.persistPorts = false\n    this.zoomCallback = $.proxy(this.positionTooltip, this)\n\n    this.on(\"dragstart\", () => {\n      this.hideTooltip(true)\n    })\n\n    this.on(\"mouseenter\", () => {\n      this.tooltipTimer = window.setTimeout( () =>{\n        this.tooltipTimer = -1\n        this.showTooltip()\n      }, 500)\n    })\n\n    this.on(\"mouseleave\", () => {\n      this.hideTooltip()\n    })\n\n    this.on(\"move\", () => {\n      this.positionTooltip()\n    })\n  },\n\n  setCanvas: function (canvas) {\n    if (this.canvas !== null) this.canvas.off(this.zoomCallback)\n    this._super(canvas)\n    if (this.canvas !== null) this.canvas.on(\"zoom\", this.zoomCallback)\n  },\n\n  hideTooltip: function (fast) {\n    if (this.tooltipTimer !== -1) {\n      window.clearTimeout(this.tooltipTimer)\n      this.tooltipTimer = -1\n    }\n    else if (this.tooltip !== null) {\n      if (fast) {\n        this.tooltip.remove()\n      }\n      else {\n        this.tooltip.fadeOut(500, function () {\n          $(this).remove()\n        })\n      }\n      this.tooltip = null\n    }\n  },\n\n  showTooltip: function () {\n    this.tooltip = $('<div class=\"draw2d_tooltip\">'+this.NAME+'</div>')\n      .appendTo('body')\n      .hide()\n      .fadeIn(1000)\n    this.positionTooltip()\n  },\n\n\n  positionTooltip: function () {\n    if (this.tooltip === null) {\n      return\n    }\n\n    let width = this.tooltip.outerWidth(true)\n    let pos = this.canvas.fromCanvasToDocumentCoordinate(\n      this.getAbsoluteX() + this.getWidth() / 2 - width / 2 + 8,\n      this.getAbsoluteY() + this.getHeight() + 10)\n\n    this.tooltip.css({'top': pos.y, 'left': pos.x})\n  },\n\n  applyAlpha: function () {\n  },\n\n  layerGet: function (name, attributes) {\n    if (this.svgNodes === null) return null\n\n    let result = null\n    this.svgNodes.some(function (shape) {\n      if (shape.data(\"name\") === name) {\n        result = shape\n      }\n      return result !== null\n    })\n\n    return result\n  },\n\n  layerAttr: function (name, attributes) {\n    if (this.svgNodes === null) return\n\n    this.svgNodes.forEach(function (shape) {\n      if (shape.data(\"name\") === name) {\n        shape.attr(attributes)\n      }\n    })\n  },\n\n  layerShow: function (name, flag, duration) {\n    if (this.svgNodes === null) return\n\n    if (duration) {\n      this.svgNodes.forEach(function (node) {\n        if (node.data(\"name\") === name) {\n          if (flag) {\n            node.attr({opacity: 0}).show().animate({opacity: 1}, duration)\n          }\n          else {\n            node.animate({opacity: 0}, duration, function () {\n              this.hide()\n            })\n          }\n        }\n      })\n    }\n    else {\n      this.svgNodes.forEach(function (node) {\n        if (node.data(\"name\") === name) {\n          if (flag) {\n            node.show()\n          }\n          else {\n            node.hide()\n          }\n        }\n      })\n    }\n  },\n\n  calculate: function () {\n  },\n\n  onStart: function () {\n  },\n\n  onStop: function () {\n  },\n\n  getParameterSettings: function () {\n    return []\n  },\n\n\n  getRequiredHardware: function(){\n    return {\n      raspi: false,\n      arduino: false\n    }\n  },\n  \n  onDrop: function (dropTarget, x, y, shiftKey, ctrlKey) {\n    // Activate a \"smart insert\" If the user drop this figure on connection\n    //\n    /*\n    if (dropTarget instanceof draw2d.Connection) {\n      let additionalConnection = dropTarget.getCanvas().createConnection()\n      let oldSource = dropTarget.getSource()\n      let oldTarget = dropTarget.getTarget()\n      if (oldSource instanceof draw2d.InputPort) {\n        oldSource = dropTarget.getTarget()\n        oldTarget = dropTarget.getSource()\n      }\n\n      let stack = this.getCanvas().getCommandStack()\n      let cmd = new draw2d.command.CommandReconnect(dropTarget)\n      cmd.setNewPorts(oldSource, this.getInputPort(0))\n      stack.execute(cmd)\n\n      cmd = new draw2d.command.CommandConnect(oldTarget, this.getOutputPort(0))\n      cmd.setConnection(additionalConnection)\n      stack.execute(cmd)\n    }\n    */\n  },\n\n\n  /**\n   * @method\n   * Return an objects with all important attributes for XML or JSON serialization\n   *\n   * @returns {Object}\n   */\n  getPersistentAttributes: function () {\n    let memento = this._super()\n\n    // add all decorations to the memento\n    //\n    memento.labels = []\n    this.children.each(function (i, e) {\n      let labelJSON = e.figure.getPersistentAttributes()\n      labelJSON.locator = e.locator.NAME\n      memento.labels.push(labelJSON)\n    })\n\n    return memento\n  },\n\n  /**\n   * @method\n   * Read all attributes from the serialized properties and transfer them into the shape.\n   *\n   * @param {Object} memento\n   * @returns\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    // remove all decorations created in the constructor of this element\n    //\n    this.resetChildren()\n\n    // and add all children of the JSON document.\n    //\n    $.each(memento.labels, $.proxy(function (i, json) {\n      // create the figure stored in the JSON\n      let figure = eval(\"new \" + json.type + \"()\")\n\n      // apply all attributes\n      figure.attr(json)\n\n      // instantiate the locator\n      let locator = eval(\"new \" + json.locator + \"()\")\n\n      // add the new figure as child to this figure\n      this.add(figure, locator)\n    }, this))\n  }\n})\n\n","export default shape_designer.figure.DecoratedInputPort = draw2d.InputPort.extend({\n\n  init: function (attr, setter, getter) {\n    this.hasChanged = true\n\n    this._super(attr, setter, getter)\n\n    this.decoration = new shape_designer.figure.MarkerFigure()\n\n    this.add(this.decoration, new draw2d.layout.locator.LeftLocator({margin: 8}))\n\n\n    // a port can have a value. Useful for workflow engines or circuit diagrams\n    this.setValue(true)\n  },\n\n  useDefaultValue: function () {\n    this.decoration.setStick(true)\n  },\n\n  setValue: function (value) {\n    this.hasChanged = this.value !== value\n    this._super(value)\n  },\n\n  hasChangedValue: function () {\n    return this.hasChanged\n  },\n\n  hasRisingEdge: function () {\n    return this.hasChangedValue() && this.getValue()\n  },\n\n  hasFallingEdge: function () {\n    return this.hasChangedValue() && !this.getValue()\n  }\n})\n","\nexport default shape_designer.figure.ExtLabel = draw2d.shape.basic.Label.extend({\n\n  NAME: \"shape_designer.figure.ExtLabel\",\n\n\n  init: function () {\n    this.blur = 0\n    this.isExtFigure = true\n\n    this._super()\n\n\n    this.setUserData({name: \"Label\"})\n\n    this.filters = new draw2d.util.ArrayList()\n    this.filters.add(new shape_designer.filter.PositionFilter())\n    this.filters.add(new shape_designer.filter.FontSizeFilter())\n    this.filters.add(new shape_designer.filter.FontColorFilter())\n\n    this.installEditor(new LabelInplaceEditor())\n  },\n\n  getPotentialFilters: function () {\n    return [\n      {label: \"Opacity\", impl: \"shape_designer.filter.OpacityFilter\"},\n      {label: \"Blur\", impl: \"shape_designer.filter.BlurFilter\"},\n      {label: \"Outline\", impl: \"shape_designer.filter.OutlineStrokeFilter\"},\n      {label: \"Gradient\", impl: \"shape_designer.filter.TextLinearGradientFilter\"},\n      {label: \"Font Size\", impl: \"shape_designer.filter.FontSizeFilter\"},\n      {label: \"Font Color\", impl: \"shape_designer.filter.FontColorFilter\"}\n    ]\n  },\n\n  setBlur: function (value) {\n    this.blur = value\n    this.repaint()\n  },\n\n  getBlur: function () {\n    return this.blur\n  },\n\n  removeFilter: function (filter) {\n    this.filters.remove(filter)\n\n    return this\n  },\n\n  addFilter: function (filter) {\n    var alreadyIn = false\n\n    this.filters.each($.proxy(function (i, e) {\n      alreadyIn = alreadyIn || (e.NAME === filter.NAME)\n    }, this))\n    if (alreadyIn === true) {\n      return // silently\n    }\n\n    this.filters.add(filter)\n    filter.onInstall(this)\n    this.repaint()\n\n    return this\n  },\n\n/*\n  setPosition: function(x, y) {\n    if (x instanceof draw2d.geo.Point) {\n      return this._super(\n        parseFloat(x.x.toFixed(1)),\n        parseFloat(x.y.toFixed(1)))\n    }\n\n    return this._super(\n      parseFloat(x.toFixed(1)),\n      parseFloat(y.toFixed(1)))\n  },\n*/\n\n    /**\n   * @method\n   * Trigger the repaint of the element.\n   *\n   */\n  repaint: function (attributes) {\n    if (this.shape === null) {\n      return\n    }\n\n    if (typeof attributes === \"undefined\") {\n      attributes = {}\n    }\n\n    // style the label\n    var lattr = {}\n    lattr.text = this.text\n    lattr[\"font-weight\"] = (this.bold === true) ? \"bold\" : \"normal\"\n    lattr[\"text-anchor\"] = \"start\"\n    lattr[\"font-size\"] = this.fontSize\n    if (this.fontFamily !== null) {\n      lattr[\"font-family\"] = this.fontFamily\n    }\n    lattr.fill = this.fontColor.hash()\n    // since 4.2.1\n    lattr.stroke = this.outlineColor.hash()\n    lattr[\"stroke-width\"] = this.outlineStroke\n\n    this.filters.each($.proxy(function (i, filter) {\n      filter.apply(this, attributes, lattr)\n    }, this))\n\n    this.svgNodes.attr(lattr)\n    // set of the x/y must be done AFTER the font-size and bold has been set.\n    // Reason: the getHeight method needs the font-size for calculation because\n    //         it redirects the calculation to the SVG element.\n    this.svgNodes.attr({x: this.padding.left, y: this.getHeight() / 2})\n\n    // jump over the normal Label implementation\n    draw2d.SetFigure.prototype.repaint.call(this, attributes)\n  },\n\n  getPersistentAttributes: function () {\n    var memento = this._super()\n\n    memento.filters = []\n    this.filters.each($.proxy(function (i, e) {\n      var filterMemento = e.getPersistentAttributes(this)\n      memento.filters.push(filterMemento)\n    }, this))\n\n    return memento\n  },\n\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n\n    if (typeof memento.filters !== \"undefined\") {\n      this.filters = new draw2d.util.ArrayList()\n      $.each(memento.filters, $.proxy(function (i, e) {\n        var filter = eval(\"new \" + e.name + \"()\")\n        filter.setPersistentAttributes(this, e)\n        this.filters.add(filter)\n      }, this))\n    }\n  }\n})\n","export default shape_designer.figure.ExtLine = draw2d.shape.basic.PolyLine.extend({\n\n  NAME: \"shape_designer.figure.ExtLine\",\n\n\n  init: function () {\n    this._super()\n\n    this.blur = 0\n    this.isExtFigure = true\n\n    this.setUserData({name: \"Line\"})\n\n    this.filters = new draw2d.util.ArrayList()\n    this.filters.add(new shape_designer.filter.StrokeFilter())\n\n    this.setRouter(new draw2d.layout.connection.VertexRouter())\n    this.installEditPolicy(new draw2d.policy.line.VertexSelectionFeedbackPolicy())\n  },\n\n  setBlur: function (value) {\n    this.blur = parseInt(value)\n    this.repaint()\n  },\n\n  getBlur: function () {\n    return this.blur\n  },\n\n  getPotentialFilters: function () {\n    return [\n      {label: \"Opacity\", impl: \"shape_designer.filter.OpacityFilter\"},\n      {label: \"Blur\", impl: \"shape_designer.filter.BlurFilter\"},\n      {label: \"Outline\", impl: \"shape_designer.filter.OutlineStrokeFilter\"},\n      {label: \"Corner Radius\", impl: \"shape_designer.filter.RadiusFilter\"},\n      {label: \"Stroke\", impl: \"shape_designer.filter.StrokeFilter\"}\n    ]\n  },\n\n  removeFilter: function (filter) {\n    this.filters.remove(filter)\n\n    return this\n  },\n\n  addFilter: function (filter) {\n    var alreadyIn = false\n\n    this.filters.each($.proxy(function (i, e) {\n      alreadyIn = alreadyIn || (e.NAME === filter.NAME)\n    }, this))\n    if (alreadyIn === true) {\n      return // silently\n    }\n\n    this.filters.add(filter)\n    filter.onInstall(this)\n    this.repaint()\n\n    return this\n  },\n\n\n  /**\n   * @method\n   * Trigger the repaint of the element.\n   *\n   */\n  repaint: function (attributes) {\n    if (this.shape === null) {\n      return\n    }\n\n    if (typeof attributes === \"undefined\") {\n      attributes = {}\n    }\n\n    this.filters.each($.proxy(function (i, filter) {\n      filter.apply(this, attributes)\n    }, this))\n\n//        this.shape.blur(this.blur);\n    this._super(attributes)\n  },\n\n  getPersistentAttributes: function () {\n    var memento = this._super()\n\n    memento.filters = []\n    this.filters.each($.proxy(function (i, e) {\n      var filterMemento = e.getPersistentAttributes(this)\n      memento.filters.push(filterMemento)\n    }, this))\n\n    return memento\n  },\n\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n\n    if (typeof memento.filters !== \"undefined\") {\n      this.filters = new draw2d.util.ArrayList()\n      $.each(memento.filters, $.proxy(function (i, e) {\n        var filter = eval(\"new \" + e.name + \"()\")\n        filter.setPersistentAttributes(this, e)\n        this.filters.add(filter)\n      }, this))\n    }\n  }\n})\n","import PositionFilter from \"../filter/PositionFilter\"\nimport SizeFilter from \"../filter/SizeFilter\"\nimport StrokeFilter from \"../filter/StrokeFilter\"\nimport FillColorFilter from \"../filter/FillColorFilter\"\n\n/* jshint evil:true */\n// required for serialie/deserialize of JSON\nexport default shape_designer.figure.ExtPolygon = draw2d.shape.basic.Polygon.extend({\n\n  NAME: \"shape_designer.figure.ExtPolygon\",\n\n\n  init: function (attr, setter, getter) {\n    this.blur = 0\n\n    this.isExtFigure = true\n\n    this._super(attr, setter, getter)\n\n    this.setUserData({name: \"Polygon\"})\n\n    this.filters = new draw2d.util.ArrayList()\n    this.filters.add(new PositionFilter())\n    this.filters.add(new SizeFilter())\n    this.filters.add(new StrokeFilter())\n    this.filters.add(new FillColorFilter())\n\n    this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy())\n  },\n\n  setBlur: function (value) {\n    this.blur = parseInt(value)\n    this.repaint()\n  },\n\n  getBlur: function () {\n    return this.blur\n  },\n\n  getPotentialFilters: function () {\n    return [\n      {label: \"Stroke\", impl: \"shape_designer.filter.StrokeFilter\"},\n      {label: \"Opacity\", impl: \"shape_designer.filter.OpacityFilter\"},\n      {label: \"Blur\", impl: \"shape_designer.filter.BlurFilter\"},\n      {label: \"Corner Radius\", impl: \"shape_designer.filter.RadiusFilter\"},\n      {label: \"Linear Gradient\", impl: \"shape_designer.filter.LinearGradientFilter\"},\n      {label: \"Fill Color\", impl: \"shape_designer.filter.FillColorFilter\"}\n    ]\n  },\n\n  removeFilter: function (filter) {\n    this.filters.remove(filter)\n  },\n\n  addFilter: function (filter) {\n    var alreadyIn = false\n\n    this.filters.each($.proxy(function (i, e) {\n      alreadyIn = alreadyIn || (e.NAME === filter.NAME)\n    }, this))\n\n    if (alreadyIn === true) {\n      return // silently\n    }\n\n    this.filters.add(filter)\n    filter.onInstall(this)\n    this.repaint()\n  },\n\n  onDoubleClick: function () {\n    this.installEditPolicy(new draw2d.policy.figure.VertexSelectionFeedbackPolicy())\n  },\n\n  /**\n   * @method\n   * Unselect the figure and propagete this event to all edit policies.\n   *\n   * @final\n   * @private\n   **/\n  unselect: function () {\n    this._super()\n\n    this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy())\n    return this\n  },\n\n\n  /**\n   * @method\n   * Trigger the repaint of the element.\n   *\n   */\n  repaint: function (attributes) {\n    if (this.shape === null) {\n      return\n    }\n\n    if (this.svgPathString === null) {\n      this.calculatePath()\n    }\n\n    if (typeof attributes === \"undefined\") {\n      attributes = {}\n    }\n\n\n    attributes.path = this.svgPathString\n\n    this.filters.each($.proxy(function (i, filter) {\n      filter.apply(this, attributes)\n    }, this))\n\n    //this.shape.blur(this.blur===0?-1:this.blur);\n    /*\n            if(this.filter)\n            this.filter = this.canvas.paper.createFilter();\n            filter.addShiftToColor(\"red\");\n            filter.addBlur(7);\n            this.shape.filter(filter);\n    */\n    this._super(attributes)\n  },\n\n  getPersistentAttributes: function () {\n    var memento = this._super()\n\n    memento.blur = this.blur\n    memento.filters = []\n    this.filters.each($.proxy(function (i, e) {\n      var filterMemento = e.getPersistentAttributes(this)\n      memento.filters.push(filterMemento)\n    }, this))\n\n    return memento\n  },\n\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.blur !== \"undefined\")\n      this.setBlur(memento.blur)\n\n    if (typeof memento.filters !== \"undefined\") {\n      this.filters = new draw2d.util.ArrayList()\n      var sizeFilterAdded = false\n      $.each(memento.filters, $.proxy(function (i, e) {\n\n        var filter = eval(\"new \" + e.name + \"()\")\n        if (filter instanceof shape_designer.filter.SizeFilter) {\n          sizeFilterAdded = true\n        }\n        filter.setPersistentAttributes(this, e)\n        this.filters.add(filter)\n      }, this))\n      if (!sizeFilterAdded) {\n        this.filters.insertElementAt(new shape_designer.filter.SizeFilter(), 1)\n      }\n    }\n  }\n})\n","export default shape_designer.figure.ExtPort = draw2d.shape.basic.Circle.extend({\n\n  NAME: \"shape_designer.figure.ExtPort\",\n\n\n  init: function () {\n    this.isExtFigure = true\n    this.decoration = null\n    this._super({\n      bgColor: \"#37B1DE\",\n      diameter: 10\n    })\n\n\n    this.setUserData({\n      name: \"Port\",\n      type: \"Hybrid\",\n      direction: null,\n      fanout: 20\n    })\n\n    this.filters = new draw2d.util.ArrayList()\n    this.filters.add(new shape_designer.filter.PositionFilter())\n    this.filters.add(new shape_designer.filter.FanoutFilter())\n    this.filters.add(new shape_designer.filter.PortDirectionFilter())\n    this.filters.add(new shape_designer.filter.PortTypeFilter())\n\n    this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())\n  },\n\n\n  setInputType: function (type) {\n    this.getUserData().type = type\n  },\n\n  getInputType: function () {\n    return this.getUserData().type\n  },\n\n  setMaxFanOut: function (count) {\n    this.getUserData().fanout = parseInt(count)\n  },\n\n  getMaxFanOut: function () {\n    return this.getUserData().fanout ? this.getUserData().fanout : 20\n  },\n\n\n  setConnectionDirection: function (direction) {\n    this.getUserData().direction = direction\n    this.updateDecoration()\n  },\n\n  getConnectionDirection: function () {\n    return this.getUserData().direction\n  },\n\n\n  updateDecoration: function () {\n    if (this.decoration !== null) {\n      this.remove(this.decoration)\n      this.decoration = null\n    }\n    var figure = null\n    var locator = null\n    switch (this.getConnectionDirection()) {\n      case 0:\n        figure = new draw2d.shape.icon.ArrowUp({width: 8, height: 8, opacity: 0.5})\n        locator = new draw2d.layout.locator.TopLocator()\n        break\n      case 1:\n        figure = new draw2d.shape.icon.ArrowRight({width: 8, height: 8, opacity: 0.5})\n        locator = new draw2d.layout.locator.RightLocator()\n        break\n      case 2:\n        figure = new draw2d.shape.icon.ArrowDown({width: 8, height: 8, opacity: 0.5})\n        locator = new draw2d.layout.locator.BottomLocator()\n        break\n      case 3:\n        figure = new draw2d.shape.icon.ArrowLeft({width: 8, height: 8, opacity: 0.5})\n        locator = new draw2d.layout.locator.LeftLocator()\n        break\n    }\n    if (figure !== null) {\n      this.add(figure, locator)\n      this.decoration = figure\n    }\n  },\n\n  getPotentialFilters: function () {\n    return [\n      {label: \"Port Type\", impl: \"shape_designer.filter.PortTypeFilter\"},\n      {label: \"Port Direction\", impl: \"shape_designer.filter.PortDirectionFilter\"},\n      {label: \"Color\", impl: \"shape_designer.filter.FillColorFilter\"}\n\n    ]\n  },\n\n  removeFilter: function (filter) {\n    this.filters.remove(filter)\n  },\n\n  addFilter: function (filter) {\n    var alreadyIn = false\n\n    this.filters.each($.proxy(function (i, e) {\n      alreadyIn = alreadyIn || (e.NAME === filter.NAME)\n    }, this))\n    if (alreadyIn === true) {\n      return // silently\n    }\n\n    this.filters.add(filter)\n    filter.onInstall(this)\n    this.repaint()\n  },\n\n\n  /**\n   * @method\n   * Trigger the repaint of the element.\n   *\n   */\n  repaint: function (attributes) {\n    if (this.shape === null) {\n      return\n    }\n\n    if (typeof attributes === \"undefined\") {\n      attributes = {}\n    }\n\n    this.filters.each($.proxy(function (i, filter) {\n      filter.apply(this, attributes)\n    }, this))\n\n    this._super(attributes)\n  },\n\n  getPersistentAttributes: function () {\n    var memento = this._super()\n\n    memento.filters = []\n    this.filters.each($.proxy(function (i, e) {\n      var filterMemento = e.getPersistentAttributes(this)\n      memento.filters.push(filterMemento)\n    }, this))\n\n    return memento\n  },\n\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n\n    if (typeof memento.filters !== \"undefined\") {\n      this.filters = new draw2d.util.ArrayList()\n      var fanoutFilterAdded = false\n      $.each(memento.filters, $.proxy(function (i, e) {\n        var filter = eval(\"new \" + e.name + \"()\")\n        if (filter instanceof shape_designer.filter.FanoutFilter) {\n          fanoutFilterAdded = true\n        }\n        filter.setPersistentAttributes(this, e)\n        this.filters.add(filter)\n      }, this))\n      if (!fanoutFilterAdded) {\n        this.filters.insertElementAt(new shape_designer.filter.FanoutFilter(), 1)\n      }\n\n    }\n    this.updateDecoration()\n  }\n})\n","/**\n * The markerFigure is the left hand side annotation for a DecoratedPort.\n *\n * It contains two children\n *\n * StateAFigure: if the mouse hover and the figure isn't permanent visible\n * StateBFigure: either the mouse is over or the user pressed the checkbox to stick the figure on the port\n *\n * This kind of decoration is usefull for defualt values on workflwos enginges or circuit diagrams\n *\n */\n\n\n\nexport default shape_designer.figure.MarkerFigure = draw2d.shape.layout.VerticalLayout.extend({\n\n  NAME: \"MarkerFigure\",\n\n  init: function (attr, setter, getter) {\n    var _this = this\n\n    this.isMouseOver = false        // indicator if the mouse is over the element\n    this.stick = false        // indicator if the stateBFigure should always be visible\n    this.defaultValue = true         // current selected default value for the decoration\n\n    this._super($.extend({\n        stroke: 0\n      }, attr),\n      setter,\n      getter)\n\n\n    // figure if the decoration is not permanent visible (sticky note)\n    this.add(this.stateA = new shape_designer.figure.MarkerStateAFigure({text: \"X\"}))\n    // figure if the decoration permanent visible\n    this.add(this.stateB = new shape_designer.figure.MarkerStateBFigure({text: \"X\"}))\n\n\n    this.on(\"mouseenter\", function (emitter, event) {\n      _this.onMouseOver(true)\n    })\n\n    this.on(\"mouseleave\", function (emitter, event) {\n      _this.onMouseOver(false)\n    })\n\n    this.on(\"click\", function (emitter, event) {\n      if (_this.isVisible() === false) {\n        return//silently\n      }\n\n      if (_this.stateB.getStickTickFigure().getBoundingBox().hitTest(event.x, event.y) === true) {\n        _this.setStick(!_this.getStick())\n      }\n      else if (_this.stateB.getLabelFigure().getBoundingBox().hitTest(event.x, event.y) === true) {\n        $.contextMenu({\n          selector: 'body',\n          trigger: \"left\",\n          events:\n            {\n              hide: function () {\n                $.contextMenu('destroy')\n              }\n            },\n          callback: $.proxy(function (key, options) {\n            // propagate the default value to the port\n            //\n            switch (key) {\n              case \"high\":\n                _this.setDefaultValue(true)\n                break\n              case \"low\":\n                _this.setDefaultValue(false)\n                break\n              default:\n                break\n            }\n\n          }, this),\n          x: event.x,\n          y: event.y,\n          items: {\n            \"high\": {name: \"High\"},\n            \"low\": {name: \"Low\"}\n          }\n        })\n\n      }\n    })\n\n    this.setDefaultValue(true)\n    this.onMouseOver(false)\n  },\n\n\n  onMouseOver: function (flag) {\n    this.isMouseOver = flag\n\n    if (this.visible === false) {\n      return // silently\n    }\n\n    if (this.stick === true) {\n      this.stateA.setVisible(false)\n      this.stateB.setVisible(true)\n    }\n    else {\n      this.stateA.setVisible(!this.isMouseOver)\n      this.stateB.setVisible(this.isMouseOver)\n    }\n\n    return this\n  },\n\n\n  setVisible: function (flag) {\n    this._super(flag)\n\n    // update the hover/stick state of the figure\n    this.onMouseOver(this.isMouseOver)\n\n    return this\n  },\n\n\n  setStick: function (flag) {\n    this.stick = flag\n    this.onMouseOver(this.isMouseOver)\n\n\n    // the port has only a default value if the decoration is visible\n    this.parent.setValue(flag ? this.defaultValue : null)\n\n    this.stateB.setTick(this.getStick())\n\n    return this\n  },\n\n\n  getStick: function () {\n    return this.stick\n  },\n\n\n  setText: function (text) {\n    this.stateB.setText(text)\n\n    return this\n  },\n\n  setDefaultValue: function (value) {\n    this.defaultValue = value\n    this.setText((this.defaultValue === true) ? \"High\" : \"Low\")\n\n    // only propagate the value to the parent if the decoration permanent visible\n    //\n    if (this.stick === true) {\n      this.parent.setValue(this.defaultValue)\n    }\n  }\n})\n","/**\n * This is only the mouseover reactive shape. A little bit smaller than the visible shape\n *\n * Or you can display this shape with opacity of 0.2 to indicate that this is a reactive area.\n */\n\n\n\n\nexport default shape_designer.figure.MarkerStateAFigure = draw2d.shape.basic.Label.extend({\n\n  NAME: \"MarkerStateAFigure\",\n\n  /**\n   * @param attr\n   */\n  init: function (attr, setter, getter) {\n    this._super($.extend({\n        padding: {left: 5, top: 2, bottom: 2, right: 10},\n        bgColor: null,\n        stroke: 1,\n        color: null,\n        fontColor: null,\n        fontSize: 10\n      }, attr),\n      setter,\n      getter)\n\n    // we must override the hitTest method to ensure that the parent can receive the mouseenter/mouseleave events.\n    // Unfortunately draw2D didn't provide event bubbling like HTML. The first shape in queue consumes the event.\n    //\n    // now this shape is \"dead\" for any mouse events and the parent must/can handle this.\n    this.hitTest = function () {\n      return false\n    }\n  }\n})\n","export default shape_designer.figure.MarkerStateBFigure = draw2d.shape.layout.HorizontalLayout.extend({\n\n  NAME: \"MarkerStateBFigure\",\n\n  /**\n   * @param attr\n   */\n  init: function (attr, setter, getter) {\n    this._super($.extend({\n        bgColor: \"#FFFFFF\",\n        stroke: 1,\n        color: \"#00bcd4\",\n        radius: 2,\n        padding: {left: 3, top: 3, bottom: 3, right: 8},\n        gap: 5\n      }, attr),\n      setter,\n      getter)\n\n    this.stickTick = new draw2d.shape.basic.Circle({\n      diameter: 10,\n      bgColor: \"#f0f0f0\",\n      stroke: 1,\n      resizeable: false\n    })\n    this.add(this.stickTick)\n    this.stickTick.hitTest = function () {\n      return false\n    }\n    this.stickTick.addCssClass(\"cursorPointer\")\n\n    this.label = new draw2d.shape.basic.Label({\n      text: attr.text,\n      resizeable: false,\n      stroke: 0,\n      padding: 0,\n      fontSize: 10,\n      fontColor: \"#303030\"\n    })\n    this.add(this.label)\n    // don't catch the mouse events. This is done by the parent container\n    this.label.hitTest = function () {\n      return false\n    }\n    this.label.addCssClass(\"cursorPointer\")\n\n    // we must override the hitTest method to ensure that the parent can receive the mouseenter/mouseleave events.\n    // Unfortunately draw2D didn't provide event bubbling like HTML. The first shape in queue consumes the event.\n    //\n    // now this shape is \"dead\" for any mouse events and the parent must/can handle this.\n    this.hitTest = function () {\n      return false\n    }\n  },\n\n  setText: function (text) {\n    this.label.setText(text)\n  },\n\n  setTick: function (flag) {\n    this.stickTick.attr({bgColor: flag ? \"#00bcd4\" : \"#f0f0f0\"})\n  },\n\n  getStickTickFigure: function () {\n    return this.stickTick\n  },\n\n  getLabelFigure: function () {\n    return this.label\n  },\n\n  /**\n   * @method\n   *\n   *\n   * @template\n   **/\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes = attributes || {}\n\n    attributes.path = this.calculatePath()\n\n    this._super(attributes)\n  },\n\n\n  /**\n   * @method\n   *\n   * Override the default rendering of the HorizontalLayout, which is a simple\n   * rectangle. We want an arrow.\n   */\n  createShapeElement: function () {\n    return this.canvas.paper.path(this.calculatePath())\n  },\n\n  /**\n   * stupid copy&paste the code from the Polygon shape...unfortunately the LayoutFigure isn't a polygon.\n   *\n   * @returns {string}\n   */\n  calculatePath: function () {\n    var arrowLength = 8\n\n    this.vertices = new draw2d.util.ArrayList()\n\n    var w = this.width\n    var h = this.height\n    var pos = this.getAbsolutePosition()\n    var i = 0\n    var length = 0\n    this.vertices.add(new draw2d.geo.Point(pos.x, pos.y))\n    this.vertices.add(new draw2d.geo.Point(pos.x + w - arrowLength, pos.y))\n\n    this.vertices.add(new draw2d.geo.Point(pos.x + w, pos.y + h / 2))\n\n    this.vertices.add(new draw2d.geo.Point(pos.x + w - arrowLength, pos.y + h))\n    this.vertices.add(new draw2d.geo.Point(pos.x, pos.y + h))\n\n    var radius = this.getRadius()\n    var path = []\n    // hard corners\n    //\n    if (radius === 0) {\n      length = this.vertices.getSize()\n      var p = this.vertices.get(0)\n      path.push(\"M\", (p.x | 0) + 0.5, \" \", (p.y | 0) + 0.5)\n      for (i = 1; i < length; i++) {\n        p = this.vertices.get(i)\n        path.push(\"L\", (p.x | 0) + 0.5, \" \", (p.y | 0) + 0.5)\n      }\n      path.push(\"Z\")\n    }\n    // soften/round corners\n    //\n    else {\n      length = this.vertices.getSize()\n      var start = this.vertices.first()\n      var end = this.vertices.last()\n      if (start.equals(end)) {\n        length = length - 1\n        end = this.vertices.get(length - 1)\n      }\n      var begin = draw2d.geo.Util.insetPoint(start, end, radius)\n      path.push(\"M\", (begin.x | 0) + 0.5, \",\", (begin.y | 0) + 0.5)\n      for (i = 0; i < length; i++) {\n        start = this.vertices.get(i)\n        end = this.vertices.get((i + 1) % length)\n        let modStart = draw2d.geo.Util.insetPoint(start, end, radius)\n        let modEnd = draw2d.geo.Util.insetPoint(end, start, radius)\n        path.push(\"Q\", start.x, \",\", start.y, \" \", (modStart.x | 0) + 0.5, \", \", (modStart.y | 0) + 0.5)\n        path.push(\"L\", (modEnd.x | 0) + 0.5, \",\", (modEnd.y | 0) + 0.5)\n      }\n    }\n    return path.join(\"\")\n  }\n\n\n})\n","export default shape_designer.figure.PolyCircle = draw2d.shape.basic.Oval.extend({\n\n  NAME: \"shape_designer.figure.PolyCircle\",\n\n\n  init: function (center, radius) {\n    this.blur = 0\n    this.isExtFigure = true\n\n    // set some good defaults\n    if (typeof radius === \"undefined\") {\n      radius = 10\n    }\n\n    this._super({stroke: 0, bgColor: \"95C06A\", width: radius * 2, height: radius * 2})\n\n    // center must be set after the width/height...bug\n    if (typeof center !== \"undefined\") {\n      this.setCenter(center)\n    }\n\n    this.setUserData({name: \"Circle\"})\n\n    this.filters = new draw2d.util.ArrayList()\n    this.filters.add(new shape_designer.filter.PositionFilter())\n    this.filters.add(new shape_designer.filter.SizeFilter())\n    this.filters.add(new shape_designer.filter.FillColorFilter())\n  },\n\n  getPotentialFilters: function () {\n    return [\n      {label: \"Stroke\", impl: \"shape_designer.filter.StrokeFilter\"},\n      {label: \"Opacity\", impl: \"shape_designer.filter.OpacityFilter\"},\n      {label: \"Blur\", impl: \"shape_designer.filter.BlurFilter\"},\n      {label: \"Linear Gradient\", impl: \"shape_designer.filter.LinearGradientFilter\"},\n      {label: \"Fill Color\", impl: \"shape_designer.filter.FillColorFilter\"}\n    ]\n  },\n\n  removeFilter: function (filter) {\n    this.filters.remove(filter)\n  },\n\n  addFilter: function (filter) {\n    var alreadyIn = false\n\n    this.filters.each($.proxy(function (i, e) {\n      alreadyIn = alreadyIn || (e.NAME === filter.NAME)\n    }, this))\n\n    if (alreadyIn === true) {\n      return // silently\n    }\n\n    this.filters.add(filter)\n    filter.onInstall(this)\n    this.repaint()\n  },\n\n\n  setBlur: function (value) {\n    this.blur = parseInt(value)\n    this.repaint()\n  },\n\n  getBlur: function () {\n    return this.blur\n  },\n\n  /**\n   * @method\n   * Trigger the repaint of the element.\n   *\n   */\n  repaint: function (attributes) {\n    if (this.shape === null) {\n      return\n    }\n\n    this.filters.each($.proxy(function (i, filter) {\n      filter.apply(this, attributes)\n    }, this))\n\n//        this.shape.blur(this.blur);\n    this._super(attributes)\n  },\n\n  getVertices: function () {\n\n    var w2 = this.getWidth() / 2\n    var h2 = this.getHeight() / 2\n    var center = this.getCenter()\n    var sides = 36\n\n    var vertices = new draw2d.util.ArrayList()\n    for (var i = 0; i < sides; i++) {\n      var radian = 2 * Math.PI * i / sides\n      var x = Math.cos(radian) * w2 + center.x\n      var y = Math.sin(radian) * h2 + center.y\n      vertices.add(new draw2d.geo.Point(x, y))\n    }\n    return vertices\n  },\n\n  getPersistentAttributes: function () {\n    var memento = this._super()\n\n    memento.blur = this.blur\n    memento.filters = []\n    this.filters.each($.proxy(function (i, e) {\n      var filterMemento = e.getPersistentAttributes(this)\n      memento.filters.push(filterMemento)\n    }, this))\n\n    return memento\n  },\n\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.blur !== \"undefined\")\n      this.setBlur(memento.blur)\n\n    if (typeof memento.filters !== \"undefined\") {\n      this.filters = new draw2d.util.ArrayList()\n      $.each(memento.filters, $.proxy(function (i, e) {\n        var filter = eval(\"new \" + e.name + \"()\")\n        filter.setPersistentAttributes(this, e)\n        this.filters.add(filter)\n      }, this))\n    }\n  }\n})\n","import ExtPolygon from \"./ExtPolygon\"\n\nexport default shape_designer.figure.PolyRect = ExtPolygon.extend({\n\n  NAME: \"shape_designer.figure.PolyRect\",\n\n  init: function (topLeft, bottomRight) {\n    this._super()\n    if (typeof topLeft === \"undefined\") {\n      this.vertices = new draw2d.util.ArrayList()\n      this.addVertex(new draw2d.geo.Point(100, 100))\n      this.addVertex(new draw2d.geo.Point(140, 100))\n      this.addVertex(new draw2d.geo.Point(140, 140))\n      this.addVertex(new draw2d.geo.Point(100, 140))\n    }\n    else {\n      this.vertices = new draw2d.util.ArrayList()\n      this.addVertex(new draw2d.geo.Point(topLeft.x, topLeft.y))\n      this.addVertex(new draw2d.geo.Point(bottomRight.x, topLeft.y))\n      this.addVertex(new draw2d.geo.Point(bottomRight.x, bottomRight.y))\n      this.addVertex(new draw2d.geo.Point(topLeft.x, bottomRight.y))\n    }\n\n    this.setUserData({name: \"Rectangle\"})\n  }\n})\n","export default shape_designer.figure.TestSwitch = draw2d.shape.basic.Label.extend({\n\n  NAME: \"shape_designer.figure.TestSwitch\",\n\n  init: function (attr, setter, getter) {\n    this._super({text: \"Low\"}, setter, getter)\n\n    this.createPort(\"output\")\n\n    var _this = this\n\n    this.value = false\n    this.on(\"click\", function () {\n      _this.toggleValue()\n      _this.getOutputPort(0).setValue(_this.value)\n      _this.getOutputPort(0).getConnections().each(function (i, c) {\n        c.getTarget().setValue(_this.value)\n      })\n    })\n  },\n\n  toggleValue: function () {\n    this.value = !this.value\n    this.attr({text: this.value ? \"High\" : \"Low\"})\n  }\n})\n\n","// required to register them for JSON serialize/deserialize\n//\nexport default [\n  require(\"./ExtLabel\"),\n  require(\"./DecoratedInputPort\"),\n  require(\"./ExtLine\"),\n  require(\"./ExtPolygon\"),\n  require(\"./ExtPort\"),\n  require(\"./MarkerFigure\"),\n  require(\"./MarkerStateAFigure\"),\n  require(\"./MarkerStateBFigure\"),\n  require(\"./PolyCircle\"),\n  require(\"./PolyRect\"),\n  require(\"./TestSwitch\")\n]\n\n","import Filter from \"./Filter\"\n\n\nexport default shape_designer.filter.BlurFilter = class BlurFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.BlurFilter\")\n  }\n\n  insertPane(figure, $parent) {\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#' + this.cssScope + '_width_panel\">' +\n      '     Blur' +\n      '    <span id=\"button_remove_' + this.cssScope + '\"><img class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/></span></span>' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"' + this.cssScope + '_blur_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '       <input id=\"filter_blur\" type=\"text\" value=\"' + figure.getBlur() + '\"  name=\"filter_blur\" class=\"mousetrap-pause form-control\" />' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"#filter_blur\").TouchSpin({\n      min: 0,\n      max: 5,\n      step: 1\n    })\n\n    $(\"#filter_blur\").on(\"change\", $.proxy(function () {\n      this.setBlur(parseInt($(\"#filter_blur\").val()))\n    }, figure))\n\n\n    $(\"#button_remove_\" + this.cssScope).on(\"click\", $.proxy(function () {\n      figure.removeFilter(this)\n      figure.setBlur(0)\n      $('#' + this.containerId).animate({\n        \"height\": \"0\",\n        \"opacity\": 0,\n        \"margin-bottom\": 0\n      }, 500, function () {\n        $('#' + this.containerId).remove()\n      })\n    }, this))\n  }\n}\n\n\n\n\n","import Filter from \"./Filter\"\n\nexport default shape_designer.filter.FanoutFilter = class FanoutFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.FanoutFilter\")\n  }\n\n  insertPane(figure, $parent) {\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#' + this.cssScope + '_width_panel\">' +\n      '     Maximal fan out' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"' + this.cssScope + '_width_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '       <input id=\"filter_' + this.cssScope + '_fanout\" type=\"text\" value=\"' + figure.getMaxFanOut() + '\" name=\"filter_' + this.cssScope + '_fanout\" class=\"mousetrap-pause form-control\" />' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"input[name='filter_\" + this.cssScope + \"_fanout']\").TouchSpin({\n      min: 0,\n      max: 50,\n      step: 1,\n      maxboostedstep: 1,\n      postfix: 'px'\n    })\n    $(\"input[name='filter_\" + this.cssScope + \"_fanout']\").on(\"change\", $.proxy(function () {\n      this.setMaxFanOut(parseInt($(\"input[name='filter_\" + this.cssScope + \"_fanout']\").val()))\n    }, figure))\n\n\n  }\n\n  removePane() {\n  }\n\n  onInstall(figure) {\n  }\n}\n\n\n\n\n","import Filter from \"./Filter\"\nimport jscolor from \"../widget/jscolor/jscolor\"\n\nexport default shape_designer.filter.FillColorFilter = class FillColorFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.FillColorFilter\")\n    this.colorPicker = null\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#color_fill_panel\">' +\n      '    Color Fill' +\n      '    <span id=\"button_remove_FillColorFilter\"><img class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/><span>' +\n      ' </div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"color_fill_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '      <div class=\"input-group\">' +\n      '          <span class=\"input-group-addon\">#</span>' +\n      '          <input id=\"filter_color_fill\" type=\"text\" value=\"\" name=\"filter_color_fill\" class=\"mousetrap-pause form-control color\"/>' +\n      '       </div>' +\n      '    </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    var picker = this.colorPicker = new jscolor.color(document.getElementById('filter_color_fill'), {})\n    this.colorPicker.fromString(figure.getBackgroundColor().hash())\n    this.colorPicker.onImmediateChange = $.proxy(function () {\n      this.setBackgroundColor(\"#\" + picker.toString())\n    }, figure)\n\n    $(\"#button_remove_FillColorFilter\").on(\"click\", $.proxy(function () {\n      figure.removeFilter(this)\n      figure.setBackgroundColor(null)\n      $(\"#\"+this.containerId).animate({\"height\": \"0\", \"opacity\": 0, \"margin-bottom\": 0}, 500, function () {\n        $('#'+this.containerId).remove()\n      })\n    }, this))\n  }\n\n  onInstall(figure) {\n    figure.setBackgroundColor(\"#f0f3f3\")\n  }\n\n  removePane() {\n    if (this.colorPicker !== null) {\n      this.colorPicker.hidePicker()\n    }\n  }\n}\n\n\n\n\n","export default class Filter {\n\n  constructor(name) {\n    this.NAME = name\n    this.colorPicker = null\n    this.cssScope = this.NAME.replace(/[.]/g, \"_\")\n    this.containerId= this.cssScope+\"_container\"\n  }\n\n  /**\n   * @method\n   * Sent when an event occurs on the command stack. draw2d.command.CommandStackEvent.getDetail()\n   * can be used to identify the type of event which has occurred.\n   *\n   * @template\n   *\n   **/\n  apply(figure, attributes) {\n  }\n\n  onInstall(figure) {\n  }\n\n  insertPane(figure, $parent) {\n\n  }\n\n  removePane() {\n  }\n\n  getPersistentAttributes(relatedFigure) {\n    var memento = {}\n    memento.name = this.NAME\n\n    return memento\n  }\n\n  setPersistentAttributes(relatedFigure, memento) {\n  }\n}\n\n\n\n\n","import jscolor from \"../widget/jscolor/jscolor\"\n\nimport Filter from \"./Filter\"\n\nexport default shape_designer.filter.FontColorFilter = class FontColorFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.FontColorFilter\")\n    this.colorPicker = null\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#color_fill_panel\">' +\n      '    Font Color' +\n      '    <span id=\"button_remove_FillColorFilter\"><img class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/></span>' +\n      ' </div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"color_fill_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '      <div class=\"input-group\">' +\n      '          <span class=\"input-group-addon\">#</span>' +\n      '          <input id=\"filter_color_fill\" type=\"text\" value=\"\" name=\"filter_color_fill\" class=\"mousetrap-pause form-control color\"/>' +\n      '       </div>' +\n      '    </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    var picker = this.colorPicker = new jscolor.color(document.getElementById('filter_color_fill'), {})\n    this.colorPicker.fromString(figure.getFontColor().hash())\n    this.colorPicker.onImmediateChange = $.proxy(function () {\n      this.setFontColor(\"#\" + picker.toString())\n    }, figure)\n\n    $(\"#button_remove_FillColorFilter\").on(\"click\", () => {\n      figure.removeFilter(this)\n      figure.setFontColor(null)\n      $(\"#\"+this.containerId).animate({\"height\": \"0\", \"opacity\": 0, \"margin-bottom\": 0}, 500, () => {\n        $('#'+this.containerId).remove()\n      })\n    })\n  }\n\n  onInstall(figure) {\n    figure.setFontColor(\"#000000\")\n  }\n\n  removePane() {\n    if (this.colorPicker !== null) {\n      this.colorPicker.hidePicker()\n    }\n  }\n}\n\n\n\n\n","import Filter from \"./Filter\"\n\nexport default shape_designer.filter.FontSizeFilter = class FontSizeFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.FontSizeFilter\")\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#fontsize_width_panel\">' +\n      '     Font Size' +\n      '    <span id=\"button_remove_FontSizeFilter\"><img  class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/></span>' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"fontsize_width_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '       <input id=\"filter_fontsize\" type=\"text\" value=\"' + figure.getFontSize() + '\" name=\"filter_fontsize\" class=\"mousetrap-pause form-control\" />' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"#filter_fontsize\").TouchSpin({\n      min: 4,\n      max: 300,\n      step: 1,\n      boostat: figure.getFontSize(),\n      maxboostedstep: 10,\n      postfix: 'px'\n    })\n\n    $(\"input[name='filter_fontsize']\").on(\"change\", $.proxy(function () {\n      this.setFontSize(parseInt($(\"input[name='filter_fontsize']\").val()))\n    }, figure))\n\n\n    $(\"#button_remove_FontSizeFilter\").on(\"click\", () => {\n      figure.removeFilter(this)\n      figure.setFontSize(12)\n      $(\"#\"+this.containerId).animate({\"height\": \"0\", \"opacity\": 0, \"margin-bottom\": 0}, 500, () => {\n        $('#'+this.containerId).remove()\n      })\n    })\n  }\n\n  removePane() {\n  }\n\n  onInstall(figure) {\n    //   figure.setFontSize(1);\n  }\n}\n\n\n\n\n","import jscolor from \"../widget/jscolor/jscolor\"\n\nimport Filter from \"./Filter\"\nimport \"../widget/ui.anglepicker\"\n\nexport default shape_designer.filter.LinearGradientFilter = class LinearGradientFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.LinearGradientFilter\")\n    this.colorPicker1 = null\n    this.colorPicker2 = null\n\n    this.startColor = \"#f0f0f0\"\n    this.endColor = \"#3f3f3f\"\n    this.angle = 0\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#' + this.cssScope + '_panel\">' +\n      '     Linear Gradient' +\n      '    <span id=\"button_remove_' + this.cssScope + '\"><img  class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/></span>' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"' + this.cssScope + '_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '      <div class=\"input-group text-center\" style=\"width:100%\" >' +\n      '           <div id=\"' + this.cssScope + '_angle\" />' +\n      '      </div> ' +\n      '       <div class=\"input-group\">' +\n      '          <span class=\"input-group-addon\">#</span>' +\n      '          <input id=\"' + this.cssScope + '_color1\" type=\"text\" value=\"' + this.startColor + '\" class=\"mousetrap-pause form-control color\"/>' +\n      '       </div>' +\n      '       <div class=\"input-group\">' +\n      '          <span class=\"input-group-addon\">#</span>' +\n      '          <input id=\"' + this.cssScope + '_color2\" type=\"text\" value=\"' + this.endColor + '\" class=\"mousetrap-pause form-control color\"/>' +\n      '       </div>' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $('#' + this.cssScope + '_angle').anglepicker({\n      start: function (e, ui) {\n\n      },\n      change: (e, ui) => {\n        this.angle = ui.value\n        figure.repaint()\n      },\n      stop: (e, ui) => {\n      },\n      value: this.angle\n    })\n\n    let picker1 = this.colorPicker1 = new jscolor.color($(\"#\" + this.cssScope + '_color1')[0], {})\n    this.colorPicker1.fromString(this.startColor)\n    this.colorPicker1.onImmediateChange = () => {\n      this.startColor = \"#\" + picker1.toString()\n      figure.repaint()\n    }\n\n    let picker2 = this.colorPicker2 = new jscolor.color($(\"#\" + this.cssScope + '_color2')[0], {})\n    this.colorPicker2.fromString(this.endColor)\n    this.colorPicker2.onImmediateChange = () => {\n      this.endColor = \"#\" + picker2.toString()\n      figure.repaint()\n    }\n\n\n    $(\"#button_remove_\" + this.cssScope).on(\"click\", () => {\n      figure.removeFilter(this)\n      $('#' + this.containerId ).animate({\n        \"height\": \"0\",\n        \"opacity\": 0,\n        \"margin-bottom\": 0\n      }, 500, () => {\n        $('#' + this.containerId ).remove()\n      })\n    })\n  }\n\n  apply(figure, attributes) {\n    attributes.fill = this.angle + \"-\" + this.endColor + \"-\" + this.startColor\n  }\n\n  removePane() {\n    if (this.colorPicker1 !== null) {\n      this.colorPicker1.hidePicker()\n    }\n    if (this.colorPicker2 !== null) {\n      this.colorPicker2.hidePicker()\n    }\n  }\n\n  onInstall(figure) {\n    figure.setStroke(1)\n  }\n\n  getPersistentAttributes(relatedFigure) {\n    let memento = super.getPersistentAttributes(relatedFigure)\n\n    memento.startColor = this.startColor\n    memento.endColor = this.endColor\n    memento.angle = this.angle\n\n    return memento\n  }\n\n  setPersistentAttributes(relatedFigure, memento) {\n    super.setPersistentAttributes(relatedFigure, memento)\n\n    this.startColor = memento.startColor\n    this.endColor = memento.endColor\n    this.angle = memento.angle\n\n    return memento\n  }\n}\n\n\n\n\n","import Filter from \"./Filter\"\n\nexport default shape_designer.filter.OpacityFilter = class OpacityFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.OpacityFilter\")\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#opacity_panel\">' +\n      '    Opacity' +\n      '    <span id=\"button_remove_OpacityFilter\"><img  class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/></span>' +\n      '</div>' +\n      ' <div class=\"panel-body collapse in\" id=\"opacity_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '      <div class=\"input-group\">' +\n      '         <input class=\"mousetrap-pause form-control\" id=\"filter_opacity\" type=\"text\" value=\"' + parseInt(figure.getAlpha() * 100) + '\" />' +\n      '      </div>' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"#filter_opacity\").TouchSpin({\n      min: 0,\n      max: 100,\n      step: 5,\n      boostat: parseInt(figure.getAlpha() * 100),\n      maxboostedstep: 10,\n      postfix: '%'\n    })\n    $(\"#filter_opacity\").on(\"change\", $.proxy(function () {\n      this.setAlpha(parseInt($(\"#filter_opacity\").val()) / 100.0)\n    }, figure))\n\n    $(\"#button_remove_OpacityFilter\").on(\"click\", () => {\n      figure.removeFilter(this)\n      figure.setAlpha(1)\n      $(\"#\"+this.containerId).animate({\"height\": \"0\", \"opacity\": 0, \"margin-bottom\": 0}, 500, () => {\n        $('#'+this.containerId).remove()\n      })\n    })\n  }\n\n  removePane() {\n  }\n}\n\n\n\n\n","import jscolor from \"../widget/jscolor/jscolor\"\n\nimport Filter from \"./Filter\"\n\nexport default shape_designer.filter.OutlineStrokeFilter = class OutlineStrokeFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.OutlineStrokeFilter\")\n    this.colorPicker = null\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#outlinestroke_width_panel\">' +\n      '     Outline Stroke' +\n      '    <img id=\"button_remove_OutlineStrokeFilter\" class=\"icon pull-right\" src=\"./images/dialog_close.svg\"/>' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"outlinestroke_width_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '       <input id=\"filter_outlinestroke\" type=\"text\" value=\"' + figure.getOutlineStroke() + '\" name=\"filter_outlinestroke\" class=\"mousetrap-pause form-control\" />' +\n      '       <div class=\"input-group\">' +\n      '          <span class=\"input-group-addon\">#</span>' +\n      '          <input id=\"filter_outlinestroke_color\" type=\"text\" value=\"\" name=\"outlinestroke-color\" class=\"mousetrap-pause form-control color\"/>' +\n      '       </div>' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"input[name='filter_outlinestroke']\")\n      .TouchSpin({\n        min: 0,\n        max: 50,\n        step: 1,\n        boostat: figure.getOutlineStroke(),\n        maxboostedstep: 10,\n        postfix: 'px'\n      })\n      .on(\"change\", $.proxy(function () {\n        this.setOutlineStroke(parseFloat($(\"input[name='filter_outlinestroke']\").val()))\n      }, figure))\n\n\n    let picker = this.colorPicker = new jscolor.color(document.getElementById('filter_outlinestroke_color'), {})\n    this.colorPicker.fromString(figure.getOutlineColor().hash())\n    this.colorPicker.onImmediateChange = $.proxy(function () {\n      this.setOutlineColor(\"#\" + picker.toString())\n    }, figure)\n\n    $(\"#button_remove_OutlineStrokeFilter\").on(\"click\", () => {\n      figure.removeFilter(this)\n      figure.setOutlineStroke(0)\n      $(\"#\"+this.containerId).animate({\"height\": \"0\", \"opacity\": 0, \"margin-bottom\": 0}, 500, () => {\n        $('#'+this.containerId).remove()\n      })\n    })\n  }\n\n  removePane() {\n    if (this.colorPicker !== null) {\n      this.colorPicker.hidePicker()\n    }\n  }\n\n  onInstall(figure) {\n    figure.setOutlineStroke(1)\n    figure.setOutlineColor(\"#ff0000\")\n  }\n}\n\n\n\n\n","import Filter from \"./Filter\"\n\nexport default shape_designer.filter.PortDirectionFilter = class PortDirectionFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.PortDirectionFilter\")\n  }\n\n  insertPane(figure, $parent) {\n    var _this = this\n    var dir = figure.getConnectionDirection()\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#' + this.cssScope + '_panel\">' +\n      '     Connection Direction' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"' + this.cssScope + '_panel\">' +\n      '   <div class=\"form-group portDirectionOption\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n\n      '<label>' +\n      '  <input ' + (dir === 0 ? ' checked=\"checked\"' : '') + ' type=\"radio\" value=\"\" name=\"' + this.cssScope + '_label\" name=\"' + this.cssScope + '_label\" data-dir=\"0\" />' +\n      '  <span  title=\"up\" class=\"glyphicon glyphicon-arrow-up\"></span>' +\n      '</label>' +\n\n      '<br>' +\n\n      '<label>' +\n      '  <input ' + (dir === 3 ? ' checked=\"checked\"' : '') + 'type=\"radio\" value=\"\" name=\"' + this.cssScope + '_label\" name=\"' + this.cssScope + '_label\" data-dir=\"3\" />' +\n      '  <span  title=\"left\" class=\"glyphicon glyphicon-arrow-left\"></span>' +\n      '</label>' +\n\n      '<label>' +\n      '  <input ' + (dir === null ? ' checked=\"checked\"' : '') + 'type=\"radio\" value=\"\" name=\"' + this.cssScope + '_label\" name=\"' + this.cssScope + '_label\" data-dir=\"null\" />' +\n      '  <span title=\"automatic\" class=\"glyphicon glyphicon-screenshot\"></span>' +\n      '</label>' +\n\n      '<label>' +\n      '  <input ' + (dir === 1 ? ' checked=\"checked\"' : '') + 'type=\"radio\" value=\"\" name=\"' + this.cssScope + '_label\" name=\"' + this.cssScope + '_label\" data-dir=\"1\" />' +\n      '  <span title=\"right\"  class=\"glyphicon glyphicon-arrow-right\"></span>' +\n      '</label>' +\n\n      '<br>' +\n\n      '<label>' +\n      '  <input ' + (dir === 2 ? ' checked=\"checked\"' : '') + 'type=\"radio\" value=\"\" name=\"' + this.cssScope + '_label\" name=\"' + this.cssScope + '_label\" data-dir=\"2\" />' +\n      '  <span  title=\"down\" class=\"glyphicon glyphicon-arrow-down\"></span>' +\n      '</label>' +\n\n\n      '       </div>' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"#\" + _this.cssScope + \"_panel .portDirectionOption input\").on(\"change\", (event) => {\n      figure.setConnectionDirection($(event.currentTarget).data(\"dir\"))\n    })\n  }\n\n  removePane() {\n  }\n\n  onInstall(figure) {\n  }\n\n  getPersistentAttributes(relatedFigure) {\n    var memento = super.getPersistentAttributes(relatedFigure)\n\n    return memento\n  }\n\n  setPersistentAttributes(relatedFigure, memento) {\n    super.setPersistentAttributes(relatedFigure, memento)\n\n    return memento\n  }\n}\n\n\n\n\n","import Filter from \"./Filter\"\n\nexport default shape_designer.filter.PortTypeFilter = class PortTypeFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.PortTypeFilter\")\n  }\n\n  insertPane(figure, $parent) {\n    var _this = this\n    var type = figure.getInputType()\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#' + this.cssScope + '_panel\">' +\n      '     Port Type' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"' + this.cssScope + '_panel\">' +\n      '   <div class=\"form-group portTypeOption\">' +\n\n      '<label>' +\n      '  <input ' + (type == 'Input' ? ' checked=\"checked\"' : '') + 'type=\"radio\" value=\"\" name=\"' + this.cssScope + '_label\" name=\"' + this.cssScope + '_label\" data-type=\"Input\" />' +\n      '  <span  title=\"down\" class=\"icon ion-log-in\">input</span>' +\n      '</label>' +\n      '<br>' +\n      '<label>' +\n      '  <input ' + (type == 'Output' ? ' checked=\"checked\"' : '') + 'type=\"radio\" value=\"\" name=\"' + this.cssScope + '_label\" name=\"' + this.cssScope + '_label\" data-type=\"Output\" />' +\n      '  <span  title=\"down\" class=\"icon ion-log-out\">output</span>' +\n      '</label>' +\n      '<br>' +\n      '<label>' +\n      '  <input ' + (type == 'Hybrid' ? ' checked=\"checked\"' : '') + 'type=\"radio\" value=\"\" name=\"' + this.cssScope + '_label\" name=\"' + this.cssScope + '_label\" data-type=\"Hybrid\" />' +\n      '  <span  title=\"down\" class=\"icon ion-ios-circle-outline\">unspecified</span>' +\n      '</label>' +\n\n      '       </div>' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"#\" + _this.cssScope + \"_panel .portTypeOption input\").on(\"change\", (event) => {\n      figure.setInputType($(event.currentTarget).data(\"type\"))\n    })\n  }\n\n  removePane() {\n  }\n\n  onInstall(figure) {\n  }\n\n  getPersistentAttributes(relatedFigure) {\n    var memento = super.getPersistentAttributes(relatedFigure)\n\n    return memento\n  }\n\n  setPersistentAttributes(relatedFigure, memento) {\n    super.setPersistentAttributes(relatedFigure, memento)\n\n    return memento\n  }\n}\n\n\n\n\n","import Filter from \"./Filter\"\n\nexport default shape_designer.filter.PositionFilter = class PositionFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.PositionFilter\")\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#position_width_panel\">' +\n      '     Position' +\n      '</div>' +\n      ' <div class=\"panel-body  collapse in\" id=\"position_width_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '       <input id=\"filter_position_x\" type=\"text\" value=\"' + parseFloat(figure.getPosition().x) + '\" name=\"filter_position_x\" class=\"mousetrap-pause form-control\" />' +\n      '       <input id=\"filter_position_y\" type=\"text\" value=\"' + parseFloat(figure.getPosition().y) + '\" name=\"filter_position_y\" class=\"mousetrap-pause form-control\" />' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"#filter_position_x\").TouchSpin({\n      min: 0,\n      max: 10000,\n      step: 1,\n      maxboostedstep: 10,\n      postfix: 'X'\n    })\n\n    $(\"#filter_position_y\").TouchSpin({\n      min: 0,\n      max: 10000,\n      step: 1,\n      maxboostedstep: 10,\n      postfix: 'Y'\n    })\n\n    $(\"input[name='filter_position_x']\").on(\"change\", () => {\n      try {\n        this.block = true\n        let pos = figure.getPosition()\n        figure.setPosition(parseFloat($(\"input[name='filter_position_x']\").val()), pos.y)\n      }\n      finally {\n        this.block = false\n      }\n    })\n\n    $(\"input[name='filter_position_y']\").on(\"change\", () => {\n      try {\n        this.block = true\n        let pos = figure.getPosition()\n        figure.setPosition(pos.x, parseFloat($(\"input[name='filter_position_y']\").val()))\n      }\n      finally {\n        this.block = false\n      }\n    })\n  }\n\n  apply(figure, attributes) {\n    if (this.block === true) {\n      return\n    }\n    let pos = figure.getPosition()\n    $(\"input[name='filter_position_y']\").val(pos.y)\n    $(\"input[name='filter_position_x']\").val(pos.x)\n  }\n\n  removePane() {\n  }\n\n  onInstall(figure) {\n  }\n\n}\n\n\n\n\n","import Filter from \"./Filter\"\n\nexport default shape_designer.filter.RadiusFilter = class RadiusFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.RadiusFilter\")\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#radius_panel\">' +\n      '    Corner Radius' +\n      '    <span id=\"button_remove_RadiusFilter\"><img class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/></span>' +\n      '</div>' +\n      ' <div class=\"panel-body collapse in\" id=\"radius_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '      <div class=\"input-group\">' +\n      '         <input class=\"mousetrap-pause form-control\" id=\"filter_radius\" type=\"text\" value=\"' + figure.getRadius() + '\" />' +\n      '      </div>' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"#filter_radius\").TouchSpin({\n      min: 0,\n      max: 200,\n      step: 1,\n      maxboostedstep: 10,\n      postfix: 'px'\n    })\n    $(\"#filter_radius\").on(\"change\", $.proxy(function () {\n      this.setRadius(parseInt($(\"#filter_radius\").val()))\n    }, figure))\n\n    $(\"#button_remove_RadiusFilter\").on(\"click\", () => {\n      figure.removeFilter(this)\n      figure.setRadius(0)\n      $(\"#\"+this.containerId).animate({\"height\": \"0\", \"opacity\": 0, \"margin-bottom\": 0}, 500, () => {\n        $('#'+this.containerId).remove()\n      })\n    })\n  }\n\n  removePane() {\n  }\n}\n\n\n\n\n","import Filter from \"./Filter\"\n\nexport default shape_designer.filter.SizeFilter = class SizeFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.SizeFilter\")\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#size_width_panel\">' +\n      '     Size' +\n      ' </div>' +\n      ' <div class=\"panel-body  collapse in\" id=\"size_width_panel\">' +\n      '   <div class=\"form-group\">' +\n      '       <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '       <input id=\"filter_width\"  type=\"text\" value=\"' + figure.getWidth() + '\"  name=\"filter_width\"  class=\"mousetrap-pause form-control\" />' +\n      '       <input id=\"filter_height\" type=\"text\" value=\"' + figure.getHeight() + '\" name=\"filter_height\" class=\"mousetrap-pause form-control\" />' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"#filter_width\").TouchSpin({\n      min: 0,\n      max: 600,\n      step: 1,\n      maxboostedstep: 10,\n      postfix: 'width'\n    })\n\n    $(\"#filter_height\").TouchSpin({\n      min: 0,\n      max: 600,\n      step: 1,\n      maxboostedstep: 10,\n      postfix: 'height'\n    })\n\n    $(\"input[name='filter_width']\").on(\"change\", () => {\n      try {\n        this.block = true\n        figure.setWidth(parseInt($(\"input[name='filter_width']\").val()))\n      }\n      finally {\n        this.block = false\n      }\n    })\n\n    $(\"input[name='filter_height']\").on(\"change\", () => {\n      try {\n        this.block = true\n        figure.setHeight(parseInt($(\"input[name='filter_height']\").val()))\n      }\n      finally {\n        this.block = false\n      }\n    })\n  }\n\n  apply(figure, attributes) {\n    if (this.block === true) {\n      return\n    }\n\n    $(\"input[name='filter_width']\").val(figure.getWidth())\n    $(\"input[name='filter_height']\").val(figure.getHeight())\n  }\n\n  removePane() {\n  }\n\n  onInstall(figure) {\n  }\n\n}\n\n\n\n\n","import jscolor from \"../widget/jscolor/jscolor\"\n\nimport Filter from \"./Filter\"\n\nexport default shape_designer.filter.StrokeFilter = class StrokeFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.StrokeFilter\")\n  }\n\n  insertPane(figure, $parent) {\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#' + this.cssScope + '_width_panel\">' +\n      '     Stroke' +\n      '    <span id=\"button_remove_' + this.cssScope + '\"><img  class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/></span>' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"' + this.cssScope + '_width_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '       <input id=\"filter_' + this.cssScope + '_width\" type=\"text\" value=\"' + figure.getStroke() + '\" name=\"filter_' + this.cssScope + '_width\" class=\"mousetrap-pause form-control\" />' +\n      '       <div class=\"input-group\">' +\n      '          <span class=\"input-group-addon\">#</span>' +\n      '          <input id=\"filter_' + this.cssScope + '_color\" type=\"text\" value=\"\" name=\"stroke_' + this.cssScope + '_color\" class=\"mousetrap-pause form-control color\"/>' +\n      '       </div>' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $(\"input[name='filter_\" + this.cssScope + \"_width']\").TouchSpin({\n      min: 0,\n      max: 50,\n      step: 1,\n      maxboostedstep: 1,\n      postfix: 'px'\n    })\n    $(\"input[name='filter_\" + this.cssScope + \"_width']\").on(\"change\", $.proxy(function () {\n      this.setStroke(parseInt($(\"input[name='filter_\" + this.cssScope + \"_width']\").val()))\n    }, figure))\n\n    var picker = this.colorPicker = new jscolor.color(document.getElementById('filter_' + this.cssScope + '_color'), {})\n    this.colorPicker.fromString(figure.getColor().hash())\n    this.colorPicker.onImmediateChange = $.proxy(function () {\n      this.setColor(\"#\" + picker.toString())\n    }, figure)\n\n    $(\"#button_remove_\" + this.cssScope).on(\"click\", () => {\n      figure.removeFilter(this)\n      figure.setStroke(0)\n      $(\"#\" + this.containerId ).animate({\"height\": \"0\", \"opacity\": 0, \"margin-bottom\": 0}, 500, () => {\n        $('#' + this.containerId).remove()\n      })\n    })\n  }\n\n  removePane() {\n    if (this.colorPicker !== null) {\n      this.colorPicker.hidePicker()\n    }\n  }\n\n  onInstall(figure) {\n    figure.setStroke(1)\n  }\n\n}\n\n\n\n\n","import jscolor from \"../widget/jscolor/jscolor\"\n\nimport Filter from \"./Filter\"\nimport \"../widget/ui.anglepicker\"\n\nexport default shape_designer.filter.TextLinearGradientFilter = class TextLinearGradientFilter extends Filter {\n\n  constructor() {\n    super(\"shape_designer.filter.TextLinearGradientFilter\")\n    this.colorPicker1 = null\n    this.colorPicker2 = null\n    this.startColor = \"#f0f0f0\"\n    this.endColor = \"#3f3f3f\"\n    this.angle = 0\n  }\n\n  insertPane(figure, $parent) {\n\n    $parent.append('<div id=\"' + this.containerId + '\" class=\"panel panel-default\">' +\n      ' <div class=\"panel-heading filter-heading\" data-toggle=\"collapse\" data-target=\"#' + this.cssScope + '_panel\">' +\n      '     Linear Gradient' +\n      '    <span id=\"button_remove_' + this.cssScope + '\"><img  class=\"svg icon pull-right\" src=\"./images/dialog_close.svg\"/></span>' +\n      '</div>' +\n\n      ' <div class=\"panel-body collapse in\" id=\"' + this.cssScope + '_panel\">' +\n      '   <div class=\"form-group\">' +\n      '      <div class=\"input-group\" ></div> ' + // required to ensure the correct width of the siblings\n      '      <div class=\"input-group text-center\" style=\"width:100%\" >' +\n      '           <div id=\"' + this.cssScope + '_angle\" />' +\n      '      </div> ' +\n      '       <div class=\"input-group\">' +\n      '          <span class=\"input-group-addon\">#</span>' +\n      '          <input id=\"' + this.cssScope + '_color1\" type=\"text\" value=\"' + this.startColor + '\" class=\"mousetrap-pause form-control color\"/>' +\n      '       </div>' +\n      '       <div class=\"input-group\">' +\n      '          <span class=\"input-group-addon\">#</span>' +\n      '          <input id=\"' + this.cssScope + '_color2\" type=\"text\" value=\"' + this.endColor + '\" class=\"mousetrap-pause form-control color\"/>' +\n      '       </div>' +\n      '   </div>' +\n      ' </div>' +\n      '</div>')\n    inlineSVG.init({svgSelector:\"#\"+this.containerId + \" img.svg\"})\n\n    $('#' + this.cssScope + '_angle').anglepicker({\n      start: (e, ui) => {\n      },\n      change: (e, ui) => {\n        this.angle = ui.value\n        figure.repaint()\n      },\n      stop: (e, ui) => {\n      },\n      value: this.angle\n    })\n\n    var picker1 = this.colorPicker1 = new jscolor.color($(\"#\" + this.cssScope + '_color1')[0], {})\n    this.colorPicker1.fromString(this.startColor)\n    this.colorPicker1.onImmediateChange = () => {\n      this.startColor = \"#\" + picker1.toString()\n      figure.repaint()\n    }\n\n    var picker2 = this.colorPicker2 = new jscolor.color($(\"#\" + this.cssScope + '_color2')[0], {})\n    this.colorPicker2.fromString(this.endColor)\n    this.colorPicker2.onImmediateChange = () => {\n      this.endColor = \"#\" + picker2.toString()\n      figure.repaint()\n    }\n\n\n    $(\"#button_remove_\" + this.cssScope).on(\"click\", () => {\n      figure.removeFilter(this)\n      $('#' + this.containerId).animate({\n        \"height\": \"0\",\n        \"opacity\": 0,\n        \"margin-bottom\": 0\n      }, 500, () => {\n        $('#' + this.containerId ).remove()\n      })\n    })\n  }\n\n  apply(figure, attributes, lattr) {\n    lattr.fill = this.angle + \"-\" + this.endColor + \"-\" + this.startColor\n  }\n\n  removePane() {\n    if (this.colorPicker1 !== null) {\n      this.colorPicker1.hidePicker()\n    }\n    if (this.colorPicker2 !== null) {\n      this.colorPicker2.hidePicker()\n    }\n  }\n\n  onInstall(figure) {\n  }\n\n  getPersistentAttributes(relatedFigure) {\n    let memento = super.getPersistentAttributes(relatedFigure)\n\n    memento.startColor = this.startColor\n    memento.endColor = this.endColor\n    memento.angle = this.angle\n\n    return memento\n  }\n\n  setPersistentAttributes(relatedFigure, memento) {\n    super.setPersistentAttributes(relatedFigure, memento)\n\n    this.startColor = memento.startColor\n    this.endColor = memento.endColor\n    this.angle = memento.angle\n\n    return memento\n  }\n}\n\n\n\n\n","// required to register them for JSON serialize/deserialize\n//\nexport default [\n  require(\"./BlurFilter\"),\n  require(\"./FanoutFilter\"),\n  require(\"./FillColorFilter\"),\n  require(\"./Filter\"),\n  require(\"./FontColorFilter\"),\n  require(\"./FontSizeFilter\"),\n  require(\"./LinearGradientFilter\"),\n  require(\"./OpacityFilter\"),\n  require(\"./OutlineStrokeFilter\"),\n  require(\"./PortDirectionFilter\"),\n  require(\"./PortTypeFilter\"),\n  require(\"./PositionFilter\"),\n  require(\"./RadiusFilter\"),\n  require(\"./SizeFilter\"),\n  require(\"./StrokeFilter\"),\n  require(\"./TextLinearGradientFilter\")\n]\n","\nimport DecoratedInputPort from \"./figure/DecoratedInputPort\"\nimport CircuitFigure from \"./figure/CircuitFigure\"\nimport Mousetrap from \"mousetrap\"\nimport \"./util/mousetrap-global\"\nimport \"./util/mousetrap-pause\"\nimport hardware from \"./Hardware\"\nimport inlineSVG from \"../lib/inlineSVG\"\nimport LabelInplaceEditor from './LabelInplaceEditor'\n\nexport default {\n  hardware,\n  DecoratedInputPort,\n  LabelInplaceEditor,\n  Mousetrap,\n  CircuitFigure,\n  inlineSVG\n}\n","\nimport \"../less/index.less\"\nimport \"font-awesome/css/font-awesome.css\"\nimport global from \"./global\"\nimport conf from \"./Configuration\"\n\n//require('webpack-jquery-ui/css');  //ommit, if you don't want to load basic css theme\n\n// Resolve name collision between jQuery UI and Twitter Bootstrap\n/*** Handle jQuery plugin naming conflict between jQuery UI and Bootstrap ***/\n$.widget.bridge('uibutton', $.ui.button)\n$.widget.bridge('uitooltip', $.ui.tooltip)\n\n\n\n\nimport \"./figure/index\"\nimport \"./filter/index\"\n\n// required to be compatible with jquery.layout and jquery.handsontable\n//\njQuery.uaMatch = function (ua) {\n  ua = ua.toLowerCase()\n  var match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\n    /(webkit)[ \\/]([\\w.]+)/.exec(ua) ||\n    /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) ||\n    /(msie) ([\\w.]+)/.exec(ua) ||\n    ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\n    []\n  return {\n    browser: match[1] || \"\",\n    version: match[2] || \"0\"\n  }\n}\nif (!jQuery.browser) {\n  let matched = jQuery.uaMatch(navigator.userAgent)\n  let browser = {}\n  if (matched.browser) {\n    browser[matched.browser] = true\n    browser.version = matched.version\n  }\n// Chrome is Webkit, but Webkit is also Safari.\n  if (browser.chrome) {\n    browser.webkit = true\n  } else if (browser.webkit) {\n    browser.safari = true\n  }\n  jQuery.browser = browser\n}\n\n\nimport Application from \"./Application\"\n\n$(window).load(function () {\n\n  // export all required classes for deserialize JSON with \"eval\"\n  // \"eval\" code didn't sees imported class or code\n  //\n  for(var k in global) window[k]=global[k];\n\n  socket = io({\n      path: '/socket.io'\n    })\n\n  // remove the fileOpen/Save stuff if we run in a \"serverless\" mode. e.g. on gh-pages\n  // (fake event from the socket.io mock )\n  //\n  socket.on(\"serverless\", () => {\n    conf.serverless =true\n    conf.backend.file.get = file => `./shapes/${file}`\n  });\n\n  socket.on(\"connect\", () => {\n    app = shape_designer.app = new Application()\n  });\n\n\n})\n","import conf from '../Configuration'\n\nexport default class BackendStorage{\n\n  /**\n   * @constructor\n   *\n   */\n  constructor() {\n    this.fileName = \"\"\n    Object.preventExtensions(this);\n  }\n\n  get currentDir(){\n    return this.dirname(this.dirname())\n  }\n\n  get currentFile(){\n    return this.fileName\n  }\n\n  set currentFile(name){\n    this.fileName=name;\n\n    let url = window.location.href.split('?')[0] + '?file=' + name\n    history.pushState(\n      { id: 'editor', file: name },\n      'Brainbox Designer ' + name,\n      url)\n  }\n\n  getFiles(path){\n      return $.ajax({\n        url: conf.backend.file.list,\n        xhrFields: {\n          withCredentials: true\n        },\n        data: {\n          path\n        }\n      }).then( (response)=>{\n        // happens in \"serverless\" mode on the gh-pages/docs installation\n        //\n        if (typeof response === \"string\")\n          response = JSON.parse(response)\n\n        let files = response.files\n        // sort the result\n        // Directories are always on top\n        //\n        files.sort(function (a, b) {\n          if (a.type === b.type) {\n            if (a.name.toLowerCase() < b.name.toLowerCase())\n              return -1\n            if (a.name.toLowerCase() > b.name.toLowerCase())\n              return 1\n            return 0\n          }\n          if (a.type === \"dir\") {\n            return -1\n          }\n          return 1\n        })\n        return files;\n      })\n  }\n\n  saveFile(json, imageDataUrl, fileName){\n    return $.ajax({\n        url: conf.backend.file.save,\n        method: \"POST\",\n        xhrFields: {\n          withCredentials: true\n        },\n        data: {\n          filePath: fileName,\n          content: JSON.stringify({draw2d: json, image: imageDataUrl}, undefined, 2)\n        }\n      }\n    )\n  }\n\n  /**\n   * Load the file content of the given path\n   *\n   * @param fileName\n   * @returns {*}\n   */\n  loadFile(fileName){\n    return $.ajax({\n      url: conf.backend.file.get(fileName),\n      xhrFields: {\n        withCredentials: true\n      }\n    })\n      .fail(function(error) {\n        console.log(arguments)\n      })\n      .then((response)=>{\n        // happens in \"serverless\" mode on the gh-pages/docs installation\n        //\n        if (typeof response === \"string\")\n          response = JSON.parse(response)\n\n        if(response.draw2d)\n        return response.draw2d\n      return response\n    })\n  }\n\n  dirname(path) {\n    if (path===undefined || path===null || path.length === 0)\n      return null\n\n    var segments = path.split(\"/\")\n    if (segments.length <= 1)\n      return null\n\n    segments = segments.filter(n => n != \"\")\n    path = segments.slice(0, -1).join(\"/\")\n    return (path === \"\") ? null : path + \"/\"\n\n  }\n\n  basename(path) {\n    if(path === null || path===\"\" || path === undefined){\n      return null;\n    }\n    return path.split(/[\\\\/]/).pop()\n  }\n\n}\n","import Hogan from \"hogan.js\"\n\nexport default shape_designer.FigureWriter = draw2d.io.Writer.extend({\n\n  init: function () {\n    this._super()\n  },\n\n  /**\n   * @method\n   * Export the content to the implemented data format. Inherit class implements\n   * content specific writer.\n   * <br>\n   * <br>\n   *\n   * Method signature has been changed from version 2.10.1 to version 3.0.0.<br>\n   * The parameter <b>resultCallback</b> is required and new. The method calls\n   * the callback instead of return the result.\n   *\n   * @param {draw2d.Canvas} canvas\n   * @parma {String} className\n   * @param {Function} resultCallback the method to call on success. The first argument is the result object, the second the base64 representation of the file content\n   */\n  marshal: function (canvas, className, resultCallback) {\n    var baseClass = shape_designer.app.getConfiguration(\"baseClass\")\n    var customCode =  shape_designer.app.getConfiguration(\"code\")\n    customCode = customCode.replace(/testShape/g, className);\n\n    var figures = canvas.getExtFigures()\n    var b = canvas.getBoundingBox()\n\n    var x = b.x\n    var y = b.y\n\n    var ports = []\n    var shapes = []\n\n    shapes.push({\n      constructor: 'this.canvas.paper.path(\"M0,0 L' + (b.w) + ',0 L' + (b.w) + ',' + (b.h) + ' L0,' + (b.h) + '\")',\n      attr: '{\"stroke\":\"none\",\"stroke-width\":0,\"fill\":\"none\"}',\n      name: \"BoundingBox\"\n    })\n\n    figures.each(function (i, figure) {\n      figure.uninstallEditPolicy(\"draw2d.policy.figure.RegionEditPolicy\")\n      var attr = {}\n      figure.svgPathString = null\n      figure.translate(-x, -y)\n      // paint the element and fill the \"attr\" object with the current\n      // settings\n      figure.repaint(attr)\n      delete attr.path\n      delete attr.x\n      delete attr.y\n      if ((figure instanceof shape_designer.figure.ExtPolygon)) {\n        shapes.push({\n          constructor: \"this.canvas.paper.path('\" + figure.svgPathString + \"')\",\n          attr: JSON.stringify(attr),\n          extra: figure.getBlur() === 0 ? \"\" : \"shape.blur(\" + figure.getBlur() + \");\\n\",\n          name: figure.getUserData().name\n        })\n      } else if ((figure instanceof shape_designer.figure.PolyCircle)) {\n        shapes.push({\n          constructor: \"this.canvas.paper.ellipse()\",\n          attr: JSON.stringify(attr),\n          extra: figure.getBlur() === 0 ? \"\" : \"shape.blur(\" + figure.getBlur() + \");\\n\",\n          name: figure.getUserData().name\n        })\n      } else if ((figure instanceof shape_designer.figure.ExtLine)) {\n        // drop shadow\n        shapes.push({\n          constructor: \"this.canvas.paper.path('\" + figure.svgPathString + \"')\",\n          attr: JSON.stringify($.extend({}, attr, {\n            \"stroke-width\": attr[\"stroke-width\"] + figure.getOutlineStroke(),\n            \"stroke\": figure.getOutlineColor().hash()\n          })),\n          extra: figure.getBlur() === 0 ? \"\" : \"shape.blur(\" + figure.getBlur() + \");\\n\",\n          name: figure.getUserData().name + \"_shadow\"\n        })\n\n        // the line itself\n        shapes.push({\n          constructor: \"this.canvas.paper.path('\" + figure.svgPathString + \"')\",\n          attr: JSON.stringify(attr),\n          extra: figure.getBlur() === 0 ? \"\" : \"shape.blur(\" + figure.getBlur() + \");\\n\",\n          name: figure.getUserData().name\n        })\n      } else if (figure instanceof shape_designer.figure.ExtLabel) {\n        attr = figure.svgNodes[0].attr()\n        attr.x = attr.x + figure.getAbsoluteX()\n        attr.y = attr.y + figure.getAbsoluteY()\n        delete attr.transform\n        shapes.push({\n          constructor: \"this.canvas.paper.text(0,0,'\" + figure.getText() + \"')\",\n          attr: JSON.stringify(attr),\n          extra: \"\",\n          name: figure.getUserData().name\n        })\n      } else if (figure instanceof shape_designer.figure.ExtPort) {\n        ports.push({\n          type: figure.getInputType() === \"Input\" ? \"new DecoratedInputPort()\" : '\"' + figure.getInputType().toLowerCase() + '\"',\n          method: figure.getInputType() === \"Input\" ? \"addPort\" : 'createPort',\n          direction: figure.getConnectionDirection(),\n          x: 100 / b.w * figure.getCenter().x,\n          y: 100 / b.h * figure.getCenter().y,\n          color: figure.getBackgroundColor().hash(),\n          name: figure.getUserData().name,\n          fanout: figure.getMaxFanOut()\n        })\n      }\n      figure.translate(x, y)\n    })\n\n    var template = $(\"#shape-base-template\").text().trim()\n\n    var tags = className.split(\"_\")\n    var compiled = Hogan.compile(template)\n    var tooltip= tags.length>0?tags.slice(-1)[0]:name;\n    tooltip = tooltip.split(/\\s*(?=[A-Z][a-z])/).join(\" \")\n    var output = compiled.render({\n      tooltip: tooltip,\n      className: className,\n      baseClass: baseClass,\n      figures: shapes,\n      ports: ports,\n      width: b.w,\n      height: b.h\n    })\n\n    output = output + \"\\n\\n\" + customCode\n    resultCallback(output, draw2d.util.Base64.encode(output))\n  }\n})\n","import AbstractToolPolicy from \"./AbstractToolPolicy\"\n\nconst jsts = require(\"jsts/dist/jsts\")\n\n/* jshint evil: true */\nexport default AbstractToolPolicy.extend({\n\n  init: function () {\n    this._super()\n    this.firstFigure = null\n    this.operation = null\n  },\n\n\n  onInstall: function (canvas) {\n    this.setToolHeader(\"\")\n    this.setToolMessage(\"Select first figure..\")\n  },\n\n  select: function (canvas, figure) {\n\n    if (canvas.getSelection().getAll().contains(figure)) {\n      return // nothing to to\n    }\n\n    // check if the element an valid polygon. otherwise an boolean operation\n    // isn't possible\n    if (!(figure instanceof shape_designer.figure.ExtPolygon)) {\n      return\n    }\n\n    if (canvas.getSelection().getPrimary() !== null) {\n      this.unselect(canvas, canvas.getSelection().getPrimary())\n    }\n\n    if (figure !== null) {\n      figure.select(true) // primary selection\n    }\n\n    canvas.getSelection().setPrimary(figure)\n\n    // inform all selection listeners about the new selection.\n    //\n    canvas.fireEvent(\"select\", {figure: figure})\n  },\n\n\n  execute: function (canvas, firstFigure, figure) {\n    if (firstFigure instanceof draw2d.util.ArrayList) {\n      if (firstFigure.getSize() < 2) {\n        return // silently\n      }\n      figure = firstFigure.get(1)\n      firstFigure = firstFigure.get(0)\n    }\n    this.executeGeometryOperation(canvas, firstFigure, figure, this.operation)\n  },\n\n  executeGeometryOperation: function (canvas, figure1, figure2, operationFunc) {\n    var p1 = this.getGeometry(figure1)\n    var p2 = this.getGeometry(figure2)\n    var union = eval(\"p1.\" + operationFunc + \"(p2)\")\n    var geo = new jsts.io.GeoJSONWriter().write(union)\n    var memento = figure1.getPersistentAttributes()\n    var cmd = new draw2d.command.CommandCollection()\n    cmd.add(new draw2d.command.CommandDelete(figure1))\n    cmd.add(new draw2d.command.CommandDelete(figure2))\n    $.each(geo.coordinates, $.proxy(function (i, poly) {\n      var figure = new shape_designer.figure.ExtPolygon()\n      figure.setPersistentAttributes(memento)\n      figure.vertices = new draw2d.util.ArrayList()\n      $.each(poly, function (i, vertex) {\n        figure.addVertex(vertex[0], vertex[1])\n      })\n      var command = new draw2d.command.CommandAdd(canvas, figure, figure.getX(), figure.getY())\n      cmd.add(command)\n    }, this))\n    canvas.getCommandStack().execute(cmd)\n    this.executed()\n  },\n\n  getGeometry: function (figure) {\n    var reader = new jsts.io.WKTReader()\n    var v = figure.getVertices().clone().asArray()\n    v.push(v[0])\n    return reader.read(\"POLYGON((\" + $.map(v, function (e) {\n      return e.x + \" \" + e.y\n    }).join(\", \") + \"))\")\n  }\n\n})\n\n\n\n\n","export default draw2d.policy.canvas.SelectionPolicy.extend({\n\n  init: function () {\n    this._super()\n  },\n\n  setToolText: function (message) {\n    $('#currentTool_message').fadeOut(200, function () {\n      $(\"#currentTool_message\").html(message)\n      $('#currentTool_message').fadeIn(200)\n    })\n  },\n\n  executed: function(){\n  }\n})\n\n\n\n\n","import AbstractToolPolicy from \"./AbstractToolPolicy\"\n\nimport cursor from \"../../images/cursors/cursor_circle.png\"\n\nexport default AbstractToolPolicy.extend({\n\n  TITLE: \"Circle\",\n\n  init: function () {\n    this._super()\n\n    this.center = null\n    this.boundingBoxFigure1 = null\n    this.boundingBoxFigure2 = null\n  },\n\n\n  onInstall: function (canvas) {\n    canvas.setCursor(cursor)\n  },\n\n  onUninstall: function (canvas) {\n    if (this.boundingBoxFigure1 !== null) {\n      this.boundingBoxFigure1.setCanvas(null)\n      this.boundingBoxFigure1 = null\n      this.boundingBoxFigure2.setCanvas(null)\n      this.boundingBoxFigure2 = null\n    }\n    canvas.setCursor(null)\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n    this.center = new draw2d.geo.Point(x, y)\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} dx The x diff between start of dragging and this event\n   * @param {Number} dy The y diff between start of dragging and this event\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @template\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    let r = Math.sqrt(dx * dx + dy * dy)\n    if (this.boundingBoxFigure1 !== null) {\n      this.boundingBoxFigure1.setRadius(Math.abs(r))\n      this.boundingBoxFigure2.setRadius(Math.abs(r))\n    }\n    else {\n      this.boundingBoxFigure1 = new draw2d.shape.basic.Circle({radius: 1})\n      this.boundingBoxFigure1.setCenter(this.center)\n      this.boundingBoxFigure1.setCanvas(canvas)\n      this.boundingBoxFigure1.setBackgroundColor(\"#333333\")\n      this.boundingBoxFigure1.setAlpha(0.1)\n\n      this.boundingBoxFigure2 = new draw2d.shape.basic.Circle({radius: 1})\n      this.boundingBoxFigure2.setCenter(this.center)\n      this.boundingBoxFigure2.setCanvas(canvas)\n      this.boundingBoxFigure2.setStroke(1)\n      this.boundingBoxFigure2.setColor(new draw2d.util.Color(\"#333333\"))\n      this.boundingBoxFigure2.setBackgroundColor(null)\n    }\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @template\n   */\n  onMouseUp: function (canvas, x, y) {\n    let dx = Math.abs(this.center.x - x)\n    let dy = Math.abs(this.center.y - y)\n    let r = Math.sqrt(dx * dx + dy * dy)\n    if (r > 3) {\n      let circle = new shape_designer.figure.PolyCircle(this.center, r)\n      let command = new draw2d.command.CommandAdd(canvas, circle, circle.getX(), circle.getY())\n      canvas.getCommandStack().execute(command)\n      canvas.setCurrentSelection(circle)\n    }\n\n    this.center = null\n    if (this.boundingBoxFigure1 !== null) {\n      this.boundingBoxFigure1.setCanvas(null)\n      this.boundingBoxFigure1 = null\n      this.boundingBoxFigure2.setCanvas(null)\n      this.boundingBoxFigure2 = null\n    }\n    this.executed()\n  }\n})\n\n\n\n\n","import AbstractGeoToolPolicy from \"./AbstractGeoToolPolicy\"\n\n\n\nexport default AbstractGeoToolPolicy.extend({\n\n  init: function () {\n    this._super()\n    this.operation = \"difference\"\n  },\n\n\n  onInstall: function (canvas) {\n    this.setToolText(\"Select polygon to subtract from\")\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n    let figure = canvas.getBestFigure(x, y)\n\n    // check if the user click on a child shape. DragDrop and movement must redirect\n    // to the parent\n    // Exception: Port's\n    while ((figure !== null && figure.getParent() !== null) && !(figure instanceof draw2d.Port)) {\n      figure = figure.getParent()\n    }\n\n    if (figure !== canvas.getSelection().getPrimary() && figure !== null && figure.isSelectable() === true) {\n      if (this.firstFigure === null) {\n        this.firstFigure = figure\n        this.select(canvas, figure)\n        this.setToolText(\"Select polygon to subtract\")\n      }\n      else {\n        this.execute(canvas, this.firstFigure, figure)\n        this.firstFigure = null\n        this.setToolText(\"Select polygon to subtract from\")\n      }\n    }\n  }\n})\n\n\n\n\n","import AbstractGeoToolPolicy from \"./AbstractGeoToolPolicy\"\n\n\nexport default AbstractGeoToolPolicy.extend({\n\n  init: function () {\n    this._super()\n    this.operation = \"intersection\"\n  },\n\n\n  onInstall: function (canvas) {\n    this.setToolText(\"Select polygon to intersect with\")\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n\n    var figure = canvas.getBestFigure(x, y)\n\n    // check if the user click on a child shape. DragDrop and movement must redirect\n    // to the parent\n    // Exception: Port's\n    while ((figure !== null && figure.getParent() !== null) && !(figure instanceof draw2d.Port)) {\n      figure = figure.getParent()\n    }\n\n    if (figure !== canvas.getSelection().getPrimary() && figure !== null && figure.isSelectable() === true) {\n      if (this.firstFigure === null) {\n        this.firstFigure = figure\n        this.select(canvas, figure)\n        this.setToolText(\"Select polygon to intersect\")\n      }\n      else {\n        this.execute(canvas, this.firstFigure, figure)\n        this.firstFigure = null\n        this.setToolText(\"Select polygon to intersect with\")\n      }\n    }\n  }\n\n\n})\n\n\n\n\n","import AbstractGeoToolPolicy from \"./AbstractGeoToolPolicy\"\n\nexport default AbstractGeoToolPolicy.extend({\n\n  init: function () {\n    this._super()\n    this.operation = \"union\"\n  },\n\n\n  onInstall: function (canvas) {\n    this.setToolText(\"Select polygon to add to..\")\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n\n    var figure = canvas.getBestFigure(x, y)\n\n    // check if the user click on a child shape. DragDrop and movement must redirect\n    // to the parent\n    // Exception: Port's\n    while ((figure !== null && figure.getParent() !== null) && !(figure instanceof draw2d.Port)) {\n      figure = figure.getParent()\n    }\n\n    if (figure !== canvas.getSelection().getPrimary() && figure !== null && figure.isSelectable() === true) {\n      if (this.firstFigure === null) {\n        this.firstFigure = figure\n        this.select(canvas, figure)\n        this.setToolText(\"Select polygon to merge\")\n      }\n      else {\n        this.execute(canvas, this.firstFigure, figure)\n        this.firstFigure = null\n        this.setToolText(\"Select polygon to add to\")\n      }\n    }\n  }\n})\n\n\n\n\n","import AbstractToolPolicy from \"./AbstractToolPolicy\"\n\nimport cursor from \"../../images/cursors/cursor_line.png\"\n\nexport default AbstractToolPolicy.extend({\n\n  MESSAGE_STEP1: \"Select start point of the line.\",\n  MESSAGE_STEP2: \"Click to add additional vertex.<br>Double click to finish line.\",\n\n  init: function () {\n    this._super()\n\n    this.lineFigure = null\n    this.canvas = null\n  },\n\n\n  onInstall: function (canvas) {\n    this.setToolText(this.MESSAGE_STEP1)\n    this.canvas = canvas\n    canvas.setCursor(cursor)\n  },\n\n  onUninstall: function (canvas) {\n    if (this.lineFigure !== null) {\n      if (this.lineFigure.getVertices().getSize() < 2) {\n        canvas.remove(this.lineFigure)\n        this.lineFigure = null\n      }\n      else {\n        // stay in the canvas and finalize the stroke if a doubleClick\n        let last = this.lineFigure.vertices.last()\n        this.onDoubleClick(this.lineFigure, last.x, last.y, false, false)\n      }\n    }\n    this.canvas = null\n    canvas.setCursor(null)\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @template\n   */\n  onMouseMove: function (canvas, x, y) {\n\n    if (this.lineFigure !== null) {\n      this.lineFigure.setEndPoint(x, y)\n    }\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} dx The x diff between start of dragging and this event\n   * @param {Number} dy The y diff between start of dragging and this event\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @template\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2) {\n  },\n\n\n  onDoubleClick: function (figure, x, y, shiftKey, ctrlKey) {\n    this.onClick(figure, x, y, shiftKey, ctrlKey)\n\n    // Remove duplicate points at the end of the polyLine. This happens during the DoubleClick.\n    // Reason: before the double click is fired the two \"single click\" comes before. In this case we\n    // added three vertex for a doubleClick event\n    //\n\n    // don't use the shortcut and assign the this.lineFigure.vertices to a local var.\n    // the vertices are recreated in the \"calculatePath\" mnethod of the polygon and\n    // the reference is in this case invalid...design flaw!\n    //\n    let last = this.lineFigure.vertices.last()\n    let beforeLast = this.lineFigure.vertices.get(this.lineFigure.vertices.getSize() - 2)\n    while (last.equals(beforeLast)) {\n      this.lineFigure.removeVertexAt(this.lineFigure.vertices.getSize() - 2)\n      beforeLast = this.lineFigure.vertices.get(this.lineFigure.vertices.getSize() - 2)\n    }\n\n    this.lineFigure = null\n    this.executed()\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   */\n  onClick: function (figure, x, y, shiftKey, ctrlKey) {\n    if (this.lineFigure === null) {\n      this.setToolText(this.MESSAGE_STEP2)\n\n      this.lineFigure = new shape_designer.figure.ExtLine()\n      this.lineFigure.setStartPoint(x, y)\n      this.lineFigure.setEndPoint(x, y)\n      let command = new draw2d.command.CommandAdd(this.canvas, this.lineFigure, x, y)\n      this.canvas.getCommandStack().execute(command)\n      this.canvas.setCurrentSelection(this.lineFigure)\n    }\n    else {\n      this.lineFigure.addVertex(x, y)\n    }\n  }\n})\n\n\n\n\n","import SelectionToolPolicy from \"./SelectionToolPolicy\"\n\nimport cursor from \"../../images/cursors/cursor_port.png\"\n\nexport default SelectionToolPolicy.extend({\n\n  TITLE: \"Port\",\n  MESSAGE_STEP1: \"Select location to add port.<br>Click on port to move.\",\n\n  init: function () {\n    this._super()\n  },\n\n\n  onInstall: function (canvas) {\n    this.setToolText(this.MESSAGE_STEP1)\n    canvas.setCursor(cursor)\n  },\n\n  onUninstall: function (canvas) {\n    canvas.setCursor(null)\n  },\n\n\n  select: function (canvas, figure) {\n    // check if the element an valid polygon. otherwise an boolean operation\n    // isn't possible\n    if (!(figure instanceof shape_designer.figure.ExtPort)) {\n      return\n    }\n\n    this._super(canvas, figure)\n  },\n\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n    let figure = canvas.getBestFigure(x, y)\n\n    if (figure === null || figure instanceof shape_designer.figure.ExtPort) {\n      this._super(canvas, x, y, shiftKey, ctrlKey)\n    }\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @template\n   */\n  onMouseUp: function (canvas, x, y) {\n\n    if (this.mouseDownElement === null || !(this.mouseDownElement instanceof shape_designer.figure.ExtPort)) {\n      let command = new draw2d.command.CommandAdd(canvas, new shape_designer.figure.ExtPort(), x, y)\n      canvas.getCommandStack().execute(command)\n      canvas.setCurrentSelection(command.figure)\n      this.executed()\n    }\n    else {\n      this._super(canvas, x, y)\n    }\n  }\n})\n\n\n\n\n","import PolyRect from \"../figure/PolyRect\"\nimport AbstractToolPolicy from \"./AbstractToolPolicy\"\nimport cursor from \"../../images/cursors/cursor_rectangle.png\"\n\nexport default AbstractToolPolicy.extend({\n\n  init: function () {\n    this._super()\n\n    this.topLeftPoint = null\n    this.boundingBoxFigure1 = null\n    this.boundingBoxFigure2 = null\n  },\n\n\n  onInstall: function (canvas) {\n    this.setToolText(\"Select first corner of rectangle\")\n    canvas.setCursor(cursor)\n  },\n\n  onUninstall: function (canvas) {\n    if (this.boundingBoxFigure1 !== null) {\n      this.boundingBoxFigure1.setCanvas(null)\n      this.boundingBoxFigure1 = null\n      this.boundingBoxFigure2.setCanvas(null)\n      this.boundingBoxFigure2 = null\n    }\n    canvas.setCursor(null)\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n    this.topLeftPoint = new draw2d.geo.Point(x, y)\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} dx The x diff between start of dragging and this event\n   * @param {Number} dy The y diff between start of dragging and this event\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @template\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n\n    if (this.boundingBoxFigure1 === null) {\n      this.boundingBoxFigure1 = new draw2d.shape.basic.Rectangle({\n        width: 1,\n        height: 1,\n        x: this.topLeftPoint.x,\n        y: this.topLeftPoint.y,\n        bgColor: \"#d4d1d4\",\n        alpha: 0.1\n      });\n      this.boundingBoxFigure1.setCanvas(canvas);\n\n      this.boundingBoxFigure2 = new draw2d.shape.basic.Rectangle({\n        width: 1,\n        height: 1,\n        x: this.topLeftPoint.x,\n        y: this.topLeftPoint.y,\n        dash: \"--..\",\n        stroke: 0.5,\n        color: \"#37a8ff\",\n        bgColor: null\n      });\n      this.boundingBoxFigure2.setCanvas(canvas);\n    }\n\n    if (this.boundingBoxFigure1 !== null) {\n      this.boundingBoxFigure1.setDimension(Math.abs(dx), Math.abs(dy));\n      this.boundingBoxFigure1.setPosition(this.topLeftPoint.x + Math.min(0, dx), this.topLeftPoint.y + Math.min(0, dy));\n      this.boundingBoxFigure2.setDimension(Math.abs(dx), Math.abs(dy));\n      this.boundingBoxFigure2.setPosition(this.topLeftPoint.x + Math.min(0, dx), this.topLeftPoint.y + Math.min(0, dy));\n    }\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @template\n   */\n  onMouseUp: function (canvas, x, y) {\n    if (this.boundingBoxFigure1 !== null) {\n      this.boundingBoxFigure1.setCanvas(null);\n      this.boundingBoxFigure1 = null;\n      this.boundingBoxFigure2.setCanvas(null);\n      this.boundingBoxFigure2 = null;\n    }\n\n    let bottomRight = new draw2d.geo.Point(x, y)\n    if (this.topLeftPoint.distance(bottomRight) > 3) {\n      let rect = new PolyRect(this.topLeftPoint, bottomRight)\n      let command = new draw2d.command.CommandAdd(canvas, rect, rect.getX(), rect.getY())\n      canvas.getCommandStack().execute(command)\n      canvas.setCurrentSelection(rect)\n    }\n    this.executed()\n    this.topLeftPoint = null\n  }\n})\n\n\n\n\n","\nexport default draw2d.policy.canvas.BoundingboxSelectionPolicy.extend({\n\n  init: function () {\n    this._super()\n  },\n\n  onInstall: function (canvas) {\n    this.setToolText(\"Click on shape to select<br>Double click to edit\")\n  },\n\n\n  setToolHeader: function (heading, icon) {\n    $(\"#currentTool_image\").attr({\"src\": icon})\n    $(\"#currentTool_heading\").text(heading)\n  },\n\n  setToolText: function (message) {\n    $(\"#currentTool_message\").html(message)\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n    this.cloneOnDrag = shiftKey\n    this._super(canvas, x, y, shiftKey, ctrlKey)\n  },\n\n  /**\n   * Copy the selected figure if the user start dragging the selection.\n   *\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2) {\n    if (!((this.mouseDraggingElement instanceof draw2d.ResizeHandle) || (this.mouseDraggingElement instanceof draw2d.Port))) {\n      if (this.cloneOnDrag === true && this.mouseDraggingElement !== null) {\n        // get the current position of the selected shape\n        var pos = this.mouseDraggingElement.getPosition()\n\n        // cancel the current drag&drop operation\n        this.mouseDraggingElement.onDragEnd(pos.x, pos.y, false, false)\n        this.mouseDraggingElement.unselect()\n\n        // clone the selection\n        this.mouseDraggingElement = this.mouseDraggingElement.clone()\n        // add the clone to the canvas and start dragging of the clone\n        canvas.add(this.mouseDraggingElement, pos)\n\n        // select the cloned shape\n        this.select(canvas, this.mouseDraggingElement)\n\n        // start dragging if the clone accept this operation\n        this.mouseDraggingElement.onDragStart(pos.x, pos.y, false, false)\n      }\n    }\n    this.cloneOnDrag = false\n    this._super(canvas, dx, dy, dx2, dy2)\n  }\n})\n","import AbstractToolPolicy from \"./AbstractToolPolicy\"\n\nimport cursor from \"../../images/cursors/cursor_text.png\"\n\nexport default AbstractToolPolicy.extend({\n\n  TITLE: \"Text\",\n  MESSAGE_STEP1: \"Select location for text\",\n  MESSAGE_STEP2: \"Enter Text\",\n\n  init: function () {\n    this._super()\n\n    this.topLeft = null\n    this.newFigure = null\n  },\n\n\n  onInstall: function (canvas) {\n    this.setToolText(this.MESSAGE_STEP1)\n    canvas.setCursor(cursor)\n  },\n\n  onUninstall: function (canvas) {\n    canvas.setCursor(null)\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @template\n   */\n  onMouseMove: function (canvas, x, y) {\n  },\n\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} dx The x diff between start of dragging and this event\n   * @param {Number} dy The y diff between start of dragging and this event\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @template\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2) {\n  },\n\n  /**\n   * @method\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @template\n   */\n  onMouseUp: function (canvas, x, y) {\n    if (this.topLeft === null) {\n      this.topLeft = new draw2d.geo.Point(x, y)\n      this.setToolText(this.MESSAGE_STEP2)\n\n      this.newFigure = new shape_designer.figure.ExtLabel()\n      this.newFigure.setText(\"Text\")\n      this.newFigure.setStroke(0)\n      this.newFigure.setPadding(5)\n      this.newFigure.setFontSize(16)\n\n      var command = new draw2d.command.CommandAdd(canvas, this.newFigure, parseInt(x), parseInt(y))\n      canvas.getCommandStack().execute(command)\n      canvas.setCurrentSelection(this.newFigure)\n\n      // start inplace editing\n      //\n      setTimeout($.proxy(function () {\n        this.newFigure.onDoubleClick()\n      }, this), 100)\n\n      this.executed()\n    }\n    else {\n      this.topLeft = null\n    }\n  }\n})\n\n\n\n\n","/**\n * adds a bindGlobal method to Mousetrap that allows you to\n * bind specific keyboard shortcuts that will still work\n * inside a text input field\n *\n * usage:\n * Mousetrap.bindGlobal('ctrl+s', _saveChanges);\n */\n/* global Mousetrap:true */\n(function(Mousetrap) {\n  var _globalCallbacks = {};\n  var _originalStopCallback = Mousetrap.prototype.stopCallback;\n\n  Mousetrap.prototype.stopCallback = function(e, element, combo, sequence) {\n    var self = this;\n\n    if (self.paused) {\n      return true;\n    }\n\n    if (_globalCallbacks[combo] || _globalCallbacks[sequence]) {\n      return false;\n    }\n\n    return _originalStopCallback.call(self, e, element, combo);\n  };\n\n  Mousetrap.prototype.bindGlobal = function(keys, callback, action) {\n    var self = this;\n    self.bind(keys, callback, action);\n\n    if (keys instanceof Array) {\n      for (var i = 0; i < keys.length; i++) {\n        _globalCallbacks[keys[i]] = true;\n      }\n      return;\n    }\n\n    _globalCallbacks[keys] = true;\n  };\n\n  Mousetrap.init();\n}) (Mousetrap);\n","/**\n * adds a pause and unpause method to Mousetrap\n * this allows you to enable or disable keyboard shortcuts\n * without having to reset Mousetrap and rebind everything\n */\n/* global Mousetrap:true */\n(function(Mousetrap) {\n  let _originalStopCallback = Mousetrap.prototype.stopCallback;\n\n  Mousetrap.prototype.stopCallback = function(e, element, combo) {\n    let self = this;\n\n    if (self.paused) {\n      return true;\n    }\n\n    return _originalStopCallback.call(self, e, element, combo);\n  };\n\n  Mousetrap.prototype.pause = function() {\n    let self = this;\n    self.paused = true;\n  };\n\n  Mousetrap.prototype.unpause = function() {\n    let self = this;\n    self.paused = false;\n  };\n\n  Mousetrap.init();\n}) (Mousetrap);\n","module.exports = \"js/webpack/5034704a76cd55c1cbcbc58ea6bf523f.gif\";","module.exports = \"js/webpack/ba9a274b9323753cd95bc3b1eb2f4e5f.gif\";","module.exports = \"js/webpack/fefa1a03d92ebad25c88dca94a0b63db.png\";","module.exports = \"js/webpack/990d71cada17da100653636cf8490884.png\";","/**\n * jscolor, JavaScript Color Picker\n *\n * @version 1.4.2\n * @license GNU Lesser General Public License, http://www.gnu.org/copyleft/lesser.html\n * @author  Jan Odvarko, http://odvarko.cz\n * @created 2008-06-15\n * @updated 2013-11-25\n * @link    http://jscolor.com\n */\nimport arrowImg from \"./arrow.gif\"\nimport crossImg from \"./cross.gif\"\nimport hsImg from \"./hs.png\"\nimport hvImg from \"./hv.png\"\n\nlet jscolor = null\nexport default jscolor = {\n\n  dir: '', // location of jscolor directory (leave empty to autodetect)\n  bindClass: 'color', // class name\n  binding: true, // automatic binding via <input class=\"...\">\n  preloading: true, // use image preloading?\n\n\n  install: function () {\n    jscolor.addEvent(window, 'load', jscolor.init)\n  },\n\n\n  init: function () {\n    if (jscolor.binding) {\n      jscolor.bind()\n    }\n    if (jscolor.preloading) {\n      jscolor.preload()\n    }\n  },\n\n  bind: function () {\n    var matchClass = new RegExp('(^|\\\\s)(' + jscolor.bindClass + ')\\\\s*(\\\\{[^}]*\\\\})?', 'i')\n    var e = document.getElementsByTagName('input')\n    for (var i = 0; i < e.length; i += 1) {\n      var m\n      if (!e[i].color && e[i].className && (m = e[i].className.match(matchClass))) {\n        var prop = {}\n        if (m[3]) {\n          try {\n            prop = (new Function('return (' + m[3] + ')'))()\n          } catch (eInvalidProp) {\n          }\n        }\n        e[i].color = new jscolor.color(e[i], prop)\n      }\n    }\n  },\n\n\n  preload: function () {\n    for (var fn in jscolor.imgRequire) {\n      if (jscolor.imgRequire.hasOwnProperty(fn)) {\n        jscolor.loadImage(fn)\n      }\n    }\n  },\n\n\n  images: {\n    pad: [181, 101],\n    sld: [16, 101],\n    cross: [15, 15],\n    arrow: [7, 11]\n  },\n\n\n  imgRequire: {},\n  imgLoaded: {},\n\n\n  requireImage: function (filename) {\n    jscolor.imgRequire[filename] = true\n  },\n\n\n  loadImage: function (filename) {\n    if (!jscolor.imgLoaded[filename]) {\n      jscolor.imgLoaded[filename] = new Image()\n      jscolor.imgLoaded[filename].src = filename\n    }\n  },\n\n\n  fetchElement: function (mixed) {\n    return typeof mixed === 'string' ? document.getElementById(mixed) : mixed\n  },\n\n\n  addEvent: function (el, evnt, func) {\n    if (el.addEventListener) {\n      el.addEventListener(evnt, func, false)\n    } else if (el.attachEvent) {\n      el.attachEvent('on' + evnt, func)\n    }\n  },\n\n\n  fireEvent: function (el, evnt) {\n    if (!el) {\n      return\n    }\n    if (document.createEvent) {\n      var ev = document.createEvent('HTMLEvents')\n      ev.initEvent(evnt, true, true)\n      el.dispatchEvent(ev)\n    } else if (document.createEventObject) {\n      var ev = document.createEventObject()\n      el.fireEvent('on' + evnt, ev)\n    } else if (el['on' + evnt]) { // alternatively use the traditional event model (IE5)\n      el['on' + evnt]()\n    }\n  },\n\n\n  getElementPos: function (e) {\n    var e1 = e, e2 = e\n    var x = 0, y = 0\n    if (e1.offsetParent) {\n      do {\n        x += e1.offsetLeft\n        y += e1.offsetTop\n      } while (e1 = e1.offsetParent)\n    }\n    while ((e2 = e2.parentNode) && e2.nodeName.toUpperCase() !== 'BODY') {\n      x -= e2.scrollLeft\n      y -= e2.scrollTop\n    }\n    return [x, y]\n  },\n\n\n  getElementSize: function (e) {\n    return [e.offsetWidth, e.offsetHeight]\n  },\n\n\n  getRelMousePos: function (e) {\n    var x = 0, y = 0\n    if (!e) {\n      e = window.event\n    }\n    if (typeof e.offsetX === 'number') {\n      x = e.offsetX\n      y = e.offsetY\n    } else if (typeof e.layerX === 'number') {\n      x = e.layerX\n      y = e.layerY\n    }\n    return {x: x, y: y}\n  },\n\n\n  getViewPos: function () {\n    if (typeof window.pageYOffset === 'number') {\n      return [window.pageXOffset, window.pageYOffset]\n    } else if (document.body && (document.body.scrollLeft || document.body.scrollTop)) {\n      return [document.body.scrollLeft, document.body.scrollTop]\n    } else if (document.documentElement && (document.documentElement.scrollLeft || document.documentElement.scrollTop)) {\n      return [document.documentElement.scrollLeft, document.documentElement.scrollTop]\n    } else {\n      return [0, 0]\n    }\n  },\n\n\n  getViewSize: function () {\n    if (typeof window.innerWidth === 'number') {\n      return [window.innerWidth, window.innerHeight]\n    } else if (document.body && (document.body.clientWidth || document.body.clientHeight)) {\n      return [document.body.clientWidth, document.body.clientHeight]\n    } else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {\n      return [document.documentElement.clientWidth, document.documentElement.clientHeight]\n    } else {\n      return [0, 0]\n    }\n  },\n\n\n  URI: function (uri) { // See RFC3986\n\n    this.scheme = null\n    this.authority = null\n    this.path = ''\n    this.query = null\n    this.fragment = null\n\n    this.parse = function (uri) {\n      var m = uri.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\\/\\/)([^\\/?#]*))?([^?#]*)((\\?)([^#]*))?((#)(.*))?/)\n      this.scheme = m[3] ? m[2] : null\n      this.authority = m[5] ? m[6] : null\n      this.path = m[7]\n      this.query = m[9] ? m[10] : null\n      this.fragment = m[12] ? m[13] : null\n      return this\n    }\n\n    this.toString = function () {\n      var result = ''\n      if (this.scheme !== null) {\n        result = result + this.scheme + ':'\n      }\n      if (this.authority !== null) {\n        result = result + '//' + this.authority\n      }\n      if (this.path !== null) {\n        result = result + this.path\n      }\n      if (this.query !== null) {\n        result = result + '?' + this.query\n      }\n      if (this.fragment !== null) {\n        result = result + '#' + this.fragment\n      }\n      return result\n    }\n\n    this.toAbsolute = function (base) {\n      var base = new jscolor.URI(base)\n      var r = this\n      var t = new jscolor.URI\n\n      if (base.scheme === null) {\n        return false\n      }\n\n      if (r.scheme !== null && r.scheme.toLowerCase() === base.scheme.toLowerCase()) {\n        r.scheme = null\n      }\n\n      if (r.scheme !== null) {\n        t.scheme = r.scheme\n        t.authority = r.authority\n        t.path = removeDotSegments(r.path)\n        t.query = r.query\n      } else {\n        if (r.authority !== null) {\n          t.authority = r.authority\n          t.path = removeDotSegments(r.path)\n          t.query = r.query\n        } else {\n          if (r.path === '') {\n            t.path = base.path\n            if (r.query !== null) {\n              t.query = r.query\n            } else {\n              t.query = base.query\n            }\n          } else {\n            if (r.path.substr(0, 1) === '/') {\n              t.path = removeDotSegments(r.path)\n            } else {\n              if (base.authority !== null && base.path === '') {\n                t.path = '/' + r.path\n              } else {\n                t.path = base.path.replace(/[^\\/]+$/, '') + r.path\n              }\n              t.path = removeDotSegments(t.path)\n            }\n            t.query = r.query\n          }\n          t.authority = base.authority\n        }\n        t.scheme = base.scheme\n      }\n      t.fragment = r.fragment\n\n      return t\n    }\n\n    function removeDotSegments(path) {\n      var out = ''\n      while (path) {\n        if (path.substr(0, 3) === '../' || path.substr(0, 2) === './') {\n          path = path.replace(/^\\.+/, '').substr(1)\n        } else if (path.substr(0, 3) === '/./' || path === '/.') {\n          path = '/' + path.substr(3)\n        } else if (path.substr(0, 4) === '/../' || path === '/..') {\n          path = '/' + path.substr(4)\n          out = out.replace(/\\/?[^\\/]*$/, '')\n        } else if (path === '.' || path === '..') {\n          path = ''\n        } else {\n          var rm = path.match(/^\\/?[^\\/]*/)[0]\n          path = path.substr(rm.length)\n          out = out + rm\n        }\n      }\n      return out\n    }\n\n    if (uri) {\n      this.parse(uri)\n    }\n\n  },\n\n\n  //\n  // Usage example:\n  // var myColor = new jscolor.color(myInputElement)\n  //\n\n  color: function (target, prop) {\n\n\n    this.required = true // refuse empty values?\n    this.adjust = true // adjust value to uniform notation?\n    this.hash = false // prefix color with # symbol?\n    this.caps = true // uppercase?\n    this.slider = true // show the value/saturation slider?\n    this.valueElement = target // value holder\n    this.styleElement = target // where to reflect current color\n    this.onImmediateChange = null // onchange callback (can be either string or function)\n    this.hsv = [0, 0, 1] // read-only  0-6, 0-1, 0-1\n    this.rgb = [1, 1, 1] // read-only  0-1, 0-1, 0-1\n    this.minH = 0 // read-only  0-6\n    this.maxH = 6 // read-only  0-6\n    this.minS = 0 // read-only  0-1\n    this.maxS = 1 // read-only  0-1\n    this.minV = 0 // read-only  0-1\n    this.maxV = 1 // read-only  0-1\n\n    this.pickerOnfocus = true // display picker on focus?\n    this.pickerMode = 'HSV' // HSV | HVS\n    this.pickerPosition = 'bottom' // left | right | top | bottom\n    this.pickerSmartPosition = true // automatically adjust picker position when necessary\n    this.pickerButtonHeight = 20 // px\n    this.pickerClosable = false\n    this.pickerCloseText = 'Close'\n    this.pickerButtonColor = 'ButtonText' // px\n    this.pickerFace = 10 // px\n    this.pickerFaceColor = 'ThreeDFace' // CSS color\n    this.pickerBorder = 1 // px\n    this.pickerBorderColor = 'ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight' // CSS color\n    this.pickerInset = 1 // px\n    this.pickerInsetColor = 'ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow' // CSS color\n    this.pickerZIndex = 10000\n\n\n    for (var p in prop) {\n      if (prop.hasOwnProperty(p)) {\n        this[p] = prop[p]\n      }\n    }\n\n\n    this.hidePicker = function () {\n      if (isPickerOwner()) {\n        removePicker()\n      }\n    }\n\n\n    this.showPicker = function () {\n      if (!isPickerOwner()) {\n        var tp = jscolor.getElementPos(target) // target pos\n        var ts = jscolor.getElementSize(target) // target size\n        var vp = jscolor.getViewPos() // view pos\n        var vs = jscolor.getViewSize() // view size\n        var ps = getPickerDims(this) // picker size\n        var a, b, c\n        switch (this.pickerPosition.toLowerCase()) {\n          case 'left':\n            a = 1\n            b = 0\n            c = -1\n            break\n          case 'right':\n            a = 1\n            b = 0\n            c = 1\n            break\n          case 'top':\n            a = 0\n            b = 1\n            c = -1\n            break\n          default:\n            a = 0\n            b = 1\n            c = 1\n            break\n        }\n        var l = (ts[b] + ps[b]) / 2\n\n        // picker pos\n        if (!this.pickerSmartPosition) {\n          var pp = [\n            tp[a],\n            tp[b] + ts[b] - l + l * c\n          ]\n        } else {\n          var pp = [\n            -vp[a] + tp[a] + ps[a] > vs[a] ?\n              (-vp[a] + tp[a] + ts[a] / 2 > vs[a] / 2 && tp[a] + ts[a] - ps[a] >= 0 ? tp[a] + ts[a] - ps[a] : tp[a]) :\n              tp[a],\n            -vp[b] + tp[b] + ts[b] + ps[b] - l + l * c > vs[b] ?\n              (-vp[b] + tp[b] + ts[b] / 2 > vs[b] / 2 && tp[b] + ts[b] - l - l * c >= 0 ? tp[b] + ts[b] - l - l * c : tp[b] + ts[b] - l + l * c) :\n              (tp[b] + ts[b] - l + l * c >= 0 ? tp[b] + ts[b] - l + l * c : tp[b] + ts[b] - l - l * c)\n          ]\n        }\n        drawPicker(pp[a], pp[b])\n      }\n    }\n\n\n    this.importColor = function () {\n      if (!valueElement) {\n        this.exportColor()\n      } else {\n        if (!this.adjust) {\n          if (!this.fromString(valueElement.value, leaveValue)) {\n            styleElement.style.backgroundImage = styleElement.jscStyle.backgroundImage\n            styleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor\n            styleElement.style.color = styleElement.jscStyle.color\n            this.exportColor(leaveValue | leaveStyle)\n          }\n        } else if (!this.required && /^\\s*$/.test(valueElement.value)) {\n          valueElement.value = ''\n          styleElement.style.backgroundImage = styleElement.jscStyle.backgroundImage\n          styleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor\n          styleElement.style.color = styleElement.jscStyle.color\n          this.exportColor(leaveValue | leaveStyle)\n\n        } else if (this.fromString(valueElement.value)) {\n          // OK\n        } else {\n          this.exportColor()\n        }\n      }\n    }\n\n\n    this.exportColor = function (flags) {\n      if (!(flags & leaveValue) && valueElement) {\n        var value = this.toString()\n        if (this.caps) {\n          value = value.toUpperCase()\n        }\n        if (this.hash) {\n          value = '#' + value\n        }\n        valueElement.value = value\n      }\n      if (!(flags & leaveStyle) && styleElement) {\n        styleElement.style.backgroundImage = \"none\"\n        styleElement.style.backgroundColor =\n          '#' + this.toString()\n        styleElement.style.color =\n          0.213 * this.rgb[0] +\n          0.715 * this.rgb[1] +\n          0.072 * this.rgb[2]\n          < 0.5 ? '#FFF' : '#000'\n      }\n      if (!(flags & leavePad) && isPickerOwner()) {\n        redrawPad()\n      }\n      if (!(flags & leaveSld) && isPickerOwner()) {\n        redrawSld()\n      }\n    }\n\n\n    this.fromHSV = function (h, s, v, flags) { // null = don't change\n      if (h !== null) {\n        h = Math.max(0.0, this.minH, Math.min(6.0, this.maxH, h))\n      }\n      if (s !== null) {\n        s = Math.max(0.0, this.minS, Math.min(1.0, this.maxS, s))\n      }\n      if (v !== null) {\n        v = Math.max(0.0, this.minV, Math.min(1.0, this.maxV, v))\n      }\n\n      this.rgb = HSV_RGB(\n        h === null ? this.hsv[0] : (this.hsv[0] = h),\n        s === null ? this.hsv[1] : (this.hsv[1] = s),\n        v === null ? this.hsv[2] : (this.hsv[2] = v)\n      )\n\n      this.exportColor(flags)\n    }\n\n\n    this.fromRGB = function (r, g, b, flags) { // null = don't change\n      if (r !== null) {\n        r = Math.max(0.0, Math.min(1.0, r))\n      }\n      if (g !== null) {\n        g = Math.max(0.0, Math.min(1.0, g))\n      }\n      if (b !== null) {\n        b = Math.max(0.0, Math.min(1.0, b))\n      }\n\n      var hsv = RGB_HSV(\n        r === null ? this.rgb[0] : r,\n        g === null ? this.rgb[1] : g,\n        b === null ? this.rgb[2] : b\n      )\n      if (hsv[0] !== null) {\n        this.hsv[0] = Math.max(0.0, this.minH, Math.min(6.0, this.maxH, hsv[0]))\n      }\n      if (hsv[2] !== 0) {\n        this.hsv[1] = hsv[1] === null ? null : Math.max(0.0, this.minS, Math.min(1.0, this.maxS, hsv[1]))\n      }\n      this.hsv[2] = hsv[2] === null ? null : Math.max(0.0, this.minV, Math.min(1.0, this.maxV, hsv[2]))\n\n      // update RGB according to final HSV, as some values might be trimmed\n      var rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2])\n      this.rgb[0] = rgb[0]\n      this.rgb[1] = rgb[1]\n      this.rgb[2] = rgb[2]\n\n      this.exportColor(flags)\n    }\n\n\n    this.fromString = function (hex, flags) {\n      var m = hex.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i)\n      if (!m) {\n        return false\n      } else {\n        if (m[1].length === 6) { // 6-char notation\n          this.fromRGB(\n            parseInt(m[1].substr(0, 2), 16) / 255,\n            parseInt(m[1].substr(2, 2), 16) / 255,\n            parseInt(m[1].substr(4, 2), 16) / 255,\n            flags\n          )\n        } else { // 3-char notation\n          this.fromRGB(\n            parseInt(m[1].charAt(0) + m[1].charAt(0), 16) / 255,\n            parseInt(m[1].charAt(1) + m[1].charAt(1), 16) / 255,\n            parseInt(m[1].charAt(2) + m[1].charAt(2), 16) / 255,\n            flags\n          )\n        }\n        return true\n      }\n    }\n\n\n    this.toString = function () {\n      return (\n        (0x100 | Math.round(255 * this.rgb[0])).toString(16).substr(1) +\n        (0x100 | Math.round(255 * this.rgb[1])).toString(16).substr(1) +\n        (0x100 | Math.round(255 * this.rgb[2])).toString(16).substr(1)\n      )\n    }\n\n\n    function RGB_HSV(r, g, b) {\n      var n = Math.min(Math.min(r, g), b)\n      var v = Math.max(Math.max(r, g), b)\n      var m = v - n\n      if (m === 0) {\n        return [null, 0, v]\n      }\n      var h = r === n ? 3 + (b - g) / m : (g === n ? 5 + (r - b) / m : 1 + (g - r) / m)\n      return [h === 6 ? 0 : h, m / v, v]\n    }\n\n\n    function HSV_RGB(h, s, v) {\n      if (h === null) {\n        return [v, v, v]\n      }\n      var i = Math.floor(h)\n      var f = i % 2 ? h - i : 1 - (h - i)\n      var m = v * (1 - s)\n      var n = v * (1 - s * f)\n      switch (i) {\n        case 6:\n        case 0:\n          return [v, n, m]\n        case 1:\n          return [n, v, m]\n        case 2:\n          return [m, v, n]\n        case 3:\n          return [m, n, v]\n        case 4:\n          return [n, m, v]\n        case 5:\n          return [v, m, n]\n      }\n    }\n\n\n    function removePicker() {\n      delete jscolor.picker.owner\n      document.getElementsByTagName('body')[0].removeChild(jscolor.picker.boxB)\n    }\n\n\n    function drawPicker(x, y) {\n      if (!jscolor.picker) {\n        jscolor.picker = {\n          box: document.createElement('div'),\n          boxB: document.createElement('div'),\n          pad: document.createElement('div'),\n          padB: document.createElement('div'),\n          padM: document.createElement('div'),\n          sld: document.createElement('div'),\n          sldB: document.createElement('div'),\n          sldM: document.createElement('div'),\n          btn: document.createElement('div'),\n          btnS: document.createElement('span'),\n          btnT: document.createTextNode(THIS.pickerCloseText)\n        }\n        for (var i = 0, segSize = 4; i < jscolor.images.sld[1]; i += segSize) {\n          var seg = document.createElement('div')\n          seg.style.height = segSize + 'px'\n          seg.style.fontSize = '1px'\n          seg.style.lineHeight = '0'\n          jscolor.picker.sld.appendChild(seg)\n        }\n        jscolor.picker.sldB.appendChild(jscolor.picker.sld)\n        jscolor.picker.box.appendChild(jscolor.picker.sldB)\n        jscolor.picker.box.appendChild(jscolor.picker.sldM)\n        jscolor.picker.padB.appendChild(jscolor.picker.pad)\n        jscolor.picker.box.appendChild(jscolor.picker.padB)\n        jscolor.picker.box.appendChild(jscolor.picker.padM)\n        jscolor.picker.btnS.appendChild(jscolor.picker.btnT)\n        jscolor.picker.btn.appendChild(jscolor.picker.btnS)\n        jscolor.picker.box.appendChild(jscolor.picker.btn)\n        jscolor.picker.boxB.appendChild(jscolor.picker.box)\n      }\n\n      var p = jscolor.picker\n\n      // controls interaction\n      p.box.onmouseup =\n        p.box.onmouseout = function () {\n          target.focus()\n        }\n      p.box.onmousedown = function () {\n        abortBlur = true\n      }\n      p.box.onmousemove = function (e) {\n        if (holdPad || holdSld) {\n          holdPad && setPad(e)\n          holdSld && setSld(e)\n          if (document.selection) {\n            document.selection.empty()\n          } else if (window.getSelection) {\n            window.getSelection().removeAllRanges()\n          }\n          dispatchImmediateChange()\n        }\n      }\n      if ('ontouchstart' in window) { // if touch device\n        var handle_touchmove = function (e) {\n          var event = {\n            'offsetX': e.touches[0].pageX - touchOffset.X,\n            'offsetY': e.touches[0].pageY - touchOffset.Y\n          }\n          if (holdPad || holdSld) {\n            holdPad && setPad(event)\n            holdSld && setSld(event)\n            dispatchImmediateChange()\n          }\n          e.stopPropagation() // prevent move \"view\" on broswer\n          e.preventDefault() // prevent Default - Android Fix (else android generated only 1-2 touchmove events)\n        }\n        p.box.removeEventListener('touchmove', handle_touchmove, false)\n        p.box.addEventListener('touchmove', handle_touchmove, false)\n      }\n      p.padM.onmouseup =\n        p.padM.onmouseout = function () {\n          if (holdPad) {\n            holdPad = false\n            jscolor.fireEvent(valueElement, 'change')\n          }\n        }\n      p.padM.onmousedown = function (e) {\n        // if the slider is at the bottom, move it up\n        switch (modeID) {\n          case 0:\n            if (THIS.hsv[2] === 0) {\n              THIS.fromHSV(null, null, 1.0)\n            }\n            \n            break\n          case 1:\n            if (THIS.hsv[1] === 0) {\n              THIS.fromHSV(null, 1.0, null)\n            }\n            \n            break\n        }\n        holdSld = false\n        holdPad = true\n        setPad(e)\n        dispatchImmediateChange()\n      }\n      if ('ontouchstart' in window) {\n        p.padM.addEventListener('touchstart', function (e) {\n          touchOffset = {\n            'X': e.target.offsetParent.offsetLeft,\n            'Y': e.target.offsetParent.offsetTop\n          }\n          this.onmousedown({\n            'offsetX': e.touches[0].pageX - touchOffset.X,\n            'offsetY': e.touches[0].pageY - touchOffset.Y\n          })\n        })\n      }\n      p.sldM.onmouseup =\n        p.sldM.onmouseout = function () {\n          if (holdSld) {\n            holdSld = false\n            jscolor.fireEvent(valueElement, 'change')\n          }\n        }\n      p.sldM.onmousedown = function (e) {\n        holdPad = false\n        holdSld = true\n        setSld(e)\n        dispatchImmediateChange()\n      }\n      if ('ontouchstart' in window) {\n        p.sldM.addEventListener('touchstart', function (e) {\n          touchOffset = {\n            'X': e.target.offsetParent.offsetLeft,\n            'Y': e.target.offsetParent.offsetTop\n          }\n          this.onmousedown({\n            'offsetX': e.touches[0].pageX - touchOffset.X,\n            'offsetY': e.touches[0].pageY - touchOffset.Y\n          })\n        })\n      }\n\n      // picker\n      var dims = getPickerDims(THIS)\n      p.box.style.width = dims[0] + 'px'\n      p.box.style.height = dims[1] + 'px'\n\n      // picker border\n      p.boxB.style.position = 'absolute'\n      p.boxB.style.clear = 'both'\n      p.boxB.style.left = x + 'px'\n      p.boxB.style.top = y + 'px'\n      p.boxB.style.zIndex = THIS.pickerZIndex\n      p.boxB.style.border = THIS.pickerBorder + 'px solid'\n      p.boxB.style.borderColor = THIS.pickerBorderColor\n      p.boxB.style.background = THIS.pickerFaceColor\n\n      // pad image\n      p.pad.style.width = jscolor.images.pad[0] + 'px'\n      p.pad.style.height = jscolor.images.pad[1] + 'px'\n\n      // pad border\n      p.padB.style.position = 'absolute'\n      p.padB.style.left = THIS.pickerFace + 'px'\n      p.padB.style.top = THIS.pickerFace + 'px'\n      p.padB.style.border = THIS.pickerInset + 'px solid'\n      p.padB.style.borderColor = THIS.pickerInsetColor\n\n      // pad mouse area\n      p.padM.style.position = 'absolute'\n      p.padM.style.left = '0'\n      p.padM.style.top = '0'\n      p.padM.style.width = THIS.pickerFace + 2 * THIS.pickerInset + jscolor.images.pad[0] + jscolor.images.arrow[0] + 'px'\n      p.padM.style.height = p.box.style.height\n      p.padM.style.cursor = 'crosshair'\n\n      // slider image\n      p.sld.style.overflow = 'hidden'\n      p.sld.style.width = jscolor.images.sld[0] + 'px'\n      p.sld.style.height = jscolor.images.sld[1] + 'px'\n\n      // slider border\n      p.sldB.style.display = THIS.slider ? 'block' : 'none'\n      p.sldB.style.position = 'absolute'\n      p.sldB.style.right = THIS.pickerFace + 'px'\n      p.sldB.style.top = THIS.pickerFace + 'px'\n      p.sldB.style.border = THIS.pickerInset + 'px solid'\n      p.sldB.style.borderColor = THIS.pickerInsetColor\n\n      // slider mouse area\n      p.sldM.style.display = THIS.slider ? 'block' : 'none'\n      p.sldM.style.position = 'absolute'\n      p.sldM.style.right = '0'\n      p.sldM.style.top = '0'\n      p.sldM.style.width = jscolor.images.sld[0] + jscolor.images.arrow[0] + THIS.pickerFace + 2 * THIS.pickerInset + 'px'\n      p.sldM.style.height = p.box.style.height\n      try {\n        p.sldM.style.cursor = 'pointer'\n      } catch (eOldIE) {\n        p.sldM.style.cursor = 'hand'\n      }\n\n      // \"close\" button\n      function setBtnBorder() {\n        var insetColors = THIS.pickerInsetColor.split(/\\s+/)\n        var pickerOutsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1]\n        p.btn.style.borderColor = pickerOutsetColor\n      }\n\n      p.btn.style.display = THIS.pickerClosable ? 'block' : 'none'\n      p.btn.style.position = 'absolute'\n      p.btn.style.left = THIS.pickerFace + 'px'\n      p.btn.style.bottom = THIS.pickerFace + 'px'\n      p.btn.style.padding = '0 15px'\n      p.btn.style.height = '18px'\n      p.btn.style.border = THIS.pickerInset + 'px solid'\n      setBtnBorder()\n      p.btn.style.color = THIS.pickerButtonColor\n      p.btn.style.font = '12px sans-serif'\n      p.btn.style.textAlign = 'center'\n      try {\n        p.btn.style.cursor = 'pointer'\n      } catch (eOldIE) {\n        p.btn.style.cursor = 'hand'\n      }\n      p.btn.onmousedown = function () {\n        THIS.hidePicker()\n      }\n      p.btnS.style.lineHeight = p.btn.style.height\n\n      // load images in optimal order\n      switch (modeID) {\n        case 0:\n          var padImg = hsImg\n          break\n        case 1:\n          var padImg = hvImg\n          break\n      }\n\n      p.padM.style.backgroundImage = \"url('\" + crossImg + \"')\"\n      p.padM.style.backgroundRepeat = \"no-repeat\"\n      p.sldM.style.backgroundImage = \"url('./\" + arrowImg + \"')\"\n      p.sldM.style.backgroundRepeat = \"no-repeat\"\n      p.pad.style.backgroundImage = \"url('\" + padImg + \"')\"\n      p.pad.style.backgroundRepeat = \"no-repeat\"\n      p.pad.style.backgroundPosition = \"0 0\"\n\n      // place pointers\n      redrawPad()\n      redrawSld()\n\n      jscolor.picker.owner = THIS\n      document.getElementsByTagName('body')[0].appendChild(p.boxB)\n    }\n\n\n    function getPickerDims(o) {\n      var dims = [\n        2 * o.pickerInset + 2 * o.pickerFace + jscolor.images.pad[0] +\n        (o.slider ? 2 * o.pickerInset + 2 * jscolor.images.arrow[0] + jscolor.images.sld[0] : 0),\n        o.pickerClosable ?\n          4 * o.pickerInset + 3 * o.pickerFace + jscolor.images.pad[1] + o.pickerButtonHeight :\n          2 * o.pickerInset + 2 * o.pickerFace + jscolor.images.pad[1]\n      ]\n      return dims\n    }\n\n\n    function redrawPad() {\n      // redraw the pad pointer\n      switch (modeID) {\n        case 0:\n          var yComponent = 1\n          break\n        case 1:\n          var yComponent = 2\n          break\n      }\n      var x = Math.round((THIS.hsv[0] / 6) * (jscolor.images.pad[0] - 1))\n      var y = Math.round((1 - THIS.hsv[yComponent]) * (jscolor.images.pad[1] - 1))\n      jscolor.picker.padM.style.backgroundPosition =\n        (THIS.pickerFace + THIS.pickerInset + x - Math.floor(jscolor.images.cross[0] / 2)) + 'px ' +\n        (THIS.pickerFace + THIS.pickerInset + y - Math.floor(jscolor.images.cross[1] / 2)) + 'px'\n\n      // redraw the slider image\n      var seg = jscolor.picker.sld.childNodes\n\n      switch (modeID) {\n        case 0:\n          var rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 1)\n          for (var i = 0; i < seg.length; i += 1) {\n            seg[i].style.backgroundColor = 'rgb(' +\n              (rgb[0] * (1 - i / seg.length) * 100) + '%,' +\n              (rgb[1] * (1 - i / seg.length) * 100) + '%,' +\n              (rgb[2] * (1 - i / seg.length) * 100) + '%)'\n          }\n          break\n        case 1:\n          var rgb, s, c = [THIS.hsv[2], 0, 0]\n          var i = Math.floor(THIS.hsv[0])\n          var f = i % 2 ? THIS.hsv[0] - i : 1 - (THIS.hsv[0] - i)\n          switch (i) {\n            case 6:\n            case 0:\n              rgb = [0, 1, 2]\n              break\n            case 1:\n              rgb = [1, 0, 2]\n              break\n            case 2:\n              rgb = [2, 0, 1]\n              break\n            case 3:\n              rgb = [2, 1, 0]\n              break\n            case 4:\n              rgb = [1, 2, 0]\n              break\n            case 5:\n              rgb = [0, 2, 1]\n              break\n          }\n          for (var i = 0; i < seg.length; i += 1) {\n            s = 1 - 1 / (seg.length - 1) * i\n            c[1] = c[0] * (1 - s * f)\n            c[2] = c[0] * (1 - s)\n            seg[i].style.backgroundColor = 'rgb(' +\n              (c[rgb[0]] * 100) + '%,' +\n              (c[rgb[1]] * 100) + '%,' +\n              (c[rgb[2]] * 100) + '%)'\n          }\n          break\n      }\n    }\n\n\n    function redrawSld() {\n      // redraw the slider pointer\n      switch (modeID) {\n        case 0:\n          var yComponent = 2\n          break\n        case 1:\n          var yComponent = 1\n          break\n      }\n      var y = Math.round((1 - THIS.hsv[yComponent]) * (jscolor.images.sld[1] - 1))\n      jscolor.picker.sldM.style.backgroundPosition =\n        '0 ' + (THIS.pickerFace + THIS.pickerInset + y - Math.floor(jscolor.images.arrow[1] / 2)) + 'px'\n    }\n\n\n    function isPickerOwner() {\n      return jscolor.picker && jscolor.picker.owner === THIS\n    }\n\n\n    function blurTarget() {\n      if (valueElement === target) {\n        THIS.importColor()\n      }\n      if (THIS.pickerOnfocus) {\n        THIS.hidePicker()\n      }\n    }\n\n\n    function blurValue() {\n      if (valueElement !== target) {\n        THIS.importColor()\n      }\n    }\n\n\n    function setPad(e) {\n      var mpos = jscolor.getRelMousePos(e)\n      var x = mpos.x - THIS.pickerFace - THIS.pickerInset\n      var y = mpos.y - THIS.pickerFace - THIS.pickerInset\n      switch (modeID) {\n        case 0:\n          THIS.fromHSV(x * (6 / (jscolor.images.pad[0] - 1)), 1 - y / (jscolor.images.pad[1] - 1), null, leaveSld)\n          break\n        case 1:\n          THIS.fromHSV(x * (6 / (jscolor.images.pad[0] - 1)), null, 1 - y / (jscolor.images.pad[1] - 1), leaveSld)\n          break\n      }\n    }\n\n\n    function setSld(e) {\n      var mpos = jscolor.getRelMousePos(e)\n      var y = mpos.y - THIS.pickerFace - THIS.pickerInset\n      switch (modeID) {\n        case 0:\n          THIS.fromHSV(null, null, 1 - y / (jscolor.images.sld[1] - 1), leavePad)\n          break\n        case 1:\n          THIS.fromHSV(null, 1 - y / (jscolor.images.sld[1] - 1), null, leavePad)\n          break\n      }\n    }\n\n\n    function dispatchImmediateChange() {\n      if (THIS.onImmediateChange) {\n        var callback\n        if (typeof THIS.onImmediateChange === 'string') {\n          callback = new Function(THIS.onImmediateChange)\n        } else {\n          callback = THIS.onImmediateChange\n        }\n        callback.call(THIS)\n      }\n    }\n\n\n    var THIS = this\n    var modeID = this.pickerMode.toLowerCase() === 'hvs' ? 1 : 0\n    var abortBlur = false\n    var\n      valueElement = jscolor.fetchElement(this.valueElement),\n      styleElement = jscolor.fetchElement(this.styleElement)\n    var\n      holdPad = false,\n      holdSld = false,\n      touchOffset = {}\n    var\n      leaveValue = 1 << 0,\n      leaveStyle = 1 << 1,\n      leavePad = 1 << 2,\n      leaveSld = 1 << 3\n\n    // target\n    jscolor.addEvent(target, 'focus', function () {\n      if (THIS.pickerOnfocus) {\n        THIS.showPicker()\n      }\n    })\n    jscolor.addEvent(target, 'blur', function () {\n      if (!abortBlur) {\n        window.setTimeout(function () {\n          abortBlur || blurTarget()\n          abortBlur = false\n        }, 0)\n      } else {\n        abortBlur = false\n      }\n    })\n\n    // valueElement\n    if (valueElement) {\n      var updateField = function () {\n        THIS.fromString(valueElement.value, leaveValue)\n        dispatchImmediateChange()\n      }\n      jscolor.addEvent(valueElement, 'keyup', updateField)\n      jscolor.addEvent(valueElement, 'input', updateField)\n      jscolor.addEvent(valueElement, 'blur', blurValue)\n      valueElement.setAttribute('autocomplete', 'off')\n    }\n\n    // styleElement\n    if (styleElement) {\n      styleElement.jscStyle = {\n        backgroundImage: styleElement.style.backgroundImage,\n        backgroundColor: styleElement.style.backgroundColor,\n        color: styleElement.style.color\n      }\n    }\n\n    // require images\n    switch (modeID) {\n      case 0:\n        jscolor.requireImage(hsImg)\n        break\n      case 1:\n        jscolor.requireImage(hvImg)\n        break\n    }\n    jscolor.requireImage(crossImg)\n    jscolor.requireImage(arrowImg)\n\n    this.importColor()\n  }\n\n}\n","/*\n    ui.anglepicker\n*/\n\n$.widget(\"ui.anglepicker\", $.ui.mouse, {\n  widgetEventPrefix: \"angle\",\n  _init: function () {\n    this._mouseInit()\n    this.pointer = $('<div class=\"ui-anglepicker-pointer\"></div>')\n    this.pointer.append('<div class=\"ui-anglepicker-dot\"></div>')\n    this.pointer.append('<div class=\"ui-anglepicker-line\"></div>')\n\n    this.element.addClass(\"ui-anglepicker\")\n    this.element.append(this.pointer)\n\n    this.setDegrees(this.options.value)\n  },\n  _propagate: function (name, event) {\n    this._trigger(name, event, this.ui())\n  },\n  _create: function () {\n\n  },\n  destroy: function () {\n    this._mouseDestroy()\n\n    this.element.removeClass(\"ui-anglepicker\")\n    this.pointer.remove()\n  },\n  _mouseStart: function (event) {\n    var myOffset = this.element.offset()\n    this.width = this.element.width()\n    this.height = this.element.height()\n\n    this.startOffset = {\n      x: myOffset.left + (this.width / 2),\n      y: myOffset.top + (this.height / 2)\n    }\n\n    this.element.addClass(\"ui-anglepicker-dragging\")\n    this.setDegreesFromEvent(event)\n    this._propagate(\"start\", event)\n  },\n  _mouseStop: function (event) {\n    this.element.removeClass(\"ui-anglepicker-dragging\")\n    this._propagate(\"stop\", event)\n  },\n  _mouseDrag: function (event) {\n    this.setDegreesFromEvent(event)\n    this._propagate(\"change\", event)\n  },\n  _setOption: function (key, value) {\n\n    this._super(key, value)\n  },\n\n  ui: function () {\n    return {\n      element: this.element,\n      value: this.options.value\n    }\n  },\n  value: function (newValue) {\n\n    if (!arguments.length) {\n      return this.options.value\n    }\n\n    var oldValue = this.options.value\n    this.setDegrees(newValue)\n\n    if (oldValue !== this.options.value) {\n      this._propagate(\"change\")\n    }\n\n    return this\n  },\n  drawRotation: function () {\n    var value = this.options.clockwise ? this.options.value : -this.options.value\n    var rotation = 'rotate(' + -value + 'deg)'\n\n    this.pointer.css({\n      '-webkit-transform': rotation,\n      '-moz-transform': rotation,\n      '-ms-transform': rotation,\n      '-o-transform': rotation,\n      'transform': rotation\n    })\n  },\n  setDegrees: function (degrees) {\n    this.options.value = this.clamp(degrees)\n    this.drawRotation()\n  },\n  clamp: function (degrees) {\n    if (typeof degrees !== \"number\") {\n      degrees = 0\n    }\n\n    var min = this.options.min,\n      max = min + 360\n\n    while (degrees < min) {\n      degrees += 360\n    }\n    while (degrees > max) {\n      degrees -= 360\n    }\n\n    return degrees\n  },\n  setDegreesFromEvent: function (event) {\n    var opposite = this.startOffset.y - event.pageY\n    opposite = this.options.clockwise ? opposite : -opposite\n\n    var adjacent = event.pageX - this.startOffset.x,\n      radians = Math.atan(opposite / adjacent),\n      degrees = Math.round(radians * (180 / Math.PI), 10)\n\n    if (event.shiftKey) {\n      degrees = this.roundToMultiple(degrees, this.options.shiftSnap)\n    }\n    else {\n      degrees = this.roundToMultiple(degrees, this.options.snap)\n    }\n\n    if (adjacent < 0 && opposite >= 0) {\n      degrees += 180\n    }\n    else if (opposite < 0 && adjacent < 0) {\n      degrees -= 180\n    }\n\n    this.setDegrees(degrees)\n  },\n  roundToMultiple: function (number, multiple) {\n    var value = number / multiple,\n      integer = Math.floor(value),\n      rest = value - integer\n\n    return rest > 0.5 ? (integer + 1) * multiple : integer * multiple\n  },\n  options: {\n    distance: 1,\n    delay: 1,\n    snap: 1,\n    min: 0,\n    shiftSnap: 15,\n    value: 90,\n    clockwise: true // anti-clockwise if false\n  }\n})\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/less-loader/dist/cjs.js!./index.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","(function (root, factory) {\n\n    if(typeof define === 'function' && define.amd) {\n        define([], factory(root));\n    } else if (typeof exports === 'object') {\n        module.exports = factory(root);\n    } else {\n        root.inlineSVG = factory(root);\n    }\n\n})(typeof global !== \"undefined\" ? global : this.window || this.global, function (root) {\n\n    // Variables\n    var inlineSVG = {},\n        supports = !!document.querySelector && !!root.addEventListener,\n        settings;\n\n    // Defaults\n    var defaults = {\n        initClass: 'js-inlinesvg',\n        svgSelector: 'img.svg'\n    };\n\n    /**\n     * Stolen from underscore.js\n     * @private\n     * @param {Int} times\n     * @param {Function} func\n     */\n\n    var after = function(times, func) {\n        return function() {\n            if (--times < 1) {\n                return func.apply(this, arguments);\n            }\n        };\n    };\n\n    /**\n     * Merge two objects together\n     * @private\n     * @param {Function} fn\n     */\n    var extend = function () {\n\n        // Variables\n        var extended = {};\n        var deep = false;\n        var i = 0;\n        var length = arguments.length;\n\n        // Check if a deep merge\n        if ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\n            deep = arguments[0];\n            i++;\n        }\n\n        // Merge the object into the extended object\n        var merge = function (obj) {\n            for ( var prop in obj ) {\n                if ( Object.prototype.hasOwnProperty.call( obj, prop ) ) {\n                    // If deep merge and property is an object, merge properties\n                    if ( deep && Object.prototype.toString.call(obj[prop]) === '[object Object]' ) {\n                        extended[prop] = extend( true, extended[prop], obj[prop] );\n                    } else {\n                        extended[prop] = obj[prop];\n                    }\n                }\n            }\n        };\n\n        // Loop through each object and conduct a merge\n        for ( ; i < length; i++ ) {\n            var obj = arguments[i];\n            merge(obj);\n        }\n\n        return extended;\n\n    };\n\n    // Methods\n\n    /**\n     * Grab all the SVGs that match the selector\n     * @public\n     */\n    var getAll = function () {\n\n        var svgs = document.querySelectorAll(settings.svgSelector);\n        return svgs;\n\n    };\n\n    /**\n     * Inline all the SVGs in the array\n     * @public\n     */\n    var inliner = function (cb) {\n\n        var svgs = getAll();\n        var callback = after(svgs.length, cb);\n\n        Array.prototype.forEach.call(svgs, function (svg, i) {\n\n            // Store some attributes of the image\n            var src = svg.src || svg.getAttribute('data-src'),\n                attributes = svg.attributes;\n\n            // Get the contents of the SVG\n            var request = new XMLHttpRequest();\n            request.open('GET', src, true);\n\n            request.onload = function () {\n\n                if(request.status >= 200 && request.status < 400) {\n\n                    // Setup a parser to convert the response to text/xml in order for it\n                    // to be manipulated and changed\n                    var parser = new DOMParser(),\n                        result = parser.parseFromString(request.responseText, 'text/xml'),\n                        inlinedSVG = result.getElementsByTagName('svg')[0];\n\n                    let titles = inlinedSVG.getElementsByTagName('title')\n                    while (titles[0]) titles[0].parentNode.removeChild(titles[0])\n\n                    let descs = inlinedSVG.getElementsByTagName('desc')\n                    while (descs[0]) descs[0].parentNode.removeChild(descs[0])\n\n                    // Remove some of the attributes that aren't needed\n                    inlinedSVG.removeAttribute('xmlns:a');\n                    inlinedSVG.removeAttribute('width');\n                    inlinedSVG.removeAttribute('height');\n                    inlinedSVG.removeAttribute('x');\n                    inlinedSVG.removeAttribute('y');\n                    inlinedSVG.removeAttribute('enable-background');\n                    inlinedSVG.removeAttribute('xmlns:xlink');\n                    inlinedSVG.removeAttribute('xml:space');\n                    inlinedSVG.removeAttribute('version');\n\n                    // Add in the attributes from the original <img> except `src` or\n                    // `alt`, we don't need either\n                    Array.prototype.slice.call(attributes).forEach(function(attribute) {\n                        if(attribute.name !== 'src' && attribute.name !== 'alt') {\n                            inlinedSVG.setAttribute(attribute.name, attribute.value);\n                        }\n                    });\n\n                    // Add an additional class to the inlined SVG to imply it was\n                    // infact inlined, might be useful to know\n                    if (inlinedSVG.classList) {\n                        inlinedSVG.classList.add('inlined-svg');\n                    } else {\n                        inlinedSVG.className += ' ' + 'inlined-svg';\n                    }\n\n                    // Add in some accessibility quick wins\n                    inlinedSVG.setAttribute('role', 'img');\n\n                    // Use the `longdesc` attribute if one exists\n                    if(attributes.longdesc) {\n                        var description = document.createElementNS('http://www.w3.org/2000/svg', 'desc'),\n                            descriptionText = document.createTextNode(attributes.longdesc.value);\n\n                        description.appendChild(descriptionText);\n                        inlinedSVG.insertBefore(description, inlinedSVG.firstChild);\n                    }\n\n                    // Use the `alt` attribute if one exists\n                    if(attributes.alt) {\n                        inlinedSVG.setAttribute('aria-labelledby', 'title');\n\n                        var title = document.createElementNS('http://www.w3.org/2000/svg', 'title'),\n                            titleText = document.createTextNode(attributes.alt.value);\n\n                        title.appendChild(titleText);\n                        inlinedSVG.insertBefore(title, inlinedSVG.firstChild);\n                    }\n\n                    // Replace the image with the SVG\n                    svg.parentNode.replaceChild(inlinedSVG, svg);\n\n                    // Fire the callback\n                    callback(settings.svgSelector);\n\n                } else {\n\n                    console.error('There was an error retrieving the source of the SVG.');\n\n                }\n\n            };\n\n            request.onerror = function () {\n                console.error('There was an error connecting to the origin server.');\n            };\n\n            request.send();\n\n        });\n\n    };\n\n    /**\n     * Initialise the inliner\n     * @public\n     */\n    inlineSVG.init = function (options, callback) {\n\n        // Test for support\n        if (!supports) return;\n\n        // Merge users option with defaults\n        settings = extend(defaults, options || {});\n\n        // Kick-off the inliner\n        inliner(callback || function(){});\n    };\n\n    return inlineSVG;\n\n});\n","var escape = require(\"../../../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".toolbar {\\n  margin: 0;\\n  padding-top: 0;\\n  padding-right: 10px;\\n  top: 0;\\n  right: 0;\\n  left: 220px;\\n  height: 60px;\\n  overflow: visible;\\n  z-index: 1000 !important;\\n  position: absolute;\\n  background-color: #B2E2F2;\\n  border: none !important;\\n}\\n.toolbar * {\\n  outline: none;\\n}\\n.toolbar .group {\\n  padding-right: 20px;\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n.toolbar .group .image-button {\\n  display: inline-block;\\n}\\n.toolbar .group .image-button img {\\n  margin: 5px;\\n  margin-bottom: 0;\\n  padding: 0;\\n  width: 40px;\\n  height: 40px;\\n  position: relative;\\n  display: inline-block;\\n  text-align: center;\\n  color: #777;\\n  font-size: 45px;\\n  transition: all 0.5s;\\n}\\n.toolbar .group .image-button div {\\n  color: rgba(0, 0, 0, 0.5);\\n  text-align: center;\\n  font-size: 10px;\\n}\\n.toolbar .group .image-button.disabled {\\n  opacity: 0.2;\\n}\\n.toolbar .group .image-button:not(.disabled) img {\\n  cursor: pointer;\\n}\\n.toolbar .group .image-button:not(.disabled) img:hover {\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\\n}\\n.modal-backdrop.in {\\n  opacity: 0.7;\\n  background-color: black;\\n  transition: opacity 0.4s linear;\\n}\\n.genericDialog .modal-content {\\n  border-radius: 4px;\\n  box-shadow: 0 19px 38px rgba(0, 0, 0, 0.3), 0 15px 12px rgba(0, 0, 0, 0.22);\\n  background-color: #ffffff;\\n}\\n.genericDialog .modal-content .modal-header {\\n  border-bottom: 0;\\n  font-weight: 400;\\n  box-shadow: 0 3px 5px rgba(57, 63, 72, 0.3);\\n}\\n.genericDialog .modal-content .modal-body {\\n  padding: 1px;\\n  min-height: 120px;\\n}\\n.genericDialog .modal-content .modal-body .form-control {\\n  -webkit-appearance: none;\\n  -moz-appearance: none;\\n  appearance: none;\\n  box-sizing: border-box;\\n  border-radius: 4px;\\n  margin: 0;\\n  padding: 0;\\n  color: #4D4D4D;\\n  display: inline-block;\\n  font: inherit;\\n  border: 1px solid #DFDFDF;\\n  box-shadow: none;\\n  height: 24px;\\n  padding: 0 3px;\\n}\\n.genericDialog .modal-content .modal-body .form-control:focus {\\n  background-color: #f5f5f5;\\n}\\n.genericDialog .modal-content .modal-body .list-group {\\n  overflow-y: auto;\\n  overflow-x: auto;\\n}\\n.genericDialog .modal-content .modal-body .list-group *[data-draw2d=\\\"true\\\"] {\\n  font-weight: bold;\\n  color: #C21B7A;\\n}\\n.genericDialog .modal-content .modal-body .list-group .glyphicon,\\n.genericDialog .modal-content .modal-body .list-group .fa {\\n  font-size: 20px;\\n  padding-right: 10px;\\n  color: #C21B7A;\\n}\\n.genericDialog .modal-content .modal-body .list-group .list-group-item {\\n  background-color: transparent;\\n  font-weight: 300;\\n}\\n.genericDialog .modal-content .modal-body .list-group .list-group-item:hover {\\n  text-decoration: underline;\\n}\\n.genericDialog .modal-content .modal-body .list-group *[data-draw2d=\\\"false\\\"][data-type=\\\"file\\\"] {\\n  color: gray;\\n  cursor: default;\\n  text-decoration: none !important;\\n}\\n.genericDialog .modal-content .modal-body .list-group *[data-draw2d=\\\"false\\\"][data-type=\\\"file\\\"] .fa {\\n  color: gray;\\n}\\n.genericDialog .modal-content .modal-footer {\\n  background-color: transparent;\\n  border-top: 0;\\n}\\n.genericDialog .modal-content .modal-footer .btn {\\n  border: 0;\\n  text-transform: uppercase;\\n  background-color: transparent;\\n  color: #C21B7A;\\n  transition: all 0.5s;\\n}\\n.genericDialog .modal-content .modal-footer .btn:hover {\\n  background-color: rgba(194, 27, 122, 0.04);\\n  transition: all 0.5s;\\n}\\n.genericDialog .modal-content .modal-footer .btn-primary {\\n  font-weight: bold;\\n}\\n#fileOpenDialog .list-group {\\n  height: 60%;\\n}\\n#fileSaveDialog .filePreview {\\n  max-width: 200px;\\n  max-height: 200px;\\n}\\n#fileSaveDialog .modal-body .media {\\n  padding: 20px;\\n}\\n#githubFileSaveAsDialog .filePreview {\\n  max-width: 200px;\\n  max-height: 200px;\\n}\\n#githubFileSaveAsDialog .list-group {\\n  height: 250px;\\n}\\n#canvas_zoom {\\n  position: fixed;\\n  bottom: 20px;\\n  right: 270px;\\n  background-color: rgba(178, 226, 242, 0.3);\\n  border-radius: 5px;\\n}\\n#canvas_zoom button {\\n  background-color: transparent;\\n  font-weight: 300;\\n  padding: 5px;\\n  padding-left: 10px;\\n  padding-right: 10px;\\n  border: 1px solid transparent;\\n  outline: none;\\n  transition: all 0.5s;\\n}\\n#canvas_zoom button:hover {\\n  border: 1px solid #C21B7A;\\n}\\n/***BOOTSTRAP****/\\n.btn {\\n  border-radius: 0 !important;\\n}\\n.tooltip-inner {\\n  border-radius: 0 !important;\\n  padding: 10px !important;\\n  padding-top: 5px !important;\\n  padding-bottom: 5px !important;\\n  font-family: 'Roboto', sans-serif !important;\\n  font-weight: 300 !important;\\n  font-size: 14px !important;\\n  color: #b0b0b0 !important;\\n}\\n/********/\\nbody {\\n  overflow: hidden;\\n  font-family: 'Roboto', sans-serif !important;\\n  font-weight: 300;\\n}\\ninput {\\n  background: none repeat scroll 0 0 #f8f8f8;\\n  border-color: #C6C6C6 #DADADA #EAEAEA;\\n  border-radius: 4px 4px 4px 4px;\\n  -moz-box-sizing: border-box;\\n  padding-left: 7px;\\n  border-style: solid ;\\n  border-width: 1px;\\n  vertical-align: middle;\\n  height: 25px;\\n  font-size: 14px;\\n  line-height: 25px;\\n}\\n.input-block-level {\\n  display: block;\\n  width: 100%;\\n  min-height: 28px;\\n}\\n.control-label {\\n  font-family: 'Roboto', sans-serif;\\n  font-weight: 300;\\n}\\n/******************************************************************\\n * Einstellungen der PropertyViews im Editmodus der \\\"Form\\\".\\n ******************************************************************/\\n.palette_node_element {\\n  width: 48px;\\n  height: 48px;\\n  cursor: move;\\n  margin: 10px auto 10px auto;\\n}\\n.tooltip {\\n  z-index: 1000000;\\n}\\n/* Effects */\\n.overlay-scale {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 10000;\\n  visibility: hidden;\\n  opacity: 0;\\n  -webkit-transform: scale(0.9);\\n  transform: scale(0.9);\\n  -webkit-transition: all 0.4s;\\n  transition: all 0.4s;\\n}\\n.overlay-scale.open {\\n  visibility: visible;\\n  opacity: 1;\\n  -webkit-transform: scale(1);\\n  transform: scale(1);\\n  -webkit-transition: all 0.4s;\\n  transition: all 0.4s;\\n}\\n.readonly-highlight {\\n  background-color: rgba(50, 43, 168, 0.5);\\n  opacity: 0.2;\\n  color: darkblue;\\n  position: absolute;\\n}\\n.content {\\n  position: absolute;\\n  top: 60px;\\n  right: 250px;\\n  left: 220px;\\n  overflow: scroll;\\n  padding: 0;\\n  margin: 0;\\n  border: 0;\\n  bottom: 0;\\n  background-color: #FFFFFF;\\n}\\n#canvas {\\n  width: 6000px;\\n  height: 6000px;\\n}\\n#canvas_config {\\n  position: fixed;\\n  width: 40px;\\n  top: 65px;\\n  left: 225px;\\n  cursor: pointer;\\n  border: 1px solid transparent;\\n  background-color: rgba(178, 226, 242, 0.3);\\n}\\n#canvas_config:hover {\\n  border: 1px solid #C21B7A !important;\\n}\\n#canvas_config:hover {\\n  color: #C21B7A;\\n}\\n#canvas_config_items {\\n  position: fixed;\\n  top: 90px;\\n  left: 225px;\\n  cursor: pointer;\\n  padding: 10px;\\n  white-space: nowrap;\\n  min-width: 250px;\\n}\\n.layer-name-prompt .modal-title {\\n  font-weight: 100;\\n}\\n.layer-name-prompt .modal-footer {\\n  border: 0;\\n}\\n.layer-name-prompt .modal-header {\\n  border-bottom: 3px solid #C21B7A;\\n}\\n.layer-name-prompt input {\\n  outline: none !important;\\n  -webkit-box-shadow: inset !important;\\n  box-shadow: inset !important;\\n  background-color: rgba(0, 0, 0, 0.02) !important;\\n  border-radius: 1px !important;\\n}\\n.layer-name-prompt input:focus {\\n  border: 1px solid #C21B7A;\\n}\\n.layer-name-prompt .btn-primary {\\n  background-color: #C21B7A;\\n  border: 0;\\n}\\n.layer-name-prompt .btn-primary:hover {\\n  background-color: #95155e;\\n}\\n#layer {\\n  padding: 0;\\n  margin: 0;\\n  border: 0;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  width: 220px;\\n  background-color: #ffffff;\\n  text-align: center;\\n  box-shadow: 5px 0 20px -3px rgba(31, 73, 125, 0.3);\\n  z-index: 1;\\n}\\n#layer .title {\\n  left: 10px;\\n  right: 0px;\\n  top: 10px;\\n  position: absolute;\\n}\\n#layer .title img {\\n  padding-right: 20px;\\n  position: absolute;\\n  left: 10px;\\n}\\n#layer .title div {\\n  position: absolute;\\n  left: 90px;\\n}\\n#layer .title div h1 {\\n  font-size: 25px;\\n  font-weight: 200;\\n  line-height: 45px;\\n  margin: 0;\\n  padding: 0;\\n  text-align: left;\\n}\\n#layer .title div h2 {\\n  font-size: 15px;\\n  font-weight: 200;\\n  margin: 0;\\n  padding: 0;\\n  text-align: left;\\n}\\n#layer .panetitle {\\n  position: fixed;\\n  height: 30px;\\n  width: 220px;\\n  top: 90px;\\n  border-bottom: 1px solid #222222;\\n  font-weight: 500;\\n  font-size: 12px;\\n  padding: 4px 4px 4px 20px;\\n  letter-spacing: 5px;\\n  text-align: left;\\n  color: #C21B7A;\\n  box-shadow: 0 4px 2px -2px rgba(31, 73, 125, 0.3);\\n}\\n#layer #layer_elements {\\n  padding: 0;\\n  margin: 0;\\n  border: 0;\\n  position: fixed;\\n  top: 120px;\\n  left: 0;\\n  bottom: 0;\\n  width: 220px;\\n  overflow: auto;\\n}\\n#layer #layer_elements .layerElement {\\n  background-color: #fafafa;\\n  color: black;\\n  cursor: move;\\n  font-weight: 400;\\n  font-size: 12px;\\n  letter-spacing: 1px;\\n  padding: 4px 4px 4px 5px;\\n  text-align: left;\\n  border: 1px solid transparent;\\n  border-bottom: 1px solid #222222;\\n}\\n#layer #layer_elements .layerElement::before {\\n  content: \\\"\\\";\\n  display: block;\\n  width: 20px;\\n  height: 20px;\\n  float: left;\\n  margin-right: 5px;\\n}\\n#layer #layer_elements .layerElement.ExtLine::before {\\n  background: url(\" + escape(require(\"../images/layer_line.svg\")) + \") no-repeat;\\n  background-size: cover;\\n}\\n#layer #layer_elements .layerElement.PolyRect::before {\\n  background: url(\" + escape(require(\"../images/layer_rect.svg\")) + \") no-repeat;\\n  background-size: cover;\\n}\\n#layer #layer_elements .layerElement.PolyCircle::before {\\n  background: url(\" + escape(require(\"../images/layer_circle.svg\")) + \") no-repeat;\\n  background-size: cover;\\n}\\n#layer #layer_elements .layerElement.ExtLabel::before {\\n  background: url(\" + escape(require(\"../images/layer_text.svg\")) + \") no-repeat;\\n  background-size: cover;\\n}\\n#layer #layer_elements .layerElement.ExtPort::before {\\n  background: url(\" + escape(require(\"../images/layer_port.svg\")) + \") no-repeat;\\n  background-size: cover;\\n}\\n#layer #layer_elements .layerElement[data-visibility=\\\"false\\\"] {\\n  opacity: 0.5;\\n  font-style: italic;\\n}\\n#layer #layer_elements .layerElement .icon {\\n  cursor: pointer;\\n  padding-right: 4px;\\n  width: 20px;\\n  height: 20px;\\n}\\n#layer #layer_elements .layerElement .icon * {\\n  stroke: black !important;\\n}\\n#layer #layer_elements .layerElement .icon:hover * {\\n  stroke: #C21B7A !important;\\n}\\n#layer #layer_elements .layerSelectedElement {\\n  background-color: #f5f5f5;\\n  color: black;\\n  border-style: dotted;\\n  border-width: 1px;\\n  border-color: #C21B7A;\\n  font-weight: 600;\\n}\\n#code_overlay {\\n  position: absolute;\\n  top: 0px;\\n  left: 0px;\\n  width: 100%;\\n  height: 100%;\\n  background-color: white;\\n  z-index: 10000;\\n}\\n#code_close {\\n  position: fixed;\\n  right: 40px;\\n  top: 10px;\\n  width: 32px;\\n  height: 32px;\\n  z-index: 10000;\\n  cursor: pointer;\\n  font-size: 50px;\\n}\\n#code_close:hover {\\n  color: #C21B7A;\\n}\\n#test_run {\\n  position: fixed;\\n  right: 90px;\\n  top: 10px;\\n  width: 32px;\\n  height: 32px;\\n  z-index: 10000;\\n  cursor: pointer;\\n  font-size: 50px;\\n}\\n#test_run:hover {\\n  color: #C21B7A;\\n}\\n#test_info {\\n  position: absolute;\\n  color: black;\\n  z-index: 20000;\\n  top: 20px;\\n  left: 20px;\\n  border: 1px solid lightgray;\\n  padding: 7px;\\n  background-color: white;\\n  border-radius: 2px;\\n}\\n#test_canvas {\\n  position: absolute;\\n  top: 0px;\\n  left: 0px;\\n  width: 100%;\\n  height: 100%;\\n  background-color: white;\\n  z-index: 10000;\\n}\\n#test_close {\\n  position: fixed;\\n  right: 40px;\\n  top: 10px;\\n  width: 32px;\\n  height: 32px;\\n  z-index: 10000;\\n  cursor: pointer;\\n  font-size: 50px;\\n}\\n#test_close:hover {\\n  color: #C21B7A;\\n}\\n#test_clipboard {\\n  position: fixed;\\n  right: 100px;\\n  top: 10px;\\n  width: 32px;\\n  height: 32px;\\n  z-index: 10000;\\n  cursor: pointer;\\n  font-size: 50px;\\n}\\n#test_clipboard:hover {\\n  color: #C21B7A;\\n}\\n.portDirectionOption {\\n  height: 60px;\\n  text-align: center;\\n}\\n.portDirectionOption label > input {\\n  /* HIDE RADIO */\\n  display: none;\\n}\\n.portDirectionOption label > input + span {\\n  /* IMAGE STYLES */\\n  cursor: pointer;\\n  color: gray !important;\\n  padding-right: 5px;\\n}\\n.portDirectionOption label > input:checked + span {\\n  /* (CHECKED) IMAGE STYLES */\\n  color: #C21B7A !important;\\n}\\n.portTypeOption {\\n  height: 65px;\\n  padding-left: 60px;\\n}\\n.portTypeOption label > input {\\n  /* HIDE RADIO */\\n  display: none;\\n}\\n.portTypeOption label > input + span {\\n  /* IMAGE STYLES */\\n  cursor: pointer;\\n  color: gray !important;\\n  padding-right: 5px;\\n  font-weight: 100;\\n  font-size: 14px;\\n}\\n.portTypeOption label > input + span:before {\\n  padding-right: 10px;\\n}\\n.portTypeOption label > input:checked + span {\\n  /* (CHECKED) IMAGE STYLES */\\n  color: #C21B7A !important;\\n}\\n#filter {\\n  position: absolute;\\n  top: 60px;\\n  right: 0;\\n  bottom: 0;\\n  width: 250px;\\n  padding: 0;\\n  margin: 0;\\n  border-radius: 0;\\n  border: 0;\\n  background-color: #282a30;\\n}\\n#filter .filter_header {\\n  background: none repeat scroll 0 0 #303030;\\n  position: fixed;\\n  height: 30px;\\n  width: 250px;\\n  top: 60px;\\n  border-bottom: 1px solid #222222;\\n  border-top: 1px solid #111111;\\n  font-weight: 500;\\n  font-size: 12px;\\n  padding-top: 5px;\\n  letter-spacing: 5px;\\n  text-align: center;\\n  color: #C21B7A;\\n}\\n#filter .filter_toolbar {\\n  overflow: visible;\\n  border: 0;\\n  padding: 3px;\\n  padding-left: 10px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  width: 250px;\\n  height: 30px;\\n  background: none repeat scroll 0 0 #303030;\\n}\\n#filter .filter_actions {\\n  position: fixed;\\n  top: 90px;\\n  bottom: 30px;\\n  width: 250px;\\n  border: 0;\\n  padding: 0;\\n  overflow-y: auto;\\n}\\n#filter .filter_actions .panel-body {\\n  padding: 7px;\\n  padding-top: 0;\\n}\\n#filter .filter_actions .form-group {\\n  margin-bottom: 2px !important;\\n}\\n#filter .filter_actions .form-group > .input-group {\\n  margin-bottom: 10px;\\n}\\n#filter .filter_actions .form-group > .input-group:last-child {\\n  margin-bottom: 0px;\\n}\\n#filter .filter_actions .icon {\\n  color: #26B4A8;\\n  padding: 0;\\n  top: -4px;\\n  color: rgba(255, 255, 255, 0.25);\\n}\\n#filter .filter_actions .icon:hover {\\n  color: #C21B7A;\\n}\\n#filter .filter_actions .filter-heading {\\n  color: #DDDDDD !important;\\n  font-size: 12px;\\n  padding-right: 10px !important;\\n  padding-top: 1px !important;\\n  padding-bottom: 0 !important;\\n  background-color: transparent !important;\\n  background-image: none !important;\\n  border: 0 !important;\\n  margin-top: 4px;\\n  cursor: pointer;\\n  font-weight: 300;\\n}\\n#filter .filter_actions .filter-heading .icon {\\n  width: 15px;\\n}\\n#filter .filter_actions .filter-heading .icon * {\\n  stroke: white !important;\\n}\\n#filter .form-control {\\n  height: 25px;\\n}\\n#filter .btn {\\n  padding-left: 5px;\\n  padding-right: 5px;\\n  padding-top: 1px;\\n  padding-bottom: 2px;\\n}\\n#filter .input-group-addon {\\n  padding: 0;\\n  padding-left: 5px;\\n  padding-right: 5px;\\n  color: rgba(0, 0, 0, 0.3);\\n  background-color: white;\\n  border-left: 0;\\n  border-radius: 0;\\n  font-weight: 100;\\n  text-transform: lowercase;\\n  font-size: 12px;\\n}\\n#filter .panel-default {\\n  margin: 0;\\n  border-radius: 0;\\n  background-color: rgba(194, 27, 122, 0.02);\\n  border: 0;\\n  border-top: 1px solid #303030;\\n  border-bottom: 1px solid #202525;\\n  margin-top: 3px;\\n}\\n#FigureMarkdownEdit .header {\\n  width: 100%;\\n  position: absolute;\\n  top: 0px;\\n  left: 0px;\\n  display: inline-block;\\n  height: 60px;\\n  background-color: white;\\n  overflow: hidden;\\n}\\n#FigureMarkdownEdit .header .left {\\n  width: 50%;\\n  display: inline-block;\\n  height: 60px;\\n  font-size: 20px;\\n  padding: 6px;\\n  color: #CC4F5A;\\n  background-color: rgba(0, 0, 0, 0.1);\\n  vertical-align: top;\\n}\\n#FigureMarkdownEdit .header .left small {\\n  font-size: 16px;\\n}\\n#FigureMarkdownEdit .header .right {\\n  width: 50%;\\n  display: inline-block;\\n  height: 60px;\\n  font-size: 20px;\\n  padding: 6px;\\n  color: #CC4F5A;\\n  background-color: rgba(0, 0, 0, 0.05);\\n  vertical-align: top;\\n}\\n#FigureMarkdownEdit .source {\\n  width: 50%;\\n  display: inline-block;\\n  font-family: Menlo, Monaco, Consolas, \\\"Courier New\\\", monospace;\\n  font-size: 13px;\\n  padding: 2px;\\n  top: 60px;\\n  bottom: 0px;\\n  position: absolute;\\n}\\n#FigureMarkdownEdit .preview {\\n  width: 50%;\\n  display: inline-block;\\n  top: 0px;\\n  left: 50%;\\n  position: absolute;\\n  background-color: white;\\n  padding: 30px;\\n  overflow: auto;\\n  top: 60px;\\n  bottom: 0px;\\n}\\n#FigureMarkdownEdit .preview img {\\n  max-width: 35%;\\n}\\n#FigureMarkdownEdit .preview table {\\n  font-family: Arial, Helvetica, sans-serif;\\n  color: #666;\\n  font-size: 12px;\\n  text-shadow: 1px 1px 0px #fff;\\n  background: #eaebec;\\n  margin: 20px;\\n  margin-left: 0;\\n  border: #ccc 1px solid;\\n  -moz-border-radius: 3px;\\n  -webkit-border-radius: 3px;\\n  border-radius: 3px;\\n  -moz-box-shadow: 0 1px 2px #d1d1d1;\\n  -webkit-box-shadow: 0 1px 2px #d1d1d1;\\n  box-shadow: 0 1px 2px #d1d1d1;\\n}\\n#FigureMarkdownEdit .preview table th {\\n  padding: 21px 25px 22px 25px;\\n  border-top: 1px solid #fafafa;\\n  border-bottom: 1px solid #e0e0e0;\\n}\\n#FigureMarkdownEdit .preview table th:first-child {\\n  text-align: left;\\n  padding-left: 20px;\\n}\\n#FigureMarkdownEdit .preview table tr:first-child th:first-child {\\n  -moz-border-radius-topleft: 3px;\\n  -webkit-border-top-left-radius: 3px;\\n  border-top-left-radius: 3px;\\n}\\n#FigureMarkdownEdit .preview table tr:first-child th:last-child {\\n  -moz-border-radius-topright: 3px;\\n  -webkit-border-top-right-radius: 3px;\\n  border-top-right-radius: 3px;\\n}\\n#FigureMarkdownEdit .preview table tr {\\n  text-align: center;\\n  padding-left: 20px;\\n}\\n#FigureMarkdownEdit .preview table tr td:first-child {\\n  text-align: left;\\n  padding-left: 20px;\\n  border-left: 0;\\n}\\n#FigureMarkdownEdit .preview table tr td {\\n  padding: 18px;\\n  border-top: 1px solid #ffffff;\\n  border-bottom: 1px solid #e0e0e0;\\n  border-left: 1px solid #e0e0e0;\\n}\\n#FigureMarkdownEdit .preview tbody tr:nth-child(odd) {\\n  background: #fafafa;\\n}\\n#FigureMarkdownEdit .preview tbody tr:nth-child(even) {\\n  background: #f3f3f3;\\n}\\n#FigureMarkdownEdit .preview table tr:last-child td {\\n  border-bottom: 0;\\n}\\n#FigureMarkdownEdit .preview table tr:last-child td:first-child {\\n  -moz-border-radius-bottomleft: 3px;\\n  -webkit-border-bottom-left-radius: 3px;\\n  border-bottom-left-radius: 3px;\\n}\\n#FigureMarkdownEdit .preview table tr:last-child td:last-child {\\n  -moz-border-radius-bottomright: 3px;\\n  -webkit-border-bottom-right-radius: 3px;\\n  border-bottom-right-radius: 3px;\\n}\\n.ui-anglepicker {\\n  width: 52px;\\n  height: 52px;\\n  background: #dbdbdb;\\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2RiZGJkYiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjIwJSIgc3RvcC1jb2xvcj0iI2UxZTFkZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmOGY4ZjMiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);\\n  background: -moz-linear-gradient(top, #dbdbdb 0%, #e1e1de 20%, #f8f8f3 100%);\\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #dbdbdb), color-stop(20%, #e1e1de), color-stop(100%, #f8f8f3));\\n  background: -webkit-linear-gradient(top, #dbdbdb 0%, #e1e1de 20%, #f8f8f3 100%);\\n  background: -o-linear-gradient(top, #dbdbdb 0%, #e1e1de 20%, #f8f8f3 100%);\\n  background: -ms-linear-gradient(top, #dbdbdb 0%, #e1e1de 20%, #f8f8f3 100%);\\n  background: linear-gradient(to bottom, #dbdbdb 0%, #e1e1de 20%, #f8f8f3 100%);\\n  border: 2px solid #666;\\n  -moz-box-shadow: inset 0 2px 3px white, inset 0 -1px 2px #fffef8;\\n  -webkit-box-shadow: inset 0 2px 3px white, inset 0 -1px 2px #fffef8;\\n  box-shadow: inset 0 2px 3px white, inset 0 -1px 2px #fffef8;\\n  -moz-border-radius: 50%;\\n  -webkit-border-radius: 50%;\\n  border-radius: 50%;\\n  position: relative;\\n  display: inline-block;\\n}\\n.ui-anglepicker-pointer {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  width: 50%;\\n  margin: -2px 0 0 -2px;\\n  -moz-transform-origin: 2px 2px;\\n  -webkit-transform-origin: 2px 2px;\\n  -ms-transform-origin: 2px 2px;\\n  -o-transform-origin: 2px 2px;\\n  transform-origin: 2px 2px;\\n}\\n.ui-anglepicker:hover,\\n.ui-anglepicker.ui-anglepicker-dragging {\\n  border-color: #494949;\\n}\\n.ui-anglepicker-dragging .ui-anglepicker-dot,\\n.ui-anglepicker-dragging .ui-anglepicker-line,\\n.ui-anglepicker:hover .ui-anglepicker-dot,\\n.ui-anglepicker:hover .ui-anglepicker-line {\\n  background: #494949;\\n}\\n.ui-anglepicker-dot {\\n  height: 4px;\\n  width: 4px;\\n  position: absolute;\\n  background: #838383;\\n  -moz-border-radius: 50%;\\n  -webkit-border-radius: 50%;\\n  border-radius: 50%;\\n}\\n.ui-anglepicker-line {\\n  margin-top: 1.5px;\\n  margin-right: -2px;\\n  height: 1px;\\n  background: #838383;\\n}\\n#tool_shape.open .dropdown-menu {\\n  -webkit-transform: scale(1, 1);\\n  opacity: 1;\\n  transform: scale(1, 1);\\n}\\n#tool_shape .dropdown-menu {\\n  opacity: 0.1;\\n  animation-fill-mode: forwards;\\n  transform: scale(1, 0);\\n  transform-origin: 0 0 ;\\n  display: block;\\n  transition: all 0.2s ease;\\n}\\n#tool_shape .tool_shape_entry {\\n  text-align: left;\\n}\\n#tool_shape .tool_shape_entry img {\\n  height: 30px;\\n  padding-right: 20px;\\n}\\n#tool_shape .tool_shape_entry .tool_label {\\n  min-width: 95px;\\n  display: inline-block;\\n}\\n#tool_shape .tool_shape_entry .tool_shortcut {\\n  color: rgba(0, 0, 0, 0.5);\\n}\\n\", \"\"]);\n\n// exports\n","var api = require(\"!../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../css-loader/index.js!./font-awesome.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;"],"sourceRoot":""}